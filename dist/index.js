import*as e from"../../../../power-user.js";import*as t from"../../../../../script.js";import*as n from"../../../../world-info.js";import*as r from"../../../../instruct-mode.js";import*as o from"../../../../chats.js";import*as a from"../../../../openai.js";import*as i from"../../../../authors-note.js";import*as l from"../../../../group-chats.js";import*as s from"../../../regex/engine.js";import*as u from"../../../../utils.js";import*as c from"../../../../slash-commands/SlashCommandCommonEnumsProvider.js";import*as f from"../../../../slash-commands/SlashCommandEnumValue.js";import*as d from"../../../../popup.js";import*as p from"../../../../../lib/dialog-polyfill.esm.js";import*as h from"../../../../../lib.js";var m={247:(e,t,n)=>{
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(982),o=n(540),a=n(961);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function s(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(s(e)!==e)throw Error(i(188))}function f(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=f(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var P=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var N=Symbol.iterator;function O(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=N&&e[N]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function j(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList";case P:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return j(e(t))}catch(e){}}return null}var I=Array.isArray,L=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},R=[],F=-1;function z(e){return{current:e}}function B(e){0>F||(e.current=R[F],R[F]=null,F--)}function U(e,t){F++,R[F]=e.current,e.current=t}var V=z(null),$=z(null),H=z(null),G=z(null);function Y(e,t){switch(U(H,t),U($,e),U(V,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?of(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=af(t=of(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(V),U(V,e)}function W(){B(V),B($),B(H)}function q(e){null!==e.memoizedState&&U(G,e);var t=V.current,n=af(t,e.type);t!==n&&(U($,e),U(V,n))}function X(e){$.current===e&&(B(V),B($)),G.current===e&&(B(G),Xf._currentValue=M)}var Q=Object.prototype.hasOwnProperty,K=r.unstable_scheduleCallback,Z=r.unstable_cancelCallback,J=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,oe=r.unstable_UserBlockingPriority,ae=r.unstable_NormalPriority,ie=r.unstable_LowPriority,le=r.unstable_IdlePriority,se=r.log,ue=r.unstable_setDisableYieldValue,ce=null,fe=null;function de(e){if("function"==typeof se&&ue(e),fe&&"function"==typeof fe.setStrictMode)try{fe.setStrictMode(ce,e)}catch(e){}}var pe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(he(e)/me|0)|0},he=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var l=134217727&r;return 0!==l?0!==(r=l&~a)?o=ye(r):0!==(i&=l)?o=ye(i):n||0!==(n=l&~e)&&(o=ye(n)):0!==(l=r&~a)?o=ye(l):0!==i?o=ye(i):n||0!==(n=r&~e)&&(o=ye(n)),0===o?0:0!==t&&t!==o&&!(t&a)&&((a=o&-o)>=(n=t&-t)||32===a&&4194048&n)?t:o}function we(e,t){return!(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return!(4194048&(ge<<=1))&&(ge=256),e}function ke(){var e=ve;return!(62914560&(ve<<=1))&&(ve=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Pe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ne(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Oe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Ae=Math.random().toString(36).slice(2),je="__reactFiber$"+Ae,Ie="__reactProps$"+Ae,Le="__reactContainer$"+Ae,De="__reactEvents$"+Ae,Me="__reactListeners$"+Ae,Re="__reactHandles$"+Ae,Fe="__reactResources$"+Ae,ze="__reactMarker$"+Ae;function Be(e){delete e[je],delete e[Ie],delete e[De],delete e[Me],delete e[Re]}function Ue(e){var t=e[je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[je]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wf(e);null!==e;){if(n=e[je])return n;e=wf(e)}return t}n=(e=n).parentNode}return null}function Ve(e){if(e=e[je]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(i(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[ze]=!0}var Ye=new Set,We={};function qe(e,t){Xe(e,t),Xe(e+"Capture",t)}function Xe(e,t){for(We[e]=t,e=0;e<t.length;e++)Ye.add(t[e])}var Qe,Ke,Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},et={};function tt(e,t,n){if(o=t,Q.call(et,o)||!Q.call(Je,o)&&(Ze.test(o)?et[o]=!0:(Je[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ot(e){if(void 0===Qe)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);Qe=t&&t[1]||"",Ke=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Qe+e+Ke}var at=!1;function it(e,t){if(!e||at)return"";at=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(e){var r=e}Reflect.construct(e,[],n)}else{try{n.call()}catch(e){r=e}e.call(n.prototype)}}else{try{throw Error()}catch(e){r=e}(n=e())&&"function"==typeof n.catch&&n.catch((function(){}))}}catch(e){if(e&&r&&"string"==typeof e.stack)return[e.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),i=a[0],l=a[1];if(i&&l){var s=i.split("\n"),u=l.split("\n");for(o=r=0;r<s.length&&!s[r].includes("DetermineComponentFrameRoot");)r++;for(;o<u.length&&!u[o].includes("DetermineComponentFrameRoot");)o++;if(r===s.length||o===u.length)for(r=s.length-1,o=u.length-1;1<=r&&0<=o&&s[r]!==u[o];)o--;for(;1<=r&&0<=o;r--,o--)if(s[r]!==u[o]){if(1!==r||1!==o)do{if(r--,0>--o||s[r]!==u[o]){var c="\n"+s[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=o);break}}}finally{at=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?ot(n):""}function lt(e){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return it(e.type,!1);case 11:return it(e.type.render,!1);case 1:return it(e.type,!0);case 31:return ot("Activity");default:return""}}function st(e){try{var t="";do{t+=lt(e),e=e.return}while(e);return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ht=/[\n"\\]/g;function mt(e){return e.replace(ht,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,o,a,i,l){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?yt(e,i,ut(t)):null!=n?yt(e,i,ut(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=a&&(e.defaultChecked=!!a),null!=o&&(e.checked=o&&"function"!=typeof o&&"symbol"!=typeof o),null!=l&&"function"!=typeof l&&"symbol"!=typeof l&&"boolean"!=typeof l?e.name=""+ut(l):e.removeAttribute("name")}function vt(e,t,n,r,o,a,i,l){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=n){if(("submit"===a||"reset"===a)&&null==t)return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,l||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:o)&&"symbol"!=typeof r&&!!r,e.checked=l?e.checked:!!r,e.defaultChecked=!!r,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(i(92));if(I(r)){if(1<r.length)throw Error(i(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var kt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||kt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(i(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Et(e,o,r)}else for(var a in t)t.hasOwnProperty(a)&&Et(e,a,t[a])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nt(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ot=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,It=null;function Lt(e){var t=Ve(e);if(t&&(e=t.stateNode)){var n=e[Ie]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Ie]||null;if(!o)throw Error(i(90));gt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Mt(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==jt||null!==It)&&(Uu(),jt&&(t=jt,e=It,It=jt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Rt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ie]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(i(231,t,typeof n));return n}var Ft=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),zt=!1;if(Ft)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){zt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(e){zt=!1}var Ut=null,Vt=null,$t=null;function Ht(){if($t)return $t;var e,t,n=Vt,r=n.length,o="value"in Ut?Ut.value:Ut.textContent,a=o.length;for(e=0;e<r&&n[e]===o[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===o[a-t];t++);return $t=o.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Wt(){return!1}function qt(e){function t(t,n,r,o,a){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(o):o[i]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Yt:Wt,this.isPropagationStopped=Wt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Xt,Qt,Kt,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jt=qt(Zt),en=d({},Zt,{view:0,detail:0}),tn=qt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kt&&(Kt&&"mousemove"===e.type?(Xt=e.screenX-Kt.screenX,Qt=e.screenY-Kt.screenY):Qt=Xt=0,Kt=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Qt}}),rn=qt(nn),on=qt(d({},nn,{dataTransfer:0})),an=qt(d({},en,{relatedTarget:0})),ln=qt(d({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),sn=qt(d({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=qt(d({},Zt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function hn(){return pn}var mn=qt(d({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=qt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=qt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hn})),yn=qt(d({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=qt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=qt(d({},Zt,{newState:0,oldState:0})),xn=[9,13,27,32],Sn=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var En=Ft&&"TextEvent"in window&&!kn,_n=Ft&&(!Sn||kn&&8<kn&&11>=kn),Cn=String.fromCharCode(32),Pn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function In(e,t,n,r){jt?It?It.push(r):It=[r]:jt=r,0<(t=Hc(t,"onChange")).length&&(n=new Jt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,Dn=null;function Mn(e){Mc(e,0)}function Rn(e){if(dt($e(e)))return e}function Fn(e,t){if("change"===e)return t}var zn=!1;if(Ft){var Bn;if(Ft){var Un="oninput"in document;if(!Un){var Vn=document.createElement("div");Vn.setAttribute("oninput","return;"),Un="function"==typeof Vn.oninput}Bn=Un}else Bn=!1;zn=Bn&&(!document.documentMode||9<document.documentMode)}function $n(){Ln&&(Ln.detachEvent("onpropertychange",Hn),Dn=Ln=null)}function Hn(e){if("value"===e.propertyName&&Rn(Dn)){var t=[];In(t,Dn,e,At(e)),Mt(Mn,t)}}function Gn(e,t,n){"focusin"===e?($n(),Dn=n,(Ln=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&$n()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Rn(Dn)}function Wn(e,t){if("click"===e)return Rn(t)}function qn(e,t){if("input"===e||"change"===e)return Rn(t)}var Xn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Qn(e,t){if(Xn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Q.call(t,o)||!Xn(e[o],t[o]))return!1}return!0}function Kn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=Kn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kn(r)}}function Jn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Jn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,or=null,ar=null,ir=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ir||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&Qn(ar,r)||(ar=r,0<(r=Hc(or,"onSelect")).length&&(t=new Jt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},cr={},fr={};function dr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return cr[e]=n[t];return e}Ft&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var pr=dr("animationend"),hr=dr("animationiteration"),mr=dr("animationstart"),gr=dr("transitionrun"),vr=dr("transitionstart"),yr=dr("transitioncancel"),br=dr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){wr.set(e,t),qe(t,[e])}xr.push("scrollEnd");var kr=new WeakMap;function Er(e,t){if("object"==typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:st(t)},kr.set(e,t),t)}return{value:e,source:t,stack:st(t)}}var _r=[],Cr=0,Pr=0;function Tr(){for(var e=Cr,t=Pr=Cr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var o=_r[t];_r[t++]=null;var a=_r[t];if(_r[t++]=null,null!==r&&null!==o){var i=r.pending;null===i?o.next=o:(o.next=i.next,i.next=o),r.pending=o}0!==a&&jr(n,o,a)}}function Nr(e,t,n,r){_r[Cr++]=e,_r[Cr++]=t,_r[Cr++]=n,_r[Cr++]=r,Pr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Or(e,t,n,r){return Nr(e,t,n,r),Ir(e)}function Ar(e,t){return Nr(e,null,null,t),Ir(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(o=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,o&&null!==t&&(o=31-pe(n),null===(r=(e=a.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),a):null}function Ir(e){if(50<ju)throw ju=0,Iu=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Dr(e,t,n,r)}function Rr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,o,a){var l=0;if(r=e,"function"==typeof e)Rr(e)&&(l=1);else if("string"==typeof e)l=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case P:return(e=Mr(31,n,t,o)).elementType=P,e.lanes=a,e;case g:return Ur(n.children,o,a,t);case v:l=8,o|=24;break;case y:return(e=Mr(12,n,t,2|o)).elementType=y,e.lanes=a,e;case k:return(e=Mr(13,n,t,o)).elementType=k,e.lanes=a,e;case E:return(e=Mr(19,n,t,o)).elementType=E,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case x:l=10;break e;case w:l=9;break e;case S:l=11;break e;case _:l=14;break e;case C:l=16,r=null;break e}l=29,n=Error(i(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(l,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Ur(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Vr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function $r(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Gr=0,Yr=null,Wr=0,qr=[],Xr=0,Qr=null,Kr=1,Zr="";function Jr(e,t){Hr[Gr++]=Wr,Hr[Gr++]=Yr,Yr=e,Wr=t}function eo(e,t,n){qr[Xr++]=Kr,qr[Xr++]=Zr,qr[Xr++]=Qr,Qr=e;var r=Kr;e=Zr;var o=32-pe(r)-1;r&=~(1<<o),n+=1;var a=32-pe(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Kr=1<<32-pe(t)+o|n<<o|r,Zr=a+e}else Kr=1<<a|n<<o|r,Zr=e}function to(e){null!==e.return&&(Jr(e,1),eo(e,1,0))}function no(e){for(;e===Yr;)Yr=Hr[--Gr],Hr[Gr]=null,Wr=Hr[--Gr],Hr[Gr]=null;for(;e===Qr;)Qr=qr[--Xr],qr[Xr]=null,Zr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null}var ro=null,oo=null,ao=!1,io=null,lo=!1,so=Error(i(519));function uo(e){throw go(Er(Error(i(418,"")),e)),so}function co(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[je]=e,t[Ie]=r,n){case"dialog":Rc("cancel",t),Rc("close",t);break;case"iframe":case"object":case"embed":Rc("load",t);break;case"video":case"audio":for(n=0;n<Lc.length;n++)Rc(Lc[n],t);break;case"source":Rc("error",t);break;case"img":case"image":case"link":Rc("error",t),Rc("load",t);break;case"details":Rc("toggle",t);break;case"input":Rc("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ft(t);break;case"select":Rc("invalid",t);break;case"textarea":Rc("invalid",t),xt(t,r.value,r.defaultValue,r.children),ft(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qc(t.textContent,n)?(null!=r.popover&&(Rc("beforetoggle",t),Rc("toggle",t)),null!=r.onScroll&&Rc("scroll",t),null!=r.onScrollEnd&&Rc("scrollend",t),null!=r.onClick&&(t.onclick=Kc),t=!0):t=!1,t||uo(e)}function fo(e){for(ro=e.return;ro;)switch(ro.tag){case 5:case 13:return void(lo=!1);case 27:case 3:return void(lo=!0);default:ro=ro.return}}function po(e){if(e!==ro)return!1;if(!ao)return fo(e),ao=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||lf(e.type,e.memoizedProps)),t=!t),t&&oo&&uo(e),fo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){oo=yf(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}oo=null}}else 27===n?(n=oo,hf(e.type)?(e=bf,bf=null,oo=e):oo=n):oo=ro?yf(e.stateNode.nextSibling):null;return!0}function ho(){oo=ro=null,ao=!1}function mo(){var e=io;return null!==e&&(null===bu?bu=e:bu.push.apply(bu,e),io=null),e}function go(e){null===io?io=[e]:io.push(e)}var vo=z(null),yo=null,bo=null;function wo(e,t,n){U(vo,t._currentValue),t._currentValue=n}function xo(e){e._currentValue=vo.current,B(vo)}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var l=o.child;a=a.firstContext;e:for(;null!==a;){var s=a;a=o;for(var u=0;u<t.length;u++)if(s.context===t[u]){a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),So(a.return,n,e),r||(l=null);break e}a=s.next}}else if(18===o.tag){if(null===(l=o.return))throw Error(i(341));l.lanes|=n,null!==(a=l.alternate)&&(a.lanes|=n),So(l,n,e),l=null}else l=o.child;if(null!==l)l.return=o;else for(l=o;null!==l;){if(l===e){l=null;break}if(null!==(o=l.sibling)){o.return=l.return,l=o;break}l=l.return}o=l}}function Eo(e,t,n,r){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(524288&o.flags)a=!0;else if(262144&o.flags)break;if(10===o.tag){var l=o.alternate;if(null===l)throw Error(i(387));if(null!==(l=l.memoizedProps)){var s=o.type;Xn(o.pendingProps.value,l.value)||(null!==e?e.push(s):e=[s])}}else if(o===G.current){if(null===(l=o.alternate))throw Error(i(387));l.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Xf):e=[Xf])}o=o.return}null!==e&&ko(t,e,n,r),t.flags|=262144}function _o(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Co(e){yo=e,bo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Po(e){return No(yo,e)}function To(e,t){return null===yo&&Co(e),No(e,t)}function No(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bo){if(null===e)throw Error(i(308));bo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bo=bo.next=t;return n}var Oo="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ao=r.unstable_scheduleCallback,jo=r.unstable_NormalPriority,Io={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lo(){return{controller:new Oo,data:new Map,refCount:0}}function Do(e){e.refCount--,0===e.refCount&&Ao(jo,(function(){e.controller.abort()}))}var Mo=null,Ro=0,Fo=0,zo=null;function Bo(){if(0==--Ro&&null!==Mo){null!==zo&&(zo.status="fulfilled");var e=Mo;Mo=null,Fo=0,zo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Uo=L.S;L.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Mo){var n=Mo=[];Ro=0,Fo=Nc(),zo={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ro++,t.then(Bo,Bo)}(0,t),null!==Uo&&Uo(e,t)};var Vo=z(null);function $o(){var e=Vo.current;return null!==e?e:ru.pooledCache}function Ho(e,t){U(Vo,null===t?Vo.current:t.pool)}function Go(){var e=$o();return null===e?null:{parent:Io._currentValue,pool:e}}var Yo=Error(i(460)),Wo=Error(i(474)),qo=Error(i(542)),Xo={then:function(){}};function Qo(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ko(){}function Zo(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ko,Ko),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ta(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ko,Ko);else{if(null!==(e=ru)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ta(e=t.reason),e}throw Jo=t,Yo}}var Jo=null;function ea(){if(null===Jo)throw Error(i(459));var e=Jo;return Jo=null,e}function ta(e){if(e===Yo||e===qo)throw Error(i(483))}var na=!1;function ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ia(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&nu){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Ir(e),jr(e,null,n),t}return Nr(e,r,t,n),Ir(e)}function la(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}function sa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?o=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?o=a=t:a=a.next=t}else o=a=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ua=!1;function ca(){if(ua){if(null!==zo)throw zo}}function fa(e,t,n,r){ua=!1;var o=e.updateQueue;na=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(null!==l){o.shared.pending=null;var s=l,u=s.next;s.next=null,null===i?a=u:i.next=u,i=s;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===l?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=s))}if(null!==a){var f=o.baseState;for(i=0,c=u=s=null,l=a;;){var p=-536870913&l.lane,h=p!==l.lane;if(h?(au&p)===p:(r&p)===p){0!==p&&p===Fo&&(ua=!0),null!==c&&(c=c.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var m=e,g=l;p=t;var v=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){f=m.call(v,f,p);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(v,f,p):m))break e;f=d({},f,p);break e;case 2:na=!0}}null!==(p=l.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=o.callbacks)?o.callbacks=[p]:h.push(p))}else h={lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(u=c=h,s=f):c=c.next=h,i|=p;if(null===(l=l.next)){if(null===(l=o.shared.pending))break;l=(h=l).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}null===c&&(s=f),o.baseState=s,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null===a&&(o.shared.lanes=0),pu|=i,e.lanes=i,e.memoizedState=f}}function da(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function pa(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)da(n[e],t)}var ha=z(null),ma=z(0);function ga(e,t){U(ma,e=fu),U(ha,t),fu=e|t.baseLanes}function va(){U(ma,fu),U(ha,ha.current)}function ya(){fu=ma.current,B(ha),B(ma)}var ba=0,wa=null,xa=null,Sa=null,ka=!1,Ea=!1,_a=!1,Ca=0,Pa=0,Ta=null,Na=0;function Oa(){throw Error(i(321))}function Aa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ja(e,t,n,r,o,a){return ba=a,wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?Yi:Wi,_a=!1,a=n(r,o),_a=!1,Ea&&(a=La(t,n,r,o)),Ia(e),a}function Ia(e){L.H=Gi;var t=null!==xa&&null!==xa.next;if(ba=0,Sa=xa=wa=null,ka=!1,Pa=0,Ta=null,t)throw Error(i(300));null===e||Pl||null!==(e=e.dependencies)&&_o(e)&&(Pl=!0)}function La(e,t,n,r){wa=e;var o=0;do{if(Ea&&(Ta=null),Pa=0,Ea=!1,25<=o)throw Error(i(301));if(o+=1,Sa=xa=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}L.H=qi,a=t(n,r)}while(Ea);return a}function Da(){var e=L.H,t=e.useState()[0];return t="function"==typeof t.then?Ua(t):t,e=e.useState()[0],(null!==xa?xa.memoizedState:null)!==e&&(wa.flags|=1024),t}function Ma(){var e=0!==Ca;return Ca=0,e}function Ra(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fa(e){if(ka){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ka=!1}ba=0,Sa=xa=wa=null,Ea=!1,Pa=Ca=0,Ta=null}function za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sa?wa.memoizedState=Sa=e:Sa=Sa.next=e,Sa}function Ba(){if(null===xa){var e=wa.alternate;e=null!==e?e.memoizedState:null}else e=xa.next;var t=null===Sa?wa.memoizedState:Sa.next;if(null!==t)Sa=t,xa=e;else{if(null===e){if(null===wa.alternate)throw Error(i(467));throw Error(i(310))}e={memoizedState:(xa=e).memoizedState,baseState:xa.baseState,baseQueue:xa.baseQueue,queue:xa.queue,next:null},null===Sa?wa.memoizedState=Sa=e:Sa=Sa.next=e}return Sa}function Ua(e){var t=Pa;return Pa+=1,null===Ta&&(Ta=[]),e=Zo(Ta,e,t),t=wa,null===(null===Sa?t.memoizedState:Sa.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?Yi:Wi),e}function Va(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return Ua(e);if(e.$$typeof===x)return Po(e)}throw Error(i(438,String(e)))}function $a(e){var t=null,n=wa.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=wa.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function Ha(e,t){return"function"==typeof t?t(e):t}function Ga(e){return Ya(Ba(),xa,e)}function Ya(e,t,n){var r=e.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=n;var o=e.baseQueue,a=r.pending;if(null!==a){if(null!==o){var l=o.next;o.next=a.next,a.next=l}t.baseQueue=o=a,r.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var s=l=null,u=null,c=t=o.next,f=!1;do{var d=-536870913&c.lane;if(d!==c.lane?(au&d)===d:(ba&d)===d){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Fo&&(f=!0);else{if((ba&p)===p){c=c.next,p===Fo&&(f=!0);continue}d={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=d,l=a):u=u.next=d,wa.lanes|=p,pu|=p}d=c.action,_a&&n(a,d),a=c.hasEagerState?c.eagerState:n(a,d)}else p={lane:d,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(s=u=p,l=a):u=u.next=p,wa.lanes|=d,pu|=d;c=c.next}while(null!==c&&c!==t);if(null===u?l=a:u.next=s,!Xn(a,e.memoizedState)&&(Pl=!0,f&&null!==(n=zo)))throw n;e.memoizedState=a,e.baseState=l,e.baseQueue=u,r.lastRenderedState=a}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Wa(e){var t=Ba(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var l=o=o.next;do{a=e(a,l.action),l=l.next}while(l!==o);Xn(a,t.memoizedState)||(Pl=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function qa(e,t,n){var r=wa,o=Ba(),a=ao;if(a){if(void 0===n)throw Error(i(407));n=n()}else n=t();var l=!Xn((xa||o).memoizedState,n);if(l&&(o.memoizedState=n,Pl=!0),o=o.queue,vi(2048,8,Ka.bind(null,r,o,e),[e]),o.getSnapshot!==t||l||null!==Sa&&1&Sa.memoizedState.tag){if(r.flags|=2048,hi(9,{destroy:void 0,resource:void 0},Qa.bind(null,r,o,n,t),null),null===ru)throw Error(i(349));a||124&ba||Xa(r,t,n)}return n}function Xa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wa.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qa(e,t,n,r){t.value=n,t.getSnapshot=r,Za(t)&&Ja(e)}function Ka(e,t,n){return n((function(){Za(t)&&Ja(e)}))}function Za(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(e){return!0}}function Ja(e){var t=Ar(e,2);null!==t&&Mu(t,e,2)}function ei(e){var t=za();if("function"==typeof e){var n=e;if(e=n(),_a){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:e},t}function ti(e,t,n,r){return e.baseState=n,Ya(e,xa,"function"==typeof r?r:Ha)}function ni(e,t,n,r,o){if(Vi(e))throw Error(i(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==L.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ri(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ri(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var a=L.T,i={};L.T=i;try{var l=n(o,r),s=L.S;null!==s&&s(i,l),oi(e,t,l)}catch(n){ii(e,t,n)}finally{L.T=a}}else try{oi(e,t,a=n(o,r))}catch(n){ii(e,t,n)}}function oi(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then((function(n){ai(e,t,n)}),(function(n){return ii(e,t,n)})):ai(e,t,n)}function ai(e,t,n){t.status="fulfilled",t.value=n,li(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ri(e,n)))}function ii(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,li(t),t=t.next}while(t!==r)}e.action=null}function li(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function si(e,t){return t}function ui(e,t){if(ao){var n=ru.formState;if(null!==n){e:{var r=wa;if(ao){if(oo){t:{for(var o=oo,a=lo;8!==o.nodeType;){if(!a){o=null;break t}if(null===(o=yf(o.nextSibling))){o=null;break t}}o="F!"===(a=o.data)||"F"===a?o:null}if(o){oo=yf(o.nextSibling),r="F!"===o.data;break e}}uo(r)}r=!1}r&&(t=n[0])}}return(n=za()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:t},n.queue=r,n=zi.bind(null,wa,r),r.dispatch=n,r=ei(!1),a=Ui.bind(null,wa,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=za()).queue=o,n=ni.bind(null,wa,o,a,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function ci(e){return fi(Ba(),xa,e)}function fi(e,t,n){if(t=Ya(e,t,si)[0],e=Ga(Ha)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=Ua(t)}catch(e){if(e===Yo)throw qo;throw e}else r=t;var o=(t=Ba()).queue,a=o.dispatch;return n!==t.memoizedState&&(wa.flags|=2048,hi(9,{destroy:void 0,resource:void 0},di.bind(null,o,n),null)),[r,a,e]}function di(e,t){e.action=t}function pi(e){var t=Ba(),n=xa;if(null!==n)return fi(t,n,e);Ba(),t=t.memoizedState;var r=(n=Ba()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function hi(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=wa.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},wa.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mi(){return Ba().memoizedState}function gi(e,t,n,r){var o=za();r=void 0===r?null:r,wa.flags|=e,o.memoizedState=hi(1|t,{destroy:void 0,resource:void 0},n,r)}function vi(e,t,n,r){var o=Ba();r=void 0===r?null:r;var a=o.memoizedState.inst;null!==xa&&null!==r&&Aa(r,xa.memoizedState.deps)?o.memoizedState=hi(t,a,n,r):(wa.flags|=e,o.memoizedState=hi(1|t,a,n,r))}function yi(e,t){gi(8390656,8,e,t)}function bi(e,t){vi(2048,8,e,t)}function wi(e,t){return vi(4,2,e,t)}function xi(e,t){return vi(4,4,e,t)}function Si(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function ki(e,t,n){n=null!=n?n.concat([e]):null,vi(4,4,Si.bind(null,t,e),n)}function Ei(){}function _i(e,t){var n=Ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ci(e,t){var n=Ba();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Aa(t,r[1]))return r[0];if(r=e(),_a){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Pi(e,t,n){return void 0===n||1073741824&ba?e.memoizedState=t:(e.memoizedState=n,e=Du(),wa.lanes|=e,pu|=e,n)}function Ti(e,t,n,r){return Xn(n,t)?n:null!==ha.current?(e=Pi(e,n,r),Xn(e,t)||(Pl=!0),e):42&ba?(e=Du(),wa.lanes|=e,pu|=e,t):(Pl=!0,e.memoizedState=n)}function Ni(e,t,n,r,o){var a=D.p;D.p=0!==a&&8>a?a:8;var i,l,s,u=L.T,c={};L.T=c,Ui(e,!1,t,n);try{var f=o(),d=L.S;if(null!==d&&d(c,f),null!==f&&"object"==typeof f&&"function"==typeof f.then)Bi(e,t,(i=r,l=[],s={status:"pending",value:null,reason:null,then:function(e){l.push(e)}},f.then((function(){s.status="fulfilled",s.value=i;for(var e=0;e<l.length;e++)(0,l[e])(i)}),(function(e){for(s.status="rejected",s.reason=e,e=0;e<l.length;e++)(0,l[e])(void 0)})),s),Lu());else Bi(e,t,r,Lu())}catch(n){Bi(e,t,{then:function(){},status:"rejected",reason:n},Lu())}finally{D.p=a,L.T=u}}function Oi(){}function Ai(e,t,n,r){if(5!==e.tag)throw Error(i(476));var o=ji(e).queue;Ni(e,o,t,M,null===n?Oi:function(){return Ii(e),n(r)})}function ji(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ha,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ii(e){Bi(e,ji(e).next.queue,{},Lu())}function Li(){return Po(Xf)}function Di(){return Ba().memoizedState}function Mi(){return Ba().memoizedState}function Ri(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lu(),r=ia(t,e=aa(n),n);return null!==r&&(Mu(r,t,n),la(r,t,n)),t={cache:Lo()},void(e.payload=t)}t=t.return}}function Fi(e,t,n){var r=Lu();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vi(e)?$i(t,n):null!==(n=Or(e,t,n,r))&&(Mu(n,e,r),Hi(n,t,r))}function zi(e,t,n){Bi(e,t,n,Lu())}function Bi(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vi(e))$i(t,o);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=a(i,n);if(o.hasEagerState=!0,o.eagerState=l,Xn(l,i))return Nr(e,t,o,0),null===ru&&Tr(),!1}catch(e){}if(null!==(n=Or(e,t,o,r)))return Mu(n,e,r),Hi(n,t,r),!0}return!1}function Ui(e,t,n,r){if(r={lane:2,revertLane:Nc(),action:r,hasEagerState:!1,eagerState:null,next:null},Vi(e)){if(t)throw Error(i(479))}else null!==(t=Or(e,n,r,2))&&Mu(t,e,2)}function Vi(e){var t=e.alternate;return e===wa||null!==t&&t===wa}function $i(e,t){Ea=ka=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Hi(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pe(e,n)}}var Gi={readContext:Po,use:Va,useCallback:Oa,useContext:Oa,useEffect:Oa,useImperativeHandle:Oa,useLayoutEffect:Oa,useInsertionEffect:Oa,useMemo:Oa,useReducer:Oa,useRef:Oa,useState:Oa,useDebugValue:Oa,useDeferredValue:Oa,useTransition:Oa,useSyncExternalStore:Oa,useId:Oa,useHostTransitionStatus:Oa,useFormState:Oa,useActionState:Oa,useOptimistic:Oa,useMemoCache:Oa,useCacheRefresh:Oa},Yi={readContext:Po,use:Va,useCallback:function(e,t){return za().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:yi,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,gi(4194308,4,Si.bind(null,t,e),n)},useLayoutEffect:function(e,t){return gi(4194308,4,e,t)},useInsertionEffect:function(e,t){gi(4,2,e,t)},useMemo:function(e,t){var n=za();t=void 0===t?null:t;var r=e();if(_a){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=za();if(void 0!==n){var o=n(t);if(_a){de(!0);try{n(t)}finally{de(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=Fi.bind(null,wa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},za().memoizedState=e},useState:function(e){var t=(e=ei(e)).queue,n=zi.bind(null,wa,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ei,useDeferredValue:function(e,t){return Pi(za(),e,t)},useTransition:function(){var e=ei(!1);return e=Ni.bind(null,wa,e.queue,!0,!1),za().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=wa,o=za();if(ao){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===ru)throw Error(i(349));124&au||Xa(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,yi(Ka.bind(null,r,a,e),[e]),r.flags|=2048,hi(9,{destroy:void 0,resource:void 0},Qa.bind(null,r,a,n,t),null),n},useId:function(){var e=za(),t=ru.identifierPrefix;if(ao){var n=Zr;t=""+t+"R"+(n=(Kr&~(1<<32-pe(Kr)-1)).toString(32)+n),0<(n=Ca++)&&(t+="H"+n.toString(32)),t+=""}else t=""+t+"r"+(n=Na++).toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Li,useFormState:ui,useActionState:ui,useOptimistic:function(e){var t=za();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ui.bind(null,wa,!0,n),n.dispatch=t,[e,t]},useMemoCache:$a,useCacheRefresh:function(){return za().memoizedState=Ri.bind(null,wa)}},Wi={readContext:Po,use:Va,useCallback:_i,useContext:Po,useEffect:bi,useImperativeHandle:ki,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:Ga,useRef:mi,useState:function(){return Ga(Ha)},useDebugValue:Ei,useDeferredValue:function(e,t){return Ti(Ba(),xa.memoizedState,e,t)},useTransition:function(){var e=Ga(Ha)[0],t=Ba().memoizedState;return["boolean"==typeof e?e:Ua(e),t]},useSyncExternalStore:qa,useId:Di,useHostTransitionStatus:Li,useFormState:ci,useActionState:ci,useOptimistic:function(e,t){return ti(Ba(),0,e,t)},useMemoCache:$a,useCacheRefresh:Mi},qi={readContext:Po,use:Va,useCallback:_i,useContext:Po,useEffect:bi,useImperativeHandle:ki,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:Wa,useRef:mi,useState:function(){return Wa(Ha)},useDebugValue:Ei,useDeferredValue:function(e,t){var n=Ba();return null===xa?Pi(n,e,t):Ti(n,xa.memoizedState,e,t)},useTransition:function(){var e=Wa(Ha)[0],t=Ba().memoizedState;return["boolean"==typeof e?e:Ua(e),t]},useSyncExternalStore:qa,useId:Di,useHostTransitionStatus:Li,useFormState:pi,useActionState:pi,useOptimistic:function(e,t){var n=Ba();return null!==xa?ti(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:$a,useCacheRefresh:Mi},Xi=null,Qi=0;function Ki(e){var t=Qi;return Qi+=1,null===Xi&&(Xi=[]),Zo(Xi,e,t)}function Zi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Ji(e,t){if(t.$$typeof===p)throw Error(i(525));throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function el(e){return(0,e._init)(e._payload)}function tl(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===g?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===C&&el(a)===t.type)?(Zi(t=o(t,n.props),n),t.return=e,t):(Zi(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Ur(n,e.mode,r,a)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case h:return Zi(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=$r(t,e.mode,n)).return=e,t;case C:return d(e,t=(0,t._init)(t._payload),n)}if(I(t)||O(t))return(t=Ur(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return d(e,Ki(t),n);if(t.$$typeof===x)return d(e,To(e,t),n);Ji(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case h:return n.key===o?u(e,t,n,r):null;case m:return n.key===o?c(e,t,n,r):null;case C:return p(e,t,n=(o=n._init)(n._payload),r)}if(I(n)||O(n))return null!==o?null:f(e,t,n,r,null);if("function"==typeof n.then)return p(e,t,Ki(n),r);if(n.$$typeof===x)return p(e,t,To(e,n),r);Ji(e,n)}return null}function v(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case C:return v(e,t,n,r=(0,r._init)(r._payload),o)}if(I(r)||O(r))return f(t,e=e.get(n)||null,r,o,null);if("function"==typeof r.then)return v(e,t,n,Ki(r),o);if(r.$$typeof===x)return v(e,t,n,To(t,r),o);Ji(t,r)}return null}function y(s,u,c,f){if("object"==typeof c&&null!==c&&c.type===g&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case h:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===g){if(7===u.tag){n(s,u.sibling),(f=o(u,c.props.children)).return=s,s=f;break e}}else if(u.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===C&&el(b)===u.type){n(s,u.sibling),Zi(f=o(u,c.props),c),f.return=s,s=f;break e}n(s,u);break}t(s,u),u=u.sibling}c.type===g?((f=Ur(c.props.children,s.mode,f,c.key)).return=s,s=f):(Zi(f=Br(c.type,c.key,c.props,null,s.mode,f),c),f.return=s,s=f)}return l(s);case m:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(s,u.sibling),(f=o(u,c.children||[])).return=s,s=f;break e}n(s,u);break}t(s,u),u=u.sibling}(f=$r(c,s.mode,f)).return=s,s=f}return l(s);case C:return y(s,u,c=(b=c._init)(c._payload),f)}if(I(c))return function(o,i,l,s){for(var u=null,c=null,f=i,h=i=0,m=null;null!==f&&h<l.length;h++){f.index>h?(m=f,f=null):m=f.sibling;var g=p(o,f,l[h],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(o,f),i=a(g,i,h),null===c?u=g:c.sibling=g,c=g,f=m}if(h===l.length)return n(o,f),ao&&Jr(o,h),u;if(null===f){for(;h<l.length;h++)null!==(f=d(o,l[h],s))&&(i=a(f,i,h),null===c?u=f:c.sibling=f,c=f);return ao&&Jr(o,h),u}for(f=r(f);h<l.length;h++)null!==(m=v(f,o,h,l[h],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?h:m.key),i=a(m,i,h),null===c?u=m:c.sibling=m,c=m);return e&&f.forEach((function(e){return t(o,e)})),ao&&Jr(o,h),u}(s,u,c,f);if(O(c)){if("function"!=typeof(b=O(c)))throw Error(i(150));return function(o,l,s,u){if(null==s)throw Error(i(151));for(var c=null,f=null,h=l,m=l=0,g=null,y=s.next();null!==h&&!y.done;m++,y=s.next()){h.index>m?(g=h,h=null):g=h.sibling;var b=p(o,h,y.value,u);if(null===b){null===h&&(h=g);break}e&&h&&null===b.alternate&&t(o,h),l=a(b,l,m),null===f?c=b:f.sibling=b,f=b,h=g}if(y.done)return n(o,h),ao&&Jr(o,m),c;if(null===h){for(;!y.done;m++,y=s.next())null!==(y=d(o,y.value,u))&&(l=a(y,l,m),null===f?c=y:f.sibling=y,f=y);return ao&&Jr(o,m),c}for(h=r(h);!y.done;m++,y=s.next())null!==(y=v(h,o,m,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),l=a(y,l,m),null===f?c=y:f.sibling=y,f=y);return e&&h.forEach((function(e){return t(o,e)})),ao&&Jr(o,m),c}(s,u,c=b.call(c),f)}if("function"==typeof c.then)return y(s,u,Ki(c),f);if(c.$$typeof===x)return y(s,u,To(s,c),f);Ji(s,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(s,u.sibling),(f=o(u,c)).return=s,s=f):(n(s,u),(f=Vr(c,s.mode,f)).return=s,s=f),l(s)):n(s,u)}return function(e,t,n,r){try{Qi=0;var o=y(e,t,n,r);return Xi=null,o}catch(t){if(t===Yo||t===qo)throw t;var a=Mr(29,t,null,e.mode);return a.lanes=r,a.return=e,a}}}var nl=tl(!0),rl=tl(!1),ol=z(null),al=null;function il(e){var t=e.alternate;U(cl,1&cl.current),U(ol,e),null===al&&(null===t||null!==ha.current||null!==t.memoizedState)&&(al=e)}function ll(e){if(22===e.tag){if(U(cl,cl.current),U(ol,e),null===al){var t=e.alternate;null!==t&&null!==t.memoizedState&&(al=e)}}else sl()}function sl(){U(cl,cl.current),U(ol,ol.current)}function ul(e){B(ol),al===e&&(al=null),B(cl)}var cl=z(0);function fl(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||vf(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function dl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pl={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lu(),o=aa(r);o.payload=t,null!=n&&(o.callback=n),null!==(t=ia(e,o,r))&&(Mu(t,e,r),la(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lu(),o=aa(r);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=ia(e,o,r))&&(Mu(t,e,r),la(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lu(),r=aa(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=ia(e,r,n))&&(Mu(t,e,n),la(t,e,n))}};function hl(e,t,n,r,o,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!Qn(n,r)||!Qn(o,a))}function ml(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pl.enqueueReplaceState(t,t.state,null)}function gl(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=d({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}var vl="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function yl(e){vl(e)}function bl(e){console.error(e)}function wl(e){vl(e)}function xl(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout((function(){throw e}))}}function Sl(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout((function(){throw e}))}}function kl(e,t,n){return(n=aa(n)).tag=3,n.payload={element:null},n.callback=function(){xl(e,t)},n}function El(e){return(e=aa(e)).tag=3,e}function _l(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"==typeof o){var a=r.value;e.payload=function(){return o(a)},e.callback=function(){Sl(t,n,r)}}var i=n.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Sl(t,n,r),"function"!=typeof o&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Cl=Error(i(461)),Pl=!1;function Tl(e,t,n,r){t.child=null===e?rl(t,null,n,r):nl(t,e.child,n,r)}function Nl(e,t,n,r,o){n=n.render;var a=t.ref;if("ref"in r){var i={};for(var l in r)"ref"!==l&&(i[l]=r[l])}else i=r;return Co(t),r=ja(e,t,n,i,a,o),l=Ma(),null===e||Pl?(ao&&l&&to(t),t.flags|=1,Tl(e,t,r,o),t.child):(Ra(e,t,o),Xl(e,t,o))}function Ol(e,t,n,r,o){if(null===e){var a=n.type;return"function"!=typeof a||Rr(a)||void 0!==a.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Al(e,t,a,r,o))}if(a=e.child,!Ql(e,o)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:Qn)(i,r)&&e.ref===t.ref)return Xl(e,t,o)}return t.flags|=1,(e=Fr(a,r)).ref=t.ref,e.return=t,t.child=e}function Al(e,t,n,r,o){if(null!==e){var a=e.memoizedProps;if(Qn(a,r)&&e.ref===t.ref){if(Pl=!1,t.pendingProps=r=a,!Ql(e,o))return t.lanes=e.lanes,Xl(e,t,o);131072&e.flags&&(Pl=!0)}}return Dl(e,t,n,r,o)}function jl(e,t,n){var r=t.pendingProps,o=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==a?a.baseLanes|n:n,null!==e){for(o=t.child=e.child,a=0;null!==o;)a=a|o.lanes|o.childLanes,o=o.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Il(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Il(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ho(0,null!==a?a.cachePool:null),null!==a?ga(t,a):va(),ll(t)}else null!==a?(Ho(0,a.cachePool),ga(t,a),sl(),t.memoizedState=null):(null!==e&&Ho(0,null),va(),sl());return Tl(e,t,o,n),t.child}function Il(e,t,n,r){var o=$o();return o=null===o?null:{parent:Io._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Ho(0,null),va(),ll(t),null!==e&&Eo(e,t,r,!0),null}function Ll(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(i(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Dl(e,t,n,r,o){return Co(t),n=ja(e,t,n,r,void 0,o),r=Ma(),null===e||Pl?(ao&&r&&to(t),t.flags|=1,Tl(e,t,n,o),t.child):(Ra(e,t,o),Xl(e,t,o))}function Ml(e,t,n,r,o,a){return Co(t),t.updateQueue=null,n=La(t,r,n,o),Ia(e),r=Ma(),null===e||Pl?(ao&&r&&to(t),t.flags|=1,Tl(e,t,n,a),t.child):(Ra(e,t,a),Xl(e,t,a))}function Rl(e,t,n,r,o){if(Co(t),null===t.stateNode){var a=Lr,i=n.contextType;"object"==typeof i&&null!==i&&(a=Po(i)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=pl,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ra(t),i=n.contextType,a.context="object"==typeof i&&null!==i?Po(i):Lr,a.state=t.memoizedState,"function"==typeof(i=n.getDerivedStateFromProps)&&(dl(t,n,i,r),a.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(i=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&pl.enqueueReplaceState(a,a.state,null),fa(t,r,a,o),ca(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var l=t.memoizedProps,s=gl(n,l);a.props=s;var u=a.context,c=n.contextType;i=Lr,"object"==typeof c&&null!==c&&(i=Po(c));var f=n.getDerivedStateFromProps;c="function"==typeof f||"function"==typeof a.getSnapshotBeforeUpdate,l=t.pendingProps!==l,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(l||u!==i)&&ml(t,a,r,i),na=!1;var d=t.memoizedState;a.state=d,fa(t,r,a,o),ca(),u=t.memoizedState,l||d!==u||na?("function"==typeof f&&(dl(t,n,f,r),u=t.memoizedState),(s=na||hl(t,n,s,r,d,u,i))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=i,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,oa(e,t),c=gl(n,i=t.memoizedProps),a.props=c,f=t.pendingProps,d=a.context,u=n.contextType,s=Lr,"object"==typeof u&&null!==u&&(s=Po(u)),(u="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==f||d!==s)&&ml(t,a,r,s),na=!1,d=t.memoizedState,a.state=d,fa(t,r,a,o),ca();var p=t.memoizedState;i!==f||d!==p||na||null!==e&&null!==e.dependencies&&_o(e.dependencies)?("function"==typeof l&&(dl(t,n,l,r),p=t.memoizedState),(c=na||hl(t,n,c,r,d,p,s)||null!==e&&null!==e.dependencies&&_o(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,s),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,s)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=s,r=c):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Ll(e,t),r=!!(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=nl(t,e.child,null,o),t.child=nl(t,null,n,o)):Tl(e,t,n,o),t.memoizedState=a.state,e=t.child):e=Xl(e,t,o),e}function Fl(e,t,n,r){return ho(),t.flags|=256,Tl(e,t,n,r),t.child}var zl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bl(e){return{baseLanes:e,cachePool:Go()}}function Ul(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gu),e}function Vl(e,t,n){var r,o=t.pendingProps,a=!1,l=!!(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&!!(2&cl.current)),r&&(a=!0,t.flags&=-129),r=!!(32&t.flags),t.flags&=-33,null===e){if(ao){if(a?il(t):sl(),ao){var s,u=oo;if(s=u){e:{for(s=u,u=lo;8!==s.nodeType;){if(!u){u=null;break e}if(null===(s=yf(s.nextSibling))){u=null;break e}}u=s}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Qr?{id:Kr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(s=Mr(18,null,null,0)).stateNode=u,s.return=t,t.child=s,ro=t,oo=null,s=!0):s=!1}s||uo(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return vf(u)?t.lanes=32:t.lanes=536870912,null;ul(t)}return u=o.children,o=o.fallback,a?(sl(),u=Hl({mode:"hidden",children:u},a=t.mode),o=Ur(o,a,n,null),u.return=t,o.return=t,u.sibling=o,t.child=u,(a=t.child).memoizedState=Bl(n),a.childLanes=Ul(e,r,n),t.memoizedState=zl,o):(il(t),$l(t,u))}if(null!==(s=e.memoizedState)&&null!==(u=s.dehydrated)){if(l)256&t.flags?(il(t),t.flags&=-257,t=Gl(e,t,n)):null!==t.memoizedState?(sl(),t.child=e.child,t.flags|=128,t=null):(sl(),a=o.fallback,u=t.mode,o=Hl({mode:"visible",children:o.children},u),(a=Ur(a,u,n,null)).flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,nl(t,e.child,null,n),(o=t.child).memoizedState=Bl(n),o.childLanes=Ul(e,r,n),t.memoizedState=zl,t=a);else if(il(t),vf(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(o=Error(i(419))).stack="",o.digest=r,go({value:o,source:null,stack:null}),t=Gl(e,t,n)}else if(Pl||Eo(e,t,n,!1),r=!!(n&e.childLanes),Pl||r){if(null!==(r=ru)&&(0!==(o=(o=42&(o=n&-n)?1:Te(o))&(r.suspendedLanes|n)?0:o)&&o!==s.retryLane))throw s.retryLane=o,Ar(e,o),Mu(r,e,o),Cl;"$?"===u.data||Wu(),t=Gl(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=s.treeContext,oo=yf(u.nextSibling),ro=t,ao=!0,io=null,lo=!1,null!==e&&(qr[Xr++]=Kr,qr[Xr++]=Zr,qr[Xr++]=Qr,Kr=e.id,Zr=e.overflow,Qr=t),(t=$l(t,o.children)).flags|=4096);return t}return a?(sl(),a=o.fallback,u=t.mode,c=(s=e.child).sibling,(o=Fr(s,{mode:"hidden",children:o.children})).subtreeFlags=65011712&s.subtreeFlags,null!==c?a=Fr(c,a):(a=Ur(a,u,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,null===(u=e.child.memoizedState)?u=Bl(n):(null!==(s=u.cachePool)?(c=Io._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Go(),u={baseLanes:u.baseLanes|n,cachePool:s}),a.memoizedState=u,a.childLanes=Ul(e,r,n),t.memoizedState=zl,o):(il(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $l(e,t){return(t=Hl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Hl(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Gl(e,t,n){return nl(t,e.child,null,n),(e=$l(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Yl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Wl(e,t,n,r,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function ql(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(Tl(e,t,r.children,n),2&(r=cl.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Yl(e,n,t);else if(19===e.tag)Yl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(cl,r),o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===fl(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Wl(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===fl(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Wl(t,!0,n,null,a);break;case"together":Wl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pu|=t.lanes,!(n&t.childLanes)){if(null===e)return null;if(Eo(e,t,n,!1),!(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ql(e,t){return!!(e.lanes&t)||!(null===(e=e.dependencies)||!_o(e))}function Kl(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Pl=!0;else{if(!(Ql(e,n)||128&t.flags))return Pl=!1,function(e,t,n){switch(t.tag){case 3:Y(t,t.stateNode.containerInfo),wo(0,Io,e.memoizedState.cache),ho();break;case 27:case 5:q(t);break;case 4:Y(t,t.stateNode.containerInfo);break;case 10:wo(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(il(t),t.flags|=128,null):n&t.child.childLanes?Vl(e,t,n):(il(t),null!==(e=Xl(e,t,n))?e.sibling:null);il(t);break;case 19:var o=!!(128&e.flags);if((r=!!(n&t.childLanes))||(Eo(e,t,n,!1),r=!!(n&t.childLanes)),o){if(r)return ql(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),U(cl,cl.current),r)break;return null;case 22:case 23:return t.lanes=0,jl(e,t,n);case 24:wo(0,Io,e.memoizedState.cache)}return Xl(e,t,n)}(e,t,n);Pl=!!(131072&e.flags)}else Pl=!1,ao&&1048576&t.flags&&eo(t,Wr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!=typeof r){if(null!=r){if((o=r.$$typeof)===S){t.tag=11,t=Nl(null,t,r,e,n);break e}if(o===_){t.tag=14,t=Ol(null,t,r,e,n);break e}}throw t=j(r)||r,Error(i(306,t,""))}Rr(r)?(e=gl(r,e),t.tag=1,t=Rl(null,t,r,e,n)):(t.tag=0,t=Dl(null,t,r,e,n))}return t;case 0:return Dl(e,t,t.type,t.pendingProps,n);case 1:return Rl(e,t,r=t.type,o=gl(r,t.pendingProps),n);case 3:e:{if(Y(t,t.stateNode.containerInfo),null===e)throw Error(i(387));r=t.pendingProps;var a=t.memoizedState;o=a.element,oa(e,t),fa(t,r,null,n);var l=t.memoizedState;if(r=l.cache,wo(0,Io,r),r!==a.cache&&ko(t,[Io],n,!0),ca(),r=l.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:l.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Fl(e,t,r,n);break e}if(r!==o){go(o=Er(Error(i(424)),t)),t=Fl(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(oo=yf(e.firstChild),ro=t,ao=!0,io=null,lo=!0,n=rl(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ho(),r===o){t=Xl(e,t,n);break e}Tl(e,t,r,n)}t=t.child}return t;case 26:return Ll(e,t),null===e?(n=Nf(t.type,null,t.pendingProps,null))?t.memoizedState=n:ao||(n=t.type,e=t.pendingProps,(r=rf(H.current).createElement(n))[je]=t,r[Ie]=e,ef(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=Nf(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return q(t),null===e&&ao&&(r=t.stateNode=xf(t.type,t.pendingProps,H.current),ro=t,lo=!0,o=oo,hf(t.type)?(bf=o,oo=yf(r.firstChild)):oo=o),Tl(e,t,t.pendingProps.children,n),Ll(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ao&&((o=r=oo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[ze])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===a)return e}if(null===(e=yf(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,lo))?(t.stateNode=r,ro=t,oo=yf(r.firstChild),lo=!1,o=!0):o=!1),o||uo(t)),q(t),o=t.type,a=t.pendingProps,l=null!==e?e.memoizedProps:null,r=a.children,lf(o,a)?r=null:null!==l&&lf(o,l)&&(t.flags|=32),null!==t.memoizedState&&(o=ja(e,t,Da,null,null,n),Xf._currentValue=o),Ll(e,t),Tl(e,t,r,n),t.child;case 6:return null===e&&ao&&((e=n=oo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yf(e.nextSibling)))return null}return e}(n,t.pendingProps,lo))?(t.stateNode=n,ro=t,oo=null,e=!0):e=!1),e||uo(t)),null;case 13:return Vl(e,t,n);case 4:return Y(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=nl(t,null,r,n):Tl(e,t,r,n),t.child;case 11:return Nl(e,t,t.type,t.pendingProps,n);case 7:return Tl(e,t,t.pendingProps,n),t.child;case 8:case 12:return Tl(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wo(0,t.type,r.value),Tl(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Co(t),r=r(o=Po(o)),t.flags|=1,Tl(e,t,r,n),t.child;case 14:return Ol(e,t,t.type,t.pendingProps,n);case 15:return Al(e,t,t.type,t.pendingProps,n);case 19:return ql(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Hl(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return jl(e,t,n);case 24:return Co(t),r=Po(Io),null===e?(null===(o=$o())&&(o=ru,a=Lo(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:r,cache:o},ra(t),wo(0,Io,o)):(!!(e.lanes&n)&&(oa(e,t),fa(t,null,null,n),ca()),o=e.memoizedState,a=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),wo(0,Io,r)):(r=a.cache,wo(0,Io,r),r!==o.cache&&ko(t,[Io],n,!0))),Tl(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Zl(e){e.flags|=4}function Jl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!Vf(t)){if(null!==(t=ol.current)&&((4194048&au)===au?null!==al:(62914560&au)!==au&&!(536870912&au)||t!==al))throw Jo=Xo,Wo;e.flags|=8192}}function es(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ke():536870912,e.lanes|=t,vu|=t)}function ts(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ns(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rs(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ns(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xo(Io),W(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(po(t)?Zl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,mo())),ns(t),null;case 26:return n=t.memoizedState,null===e?(Zl(t),null!==n?(ns(t),Jl(t,n)):(ns(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zl(t),ns(t),Jl(t,n)):(ns(t),t.flags&=-16777217):(e.memoizedProps!==r&&Zl(t),ns(t),t.flags&=-16777217),null;case 27:X(t),n=H.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zl(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ns(t),null}e=V.current,po(t)?co(t):(e=xf(o,r,n),t.stateNode=e,Zl(t))}return ns(t),null;case 5:if(X(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zl(t);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ns(t),null}if(e=V.current,po(t))co(t);else{switch(o=rf(H.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"==typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[je]=t,e[Ie]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(ef(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zl(t)}}return ns(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Zl(t);else{if("string"!=typeof r&&null===t.stateNode)throw Error(i(166));if(e=H.current,po(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=ro))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[je]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qc(e.nodeValue,n)))||uo(t)}else(e=rf(e).createTextNode(r))[je]=t,t.stateNode=e}return ns(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=po(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[je]=t}else ho(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ns(t),o=!1}else o=mo(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(ul(t),t):(ul(t),null)}if(ul(t),128&t.flags)return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),es(t,t.updateQueue),ns(t),null;case 4:return W(),null===e&&Bc(t.stateNode.containerInfo),ns(t),null;case 10:return xo(t.type),ns(t),null;case 19:if(B(cl),null===(o=t.memoizedState))return ns(t),null;if(r=!!(128&t.flags),null===(a=o.rendering))if(r)ts(o,!1);else{if(0!==du||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=fl(e))){for(t.flags|=128,ts(o,!1),e=a.updateQueue,t.updateQueue=e,es(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return U(cl,1&cl.current|2),t.child}e=e.sibling}null!==o.tail&&te()>Su&&(t.flags|=128,r=!0,ts(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=fl(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,es(t,e),ts(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!ao)return ns(t),null}else 2*te()-o.renderingStartTime>Su&&536870912!==n&&(t.flags|=128,r=!0,ts(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=o.last)?e.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=te(),t.sibling=null,e=cl.current,U(cl,r?1&e|2:1&e),t):(ns(t),null);case 22:case 23:return ul(t),ya(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?!!(536870912&n)&&!(128&t.flags)&&(ns(t),6&t.subtreeFlags&&(t.flags|=8192)):ns(t),null!==(n=t.updateQueue)&&es(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&B(Vo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xo(Io),ns(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}function os(e,t){switch(no(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xo(Io),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 13:if(ul(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));ho()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return B(cl),null;case 4:return W(),null;case 10:return xo(t.type),null;case 22:case 23:return ul(t),ya(),null!==e&&B(Vo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xo(Io),null;default:return null}}function as(e,t){switch(no(t),t.tag){case 3:xo(Io),W();break;case 26:case 27:case 5:X(t);break;case 4:W();break;case 13:ul(t);break;case 19:B(cl);break;case 10:xo(t.type);break;case 22:case 23:ul(t),ya(),null!==e&&B(Vo);break;case 24:xo(Io)}}function is(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var a=n.create,i=n.inst;r=a(),i.destroy=r}n=n.next}while(n!==o)}}catch(e){cc(t,t.return,e)}}function ls(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var a=o.next;r=a;do{if((r.tag&e)===e){var i=r.inst,l=i.destroy;if(void 0!==l){i.destroy=void 0,o=t;var s=n,u=l;try{u()}catch(e){cc(o,s,e)}}}r=r.next}while(r!==a)}}catch(e){cc(t,t.return,e)}}function ss(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{pa(t,n)}catch(t){cc(e,e.return,t)}}}function us(e,t,n){n.props=gl(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(n){cc(e,t,n)}}function cs(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(n){cc(e,t,n)}}function fs(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(n){cc(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(n){cc(e,t,n)}else n.current=null}function ds(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(t){cc(e,e.return,t)}}function ps(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,l=null,s=null,u=null,c=null,f=null;for(h in n){var d=n[h];if(n.hasOwnProperty(h)&&null!=d)switch(h){case"checked":case"value":break;case"defaultValue":u=d;default:r.hasOwnProperty(h)||Zc(e,t,h,null,r,d)}}for(var p in r){var h=r[p];if(d=n[p],r.hasOwnProperty(p)&&(null!=h||null!=d))switch(p){case"type":a=h;break;case"name":o=h;break;case"checked":c=h;break;case"defaultChecked":f=h;break;case"value":l=h;break;case"defaultValue":s=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(i(137,t));break;default:h!==d&&Zc(e,t,p,h,r,d)}}return void gt(e,l,s,u,c,f,a,o);case"select":for(a in h=l=s=p=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":h=u;default:r.hasOwnProperty(a)||Zc(e,t,a,null,r,u)}for(o in r)if(a=r[o],u=n[o],r.hasOwnProperty(o)&&(null!=a||null!=u))switch(o){case"value":p=a;break;case"defaultValue":s=a;break;case"multiple":l=a;default:a!==u&&Zc(e,t,o,a,r,u)}return t=s,n=l,r=h,void(null!=p?bt(e,!!n,p,!1):!!r!=!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(s in h=p=null,n)if(o=n[s],n.hasOwnProperty(s)&&null!=o&&!r.hasOwnProperty(s))switch(s){case"value":case"children":break;default:Zc(e,t,s,null,r,o)}for(l in r)if(o=r[l],a=n[l],r.hasOwnProperty(l)&&(null!=o||null!=a))switch(l){case"value":p=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(i(91));break;default:o!==a&&Zc(e,t,l,o,r,a)}return void wt(e,p,h);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zc(e,t,m,null,r,p);for(u in r)if(p=r[u],h=n[u],r.hasOwnProperty(u)&&p!==h&&(null!=p||null!=h))if("selected"===u)e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p;else Zc(e,t,u,p,r,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Zc(e,t,g,null,r,p);for(c in r)if(p=r[c],h=n[c],r.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(i(137,t));break;default:Zc(e,t,c,p,r,h)}return;default:if(Ct(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&Jc(e,t,v,void 0,r,p);for(f in r)p=r[f],h=n[f],!r.hasOwnProperty(f)||p===h||void 0===p&&void 0===h||Jc(e,t,f,p,r,h);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&Zc(e,t,y,null,r,p);for(d in r)p=r[d],h=n[d],!r.hasOwnProperty(d)||p===h||null==p&&null==h||Zc(e,t,d,p,r,h)}(r,e.type,n,t),r[Ie]=t}catch(t){cc(e,e.return,t)}}function hs(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&hf(e.type)||4===e.tag}function ms(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||hs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&hf(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Kc));else if(4!==r&&(27===r&&hf(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gs(e,t,n),e=e.sibling;null!==e;)gs(e,t,n),e=e.sibling}function vs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&hf(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vs(e,t,n),e=e.sibling;null!==e;)vs(e,t,n),e=e.sibling}function ys(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);ef(t,r,n),t[je]=e,t[Ie]=n}catch(t){cc(e,e.return,t)}}var bs=!1,ws=!1,xs=!1,Ss="function"==typeof WeakSet?WeakSet:Set,ks=null;function Es(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Rs(e,n),4&r&&is(5,n);break;case 1:if(Rs(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(e){cc(n,n.return,e)}else{var o=gl(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){cc(n,n.return,e)}}64&r&&ss(n),512&r&&cs(n,n.return);break;case 3:if(Rs(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{pa(e,t)}catch(e){cc(n,n.return,e)}}break;case 27:null===t&&4&r&&ys(n);case 26:case 5:Rs(e,n),null===t&&4&r&&ds(n),512&r&&cs(n,n.return);break;case 12:Rs(e,n);break;case 13:Rs(e,n),4&r&&Os(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=hc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bs)){t=null!==t&&null!==t.memoizedState||ws,o=bs;var a=ws;bs=r,(ws=t)&&!a?zs(e,n,!!(8772&n.subtreeFlags)):Rs(e,n),bs=o,ws=a}break;case 30:break;default:Rs(e,n)}}function _s(e){var t=e.alternate;null!==t&&(e.alternate=null,_s(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cs=null,Ps=!1;function Ts(e,t,n){for(n=n.child;null!==n;)Ns(e,t,n),n=n.sibling}function Ns(e,t,n){if(fe&&"function"==typeof fe.onCommitFiberUnmount)try{fe.onCommitFiberUnmount(ce,n)}catch(e){}switch(n.tag){case 26:ws||fs(n,t),Ts(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:ws||fs(n,t);var r=Cs,o=Ps;hf(n.type)&&(Cs=n.stateNode,Ps=!1),Ts(e,t,n),Sf(n.stateNode),Cs=r,Ps=o;break;case 5:ws||fs(n,t);case 6:if(r=Cs,o=Ps,Cs=null,Ts(e,t,n),Ps=o,null!==(Cs=r))if(Ps)try{(9===Cs.nodeType?Cs.body:"HTML"===Cs.nodeName?Cs.ownerDocument.body:Cs).removeChild(n.stateNode)}catch(e){cc(n,t,e)}else try{Cs.removeChild(n.stateNode)}catch(e){cc(n,t,e)}break;case 18:null!==Cs&&(Ps?(mf(9===(e=Cs).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Td(e)):mf(Cs,n.stateNode));break;case 4:r=Cs,o=Ps,Cs=n.stateNode.containerInfo,Ps=!0,Ts(e,t,n),Cs=r,Ps=o;break;case 0:case 11:case 14:case 15:ws||ls(2,n,t),ws||ls(4,n,t),Ts(e,t,n);break;case 1:ws||(fs(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&us(n,t,r)),Ts(e,t,n);break;case 21:Ts(e,t,n);break;case 22:ws=(r=ws)||null!==n.memoizedState,Ts(e,t,n),ws=r;break;default:Ts(e,t,n)}}function Os(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Td(e)}catch(e){cc(t,t.return,e)}}function As(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Ss),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Ss),t;default:throw Error(i(435,e.tag))}}(e);t.forEach((function(t){var r=mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function js(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],a=e,l=t,s=l;e:for(;null!==s;){switch(s.tag){case 27:if(hf(s.type)){Cs=s.stateNode,Ps=!1;break e}break;case 5:Cs=s.stateNode,Ps=!1;break e;case 3:case 4:Cs=s.stateNode.containerInfo,Ps=!0;break e}s=s.return}if(null===Cs)throw Error(i(160));Ns(a,l,o),Cs=null,Ps=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ls(t,e),t=t.sibling}var Is=null;function Ls(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:js(t,e),Ds(e),4&r&&(ls(3,e,e.return),is(3,e),ls(5,e,e.return));break;case 1:js(t,e),Ds(e),512&r&&(ws||null===n||fs(n,n.return)),64&r&&bs&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Is;if(js(t,e),Ds(e),512&r&&(ws||null===n||fs(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(a=o.getElementsByTagName("title")[0])||a[ze]||a[je]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(r),o.head.insertBefore(a,o.querySelector("head > title"))),ef(a,r,n),a[je]=e,Ge(a),r=a;break e;case"link":var l=Bf("link","href",o).get(r+(n.href||""));if(l)for(var s=0;s<l.length;s++)if((a=l[s]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){l.splice(s,1);break t}ef(a=o.createElement(r),r,n),o.head.appendChild(a);break;case"meta":if(l=Bf("meta","content",o).get(r+(n.content||"")))for(s=0;s<l.length;s++)if((a=l[s]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){l.splice(s,1);break t}ef(a=o.createElement(r),r,n),o.head.appendChild(a);break;default:throw Error(i(468,r))}a[je]=e,Ge(a),r=a}e.stateNode=r}else Uf(o,e.type,e.stateNode);else e.stateNode=Df(o,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?Uf(o,e.type,e.stateNode):Df(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ps(e,e.memoizedProps,n.memoizedProps)}break;case 27:js(t,e),Ds(e),512&r&&(ws||null===n||fs(n,n.return)),null!==n&&4&r&&ps(e,e.memoizedProps,n.memoizedProps);break;case 5:if(js(t,e),Ds(e),512&r&&(ws||null===n||fs(n,n.return)),32&e.flags){o=e.stateNode;try{St(o,"")}catch(t){cc(e,e.return,t)}}4&r&&null!=e.stateNode&&ps(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(xs=!0);break;case 6:if(js(t,e),Ds(e),4&r){if(null===e.stateNode)throw Error(i(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(t){cc(e,e.return,t)}}break;case 3:if(zf=null,o=Is,Is=_f(t.containerInfo),js(t,e),Is=o,Ds(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Td(t.containerInfo)}catch(t){cc(e,e.return,t)}xs&&(xs=!1,Ms(e));break;case 4:r=Is,Is=_f(e.stateNode.containerInfo),js(t,e),Ds(e),Is=r;break;case 12:default:js(t,e),Ds(e);break;case 13:js(t,e),Ds(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(xu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,As(e,r)));break;case 22:o=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=bs,f=ws;if(bs=c||o,ws=f||u,js(t,e),ws=f,bs=c,Ds(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||u||bs||ws||Fs(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,o)"function"==typeof(l=a.style).setProperty?l.setProperty("display","none","important"):l.display="none";else{s=u.stateNode;var d=u.memoizedProps.style,p=null!=d&&d.hasOwnProperty("display")?d.display:null;s.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(e){cc(u,u.return,e)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(e){cc(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,As(e,n))));break;case 19:js(t,e),Ds(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,As(e,r)));case 30:case 21:}}function Ds(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(hs(r)){n=r;break}r=r.return}if(null==n)throw Error(i(160));switch(n.tag){case 27:var o=n.stateNode;vs(e,ms(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(St(a,""),n.flags&=-33),vs(e,ms(e),a);break;case 3:case 4:var l=n.stateNode.containerInfo;gs(e,ms(e),l);break;default:throw Error(i(161))}}catch(t){cc(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ms(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ms(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Rs(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Es(e,t.alternate,t),t=t.sibling}function Fs(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ls(4,t,t.return),Fs(t);break;case 1:fs(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&us(t,t.return,n),Fs(t);break;case 27:Sf(t.stateNode);case 26:case 5:fs(t,t.return),Fs(t);break;case 22:null===t.memoizedState&&Fs(t);break;default:Fs(t)}e=e.sibling}}function zs(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:zs(o,a,n),is(4,a);break;case 1:if(zs(o,a,n),"function"==typeof(o=(r=a).stateNode).componentDidMount)try{o.componentDidMount()}catch(e){cc(r,r.return,e)}if(null!==(o=(r=a).updateQueue)){var l=r.stateNode;try{var s=o.shared.hiddenCallbacks;if(null!==s)for(o.shared.hiddenCallbacks=null,o=0;o<s.length;o++)da(s[o],l)}catch(e){cc(r,r.return,e)}}n&&64&i&&ss(a),cs(a,a.return);break;case 27:ys(a);case 26:case 5:zs(o,a,n),n&&null===r&&4&i&&ds(a),cs(a,a.return);break;case 12:zs(o,a,n);break;case 13:zs(o,a,n),n&&4&i&&Os(o,a);break;case 22:null===a.memoizedState&&zs(o,a,n),cs(a,a.return);break;case 30:break;default:zs(o,a,n)}t=t.sibling}}function Bs(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Do(n))}function Us(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Do(e))}function Vs(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)$s(e,t,n,r),t=t.sibling}function $s(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Vs(e,t,n,r),2048&o&&is(9,t);break;case 1:case 13:default:Vs(e,t,n,r);break;case 3:Vs(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Do(e)));break;case 12:if(2048&o){Vs(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,l=a.onPostCommit;"function"==typeof l&&l(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){cc(t,t.return,e)}}else Vs(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?Vs(e,t,n,r):Gs(e,t):2&a._visibility?Vs(e,t,n,r):(a._visibility|=2,Hs(e,t,n,r,!!(10256&t.subtreeFlags))),2048&o&&Bs(i,t);break;case 24:Vs(e,t,n,r),2048&o&&Us(t.alternate,t)}}function Hs(e,t,n,r,o){for(o=o&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,i=t,l=n,s=r,u=i.flags;switch(i.tag){case 0:case 11:case 15:Hs(a,i,l,s,o),is(8,i);break;case 23:break;case 22:var c=i.stateNode;null!==i.memoizedState?2&c._visibility?Hs(a,i,l,s,o):Gs(a,i):(c._visibility|=2,Hs(a,i,l,s,o)),o&&2048&u&&Bs(i.alternate,i);break;case 24:Hs(a,i,l,s,o),o&&2048&u&&Us(i.alternate,i);break;default:Hs(a,i,l,s,o)}t=t.sibling}}function Gs(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:Gs(n,r),2048&o&&Bs(r.alternate,r);break;case 24:Gs(n,r),2048&o&&Us(r.alternate,r);break;default:Gs(n,r)}t=t.sibling}}var Ys=8192;function Ws(e){if(e.subtreeFlags&Ys)for(e=e.child;null!==e;)qs(e),e=e.sibling}function qs(e){switch(e.tag){case 26:Ws(e),e.flags&Ys&&null!==e.memoizedState&&function(e,t,n){if(null===$f)throw Error(i(475));var r=$f;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=Of(n.href),a=e.querySelector(Af(o));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(r.count++,r=Gf.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,void Ge(a);a=e.ownerDocument||e,n=jf(n),(o=kf.get(o))&&Rf(n,o),Ge(a=a.createElement("link"));var l=a;l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),ef(a,"link",n),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(r.count++,t=Gf.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Is,e.memoizedState,e.memoizedProps);break;case 5:default:Ws(e);break;case 3:case 4:var t=Is;Is=_f(e.stateNode.containerInfo),Ws(e),Is=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ys,Ys=16777216,Ws(e),Ys=t):Ws(e))}}function Xs(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Qs(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];ks=r,Js(r,e)}Xs(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ks(e),e=e.sibling}function Ks(e){switch(e.tag){case 0:case 11:case 15:Qs(e),2048&e.flags&&ls(9,e,e.return);break;case 3:case 12:default:Qs(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zs(e)):Qs(e)}}function Zs(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];ks=r,Js(r,e)}Xs(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ls(8,t,t.return),Zs(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zs(t));break;default:Zs(t)}e=e.sibling}}function Js(e,t){for(;null!==ks;){var n=ks;switch(n.tag){case 0:case 11:case 15:ls(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Do(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,ks=r;else e:for(n=e;null!==ks;){var o=(r=ks).sibling,a=r.return;if(_s(r),r===n){ks=null;break e}if(null!==o){o.return=a,ks=o;break e}ks=a}}}var eu={getCacheForType:function(e){var t=Po(Io),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tu="function"==typeof WeakMap?WeakMap:Map,nu=0,ru=null,ou=null,au=0,iu=0,lu=null,su=!1,uu=!1,cu=!1,fu=0,du=0,pu=0,hu=0,mu=0,gu=0,vu=0,yu=null,bu=null,wu=!1,xu=0,Su=1/0,ku=null,Eu=null,_u=0,Cu=null,Pu=null,Tu=0,Nu=0,Ou=null,Au=null,ju=0,Iu=null;function Lu(){if(2&nu&&0!==au)return au&-au;if(null!==L.T){return 0!==Fo?Fo:Nc()}return Oe()}function Du(){0===gu&&(gu=536870912&au&&!ao?536870912:Se());var e=ol.current;return null!==e&&(e.flags|=32),gu}function Mu(e,t,n){(e!==ru||2!==iu&&9!==iu)&&null===e.cancelPendingCommit||($u(e,0),Bu(e,au,gu,!1)),_e(e,n),2&nu&&e===ru||(e===ru&&(!(2&nu)&&(hu|=n),4===du&&Bu(e,au,gu,!1)),Sc(e))}function Ru(e,t,n){if(6&nu)throw Error(i(327));for(var r=!n&&!(124&t)&&!(t&e.expiredLanes)||we(e,t),o=r?function(e,t){var n=nu;nu|=2;var r=Gu(),o=Yu();ru!==e||au!==t?(ku=null,Su=te()+500,$u(e,t)):uu=we(e,t);e:for(;;)try{if(0!==iu&&null!==ou){t=ou;var a=lu;t:switch(iu){case 1:iu=0,lu=null,Ju(e,t,a,1);break;case 2:case 9:if(Qo(a)){iu=0,lu=null,Zu(t);break}t=function(){2!==iu&&9!==iu||ru!==e||(iu=7),Sc(e)},a.then(t,t);break e;case 3:iu=7;break e;case 4:iu=5;break e;case 7:Qo(a)?(iu=0,lu=null,Zu(t)):(iu=0,lu=null,Ju(e,t,a,7));break;case 5:var l=null;switch(ou.tag){case 26:l=ou.memoizedState;case 5:case 27:var s=ou;if(!l||Vf(l)){iu=0,lu=null;var u=s.sibling;if(null!==u)ou=u;else{var c=s.return;null!==c?(ou=c,ec(c)):ou=null}break t}}iu=0,lu=null,Ju(e,t,a,5);break;case 6:iu=0,lu=null,Ju(e,t,a,6);break;case 8:Vu(),du=6;break e;default:throw Error(i(462))}}Qu();break}catch(t){Hu(e,t)}return bo=yo=null,L.H=r,L.A=o,nu=n,null!==ou?0:(ru=null,au=0,Tr(),du)}(e,t):qu(e,t,!0),a=r;;){if(0===o){uu&&!r&&Bu(e,t,0,!1);break}if(n=e.current.alternate,!a||zu(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var l=0;else l=0!==(l=-536870913&e.pendingLanes)?l:536870912&l?536870912:0;if(0!==l){t=l;e:{var s=e;o=yu;var u=s.current.memoizedState.isDehydrated;if(u&&($u(s,l).flags|=256),2!==(l=qu(s,l,!1))){if(cu&&!u){s.errorRecoveryDisabledLanes|=a,hu|=a,o=4;break e}a=bu,bu=o,null!==a&&(null===bu?bu=a:bu.push.apply(bu,a))}o=l}if(a=!1,2!==o)continue}}if(1===o){$u(e,0),Bu(e,t,0,!0);break}e:{switch(r=e,a=o){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:Bu(r,t,gu,!su);break e;case 2:bu=null;break;case 3:case 5:break;default:throw Error(i(329))}if((62914560&t)===t&&10<(o=xu+300-te())){if(Bu(r,t,gu,!su),0!==be(r,0,!0))break e;r.timeoutHandle=uf(Fu.bind(null,r,n,bu,ku,wu,t,gu,hu,vu,su,a,2,-0,0),o)}else Fu(r,n,bu,ku,wu,t,gu,hu,vu,su,a,0,-0,0)}break}o=qu(e,t,!1),a=!1}Sc(e)}function Fu(e,t,n,r,o,a,l,s,u,c,f,d,p,h){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||!(16785408&~d))&&($f={stylesheets:null,count:0,unsuspend:Hf},qs(t),null!==(d=function(){if(null===$f)throw Error(i(475));var e=$f;return e.stylesheets&&0===e.count&&Wf(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Wf(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nc.bind(null,e,t,a,n,r,o,l,s,u,f,1,p,h)),void Bu(e,a,l,!c);nc(e,t,a,n,r,o,l,s,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Xn(a(),o))return!1}catch(e){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,n,r){t&=~mu,t&=~hu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var a=31-pe(o),i=1<<a;r[a]=-1,o&=~i}0!==n&&Ce(e,n,t)}function Uu(){return!!(6&nu)||(kc(0,!1),!1)}function Vu(){if(null!==ou){if(0===iu)var e=ou.return;else bo=yo=null,Fa(e=ou),Xi=null,Qi=0,e=ou;for(;null!==e;)as(e.alternate,e),e=e.return;ou=null}}function $u(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cf(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vu(),ru=e,ou=n=Fr(e.current,null),au=t,iu=0,lu=null,su=!1,uu=we(e,t),cu=!1,vu=gu=mu=hu=pu=du=0,bu=yu=null,wu=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-pe(r),a=1<<o;t|=e[o],r&=~a}return fu=t,Tr(),n}function Hu(e,t){wa=null,L.H=Gi,t===Yo||t===qo?(t=ea(),iu=3):t===Wo?(t=ea(),iu=4):iu=t===Cl?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,lu=t,null===ou&&(du=1,xl(e,Er(t,e.current)))}function Gu(){var e=L.H;return L.H=Gi,null===e?Gi:e}function Yu(){var e=L.A;return L.A=eu,e}function Wu(){du=4,su||(4194048&au)!==au&&null!==ol.current||(uu=!0),!(134217727&pu)&&!(134217727&hu)||null===ru||Bu(ru,au,gu,!1)}function qu(e,t,n){var r=nu;nu|=2;var o=Gu(),a=Yu();ru===e&&au===t||(ku=null,$u(e,t)),t=!1;var i=du;e:for(;;)try{if(0!==iu&&null!==ou){var l=ou,s=lu;switch(iu){case 8:Vu(),i=6;break e;case 3:case 2:case 9:case 6:null===ol.current&&(t=!0);var u=iu;if(iu=0,lu=null,Ju(e,l,s,u),n&&uu){i=0;break e}break;default:u=iu,iu=0,lu=null,Ju(e,l,s,u)}}Xu(),i=du;break}catch(t){Hu(e,t)}return t&&e.shellSuspendCounter++,bo=yo=null,nu=r,L.H=o,L.A=a,null===ou&&(ru=null,au=0,Tr()),i}function Xu(){for(;null!==ou;)Ku(ou)}function Qu(){for(;null!==ou&&!J();)Ku(ou)}function Ku(e){var t=Kl(e.alternate,e,fu);e.memoizedProps=e.pendingProps,null===t?ec(e):ou=t}function Zu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ml(n,t,t.pendingProps,t.type,void 0,au);break;case 11:t=Ml(n,t,t.pendingProps,t.type.render,t.ref,au);break;case 5:Fa(t);default:as(n,t),t=Kl(n,t=ou=zr(t,fu),fu)}e.memoizedProps=e.pendingProps,null===t?ec(e):ou=t}function Ju(e,t,n,r){bo=yo=null,Fa(t),Xi=null,Qi=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"==typeof r&&"function"==typeof r.then){if(null!==(t=n.alternate)&&Eo(t,n,o,!0),null!==(n=ol.current)){switch(n.tag){case 13:return null===al?Wu():null===n.alternate&&0===du&&(du=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===Xo?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),fc(e,r,o)),!1;case 22:return n.flags|=65536,r===Xo?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),fc(e,r,o)),!1}throw Error(i(435,n.tag))}return fc(e,r,o),Wu(),!1}if(ao)return null!==(t=ol.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==so&&go(Er(e=Error(i(422),{cause:r}),n))):(r!==so&&go(Er(t=Error(i(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=Er(r,n),sa(e,o=kl(e.stateNode,r,o)),4!==du&&(du=2)),!1;var a=Error(i(520),{cause:r});if(a=Er(a,n),null===yu?yu=[a]:yu.push(a),4!==du&&(du=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,sa(n,e=kl(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Eu&&Eu.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,_l(o=El(o),e,n,r),sa(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,au))return du=1,xl(e,Er(n,e.current)),void(ou=null)}catch(t){if(null!==o)throw ou=o,t;return du=1,xl(e,Er(n,e.current)),void(ou=null)}32768&t.flags?(ao||1===r?e=!0:uu||536870912&au?e=!1:(su=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ol.current)&&13===r.tag&&(r.flags|=16384))),tc(t,e)):ec(t)}function ec(e){var t=e;do{if(32768&t.flags)return void tc(t,su);e=t.return;var n=rs(t.alternate,t,fu);if(null!==n)return void(ou=n);if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===du&&(du=5)}function tc(e,t){do{var n=os(e.alternate,e);if(null!==n)return n.flags&=32767,void(ou=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ou=e);ou=e=n}while(null!==e);du=6,ou=null}function nc(e,t,n,r,o,a,l,s,u){e.cancelPendingCommit=null;do{lc()}while(0!==_u);if(6&nu)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,o,a){var i=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var l=e.entanglements,s=e.expirationTimes,u=e.hiddenUpdates;for(n=i&~n;0<n;){var c=31-pe(n),f=1<<c;l[c]=0,s[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var p=d[c];null!==p&&(p.lane&=-536870913)}n&=~f}0!==r&&Ce(e,r,0),0!==a&&0===o&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,n,a|=Pr,l,s,u),e===ru&&(ou=ru=null,au=0),Pu=t,Cu=e,Tu=n,Nu=a,Ou=o,Au=r,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,K(ae,(function(){return sc(),null}))):(e.callbackNode=null,e.callbackPriority=0),r=!!(13878&t.flags),13878&t.subtreeFlags||r){r=L.T,L.T=null,o=D.p,D.p=2,l=nu,nu|=4;try{!function(e,t){if(e=e.containerInfo,tf=rd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var l=0,s=-1,u=-1,c=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||0!==o&&3!==d.nodeType||(s=l+o),d!==a||0!==r&&3!==d.nodeType||(u=l+r),3===d.nodeType&&(l+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++c===o&&(s=l),p===a&&++f===r&&(u=l),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}n=-1===s||-1===u?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(nf={focusedElem:e,selectionRange:n},rd=!1,ks=t;null!==ks;)if(e=(t=ks).child,1024&t.subtreeFlags&&null!==e)e.return=t,ks=e;else for(;null!==ks;){switch(a=(t=ks).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=gl(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(e){cc(n,n.return,e)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))gf(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gf(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(i(163))}if(null!==(e=t.sibling)){e.return=t.return,ks=e;break}ks=t.return}}(e,t)}finally{nu=l,D.p=o,L.T=r}}_u=1,rc(),oc(),ac()}}function rc(){if(1===_u){_u=0;var e=Cu,t=Pu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=L.T,L.T=null;var r=D.p;D.p=2;var o=nu;nu|=4;try{Ls(t,e);var a=nf,i=er(e.containerInfo),l=a.focusedElem,s=a.selectionRange;if(i!==l&&l&&l.ownerDocument&&Jn(l.ownerDocument.documentElement,l)){if(null!==s&&tr(l)){var u=s.start,c=s.end;if(void 0===c&&(c=u),"selectionStart"in l)l.selectionStart=u,l.selectionEnd=Math.min(c,l.value.length);else{var f=l.ownerDocument||document,d=f&&f.defaultView||window;if(d.getSelection){var p=d.getSelection(),h=l.textContent.length,m=Math.min(s.start,h),g=void 0===s.end?m:Math.min(s.end,h);!p.extend&&m>g&&(i=g,g=m,m=i);var v=Zn(l,m),y=Zn(l,g);if(v&&y&&(1!==p.rangeCount||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=f.createRange();b.setStart(v.node,v.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(f=[],p=l;p=p.parentNode;)1===p.nodeType&&f.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof l.focus&&l.focus(),l=0;l<f.length;l++){var w=f[l];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rd=!!tf,nf=tf=null}finally{nu=o,D.p=r,L.T=n}}e.current=t,_u=2}}function oc(){if(2===_u){_u=0;var e=Cu,t=Pu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=L.T,L.T=null;var r=D.p;D.p=2;var o=nu;nu|=4;try{Es(e,t.alternate,t)}finally{nu=o,D.p=r,L.T=n}}_u=3}}function ac(){if(4===_u||3===_u){_u=0,ee();var e=Cu,t=Pu,n=Tu,r=Au;10256&t.subtreeFlags||10256&t.flags?_u=5:(_u=0,Pu=Cu=null,ic(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Eu=null),Ne(n),t=t.stateNode,fe&&"function"==typeof fe.onCommitFiberRoot)try{fe.onCommitFiberRoot(ce,t,void 0,!(128&~t.current.flags))}catch(e){}if(null!==r){t=L.T,o=D.p,D.p=2,L.T=null;try{for(var a=e.onRecoverableError,i=0;i<r.length;i++){var l=r[i];a(l.value,{componentStack:l.stack})}}finally{L.T=t,D.p=o}}3&Tu&&lc(),Sc(e),o=e.pendingLanes,4194090&n&&42&o?e===Iu?ju++:(ju=0,Iu=e):ju=0,kc(0,!1)}}function ic(e,t){0==(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Do(t)))}function lc(e){return rc(),oc(),ac(),sc()}function sc(){if(5!==_u)return!1;var e=Cu,t=Nu;Nu=0;var n=Ne(Tu),r=L.T,o=D.p;try{D.p=32>n?32:n,L.T=null,n=Ou,Ou=null;var a=Cu,l=Tu;if(_u=0,Pu=Cu=null,Tu=0,6&nu)throw Error(i(331));var s=nu;if(nu|=4,Ks(a.current),$s(a,a.current,l,n),nu=s,kc(0,!1),fe&&"function"==typeof fe.onPostCommitFiberRoot)try{fe.onPostCommitFiberRoot(ce,a)}catch(e){}return!0}finally{D.p=o,L.T=r,ic(e,t)}}function uc(e,t,n){t=Er(n,t),null!==(e=ia(e,t=kl(e.stateNode,t,2),2))&&(_e(e,2),Sc(e))}function cc(e,t,n){if(3===e.tag)uc(e,e,n);else for(;null!==t;){if(3===t.tag){uc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Er(n,e),null!==(r=ia(t,n=El(2),2))&&(_l(n,r,t,e),_e(r,2),Sc(r));break}}t=t.return}}function fc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tu;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(cu=!0,o.add(n),e=dc.bind(null,e,t,n),t.then(e,e))}function dc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ru===e&&(au&n)===n&&(4===du||3===du&&(62914560&au)===au&&300>te()-xu?!(2&nu)&&$u(e,0):mu|=n,vu===au&&(vu=0)),Sc(e)}function pc(e,t){0===t&&(t=ke()),null!==(e=Ar(e,t))&&(_e(e,t),Sc(e))}function hc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pc(e,n)}function mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==r&&r.delete(t),pc(e,n)}var gc=null,vc=null,yc=!1,bc=!1,wc=!1,xc=0;function Sc(e){e!==vc&&null===e.next&&(null===vc?gc=vc=e:vc=vc.next=e),bc=!0,yc||(yc=!0,df((function(){6&nu?K(re,Ec):_c()})))}function kc(e,t){if(!wc&&bc){wc=!0;do{for(var n=!1,r=gc;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var a=0;else{var i=r.suspendedLanes,l=r.pingedLanes;a=(1<<31-pe(42|e)+1)-1,a=201326741&(a&=o&~(i&~l))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Tc(r,a))}else a=au,!(3&(a=be(r,r===ru?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,a)||(n=!0,Tc(r,a));r=r.next}}while(n);wc=!1}}function Ec(){_c()}function _c(){bc=yc=!1;var e=0;0!==xc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sf&&(sf=e,!0);return sf=null,!1}()&&(e=xc),xc=0);for(var t=te(),n=null,r=gc;null!==r;){var o=r.next,a=Cc(r,t);0===a?(r.next=null,null===n?gc=o:n.next=o,null===o&&(vc=n)):(n=r,(0!==e||3&a)&&(bc=!0)),r=o}kc(e,!1)}function Cc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-pe(a),l=1<<i,s=o[i];-1===s?l&n&&!(l&r)||(o[i]=xe(l,t)):s<=t&&(e.expiredLanes|=l),a&=~l}if(n=au,n=be(e,e===(t=ru)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===iu||9===iu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Z(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Z(r),Ne(n)){case 2:case 8:n=oe;break;case 32:default:n=ae;break;case 268435456:n=le}return r=Pc.bind(null,e),n=K(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Z(r),e.callbackPriority=2,e.callbackNode=null,2}function Pc(e,t){if(0!==_u&&5!==_u)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lc()&&e.callbackNode!==n)return null;var r=au;return 0===(r=be(e,e===ru?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Ru(e,r,t),Cc(e,te()),null!=e.callbackNode&&e.callbackNode===n?Pc.bind(null,e):null)}function Tc(e,t){if(lc())return null;Ru(e,t,!0)}function Nc(){return 0===xc&&(xc=Se()),xc}function Oc(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Nt(""+e)}function Ac(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var jc=0;jc<xr.length;jc++){var Ic=xr[jc];Sr(Ic.toLowerCase(),"on"+(Ic[0].toUpperCase()+Ic.slice(1)))}Sr(pr,"onAnimationEnd"),Sr(hr,"onAnimationIteration"),Sr(mr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(gr,"onTransitionRun"),Sr(vr,"onTransitionStart"),Sr(yr,"onTransitionCancel"),Sr(br,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lc));function Mc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],s=l.instance,u=l.currentTarget;if(l=l.listener,s!==a&&o.isPropagationStopped())break e;a=l,o.currentTarget=u;try{a(o)}catch(e){vl(e)}o.currentTarget=null,a=s}else for(i=0;i<r.length;i++){if(s=(l=r[i]).instance,u=l.currentTarget,l=l.listener,s!==a&&o.isPropagationStopped())break e;a=l,o.currentTarget=u;try{a(o)}catch(e){vl(e)}o.currentTarget=null,a=s}}}}function Rc(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Uc(t,e,2,!1),n.add(r))}function Fc(e,t,n){var r=0;t&&(r|=4),Uc(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[zc]){e[zc]=!0,Ye.forEach((function(t){"selectionchange"!==t&&(Dc.has(t)||Fc(t,!1,e),Fc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,Fc("selectionchange",!1,t))}}function Uc(e,t,n,r){switch(cd(t)){case 2:var o=od;break;case 8:o=ad;break;default:o=id}n=o.bind(null,t,n,e),o=void 0,!zt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Vc(e,t,n,r,o){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===o)break;if(4===i)for(i=r.return;null!==i;){var u=i.tag;if((3===u||4===u)&&i.stateNode.containerInfo===o)return;i=i.return}for(;null!==l;){if(null===(i=Ue(l)))return;if(5===(u=i.tag)||6===u||26===u||27===u){r=a=i;continue e}l=l.parentNode}}r=r.return}Mt((function(){var r=a,o=At(n),i=[];e:{var l=wr.get(e);if(void 0!==l){var u=Jt,c=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":u=mn;break;case"focusin":c="focus",u=an;break;case"focusout":c="blur",u=an;break;case"beforeblur":case"afterblur":u=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=vn;break;case pr:case hr:case mr:u=ln;break;case br:u=yn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=gn;break;case"toggle":case"beforetoggle":u=wn}var f=!!(4&t),d=!f&&("scroll"===e||"scrollend"===e),p=f?null!==l?l+"Capture":null:l;f=[];for(var h,m=r;null!==m;){var g=m;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===p||null!=(g=Rt(m,p))&&f.push($c(m,g,h)),d)break;m=m.return}0<f.length&&(l=new u(l,c,null,n,o),i.push({event:l,listeners:f}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===Ot||!(c=n.relatedTarget||n.fromElement)||!Ue(c)&&!c[Le])&&(u||l)&&(l=o.window===o?o:(l=o.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ue(c):null)&&(d=s(c),f=c.tag,c!==d||5!==f&&27!==f&&6!==f)&&(c=null)):(u=null,c=r),u!==c)){if(f=rn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(f=gn,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==u?l:$e(u),h=null==c?l:$e(c),(l=new f(g,m+"leave",u,n,o)).target=d,l.relatedTarget=h,g=null,Ue(o)===r&&((f=new f(p,m+"enter",c,n,o)).target=h,f.relatedTarget=d,g=f),d=g,u&&c)e:{for(p=c,m=0,h=f=u;h;h=Gc(h))m++;for(h=0,g=p;g;g=Gc(g))h++;for(;0<m-h;)f=Gc(f),m--;for(;0<h-m;)p=Gc(p),h--;for(;m--;){if(f===p||null!==p&&f===p.alternate)break e;f=Gc(f),p=Gc(p)}f=null}else f=null;null!==u&&Yc(i,l,u,f,!1),null!==c&&null!==d&&Yc(i,d,c,f,!0)}if("select"===(u=(l=r?$e(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var v=Fn;else if(jn(l))if(zn)v=qn;else{v=Yn;var y=Gn}else!(u=l.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&Ct(r.elementType)&&(v=Fn):v=Wn;switch(v&&(v=v(e,r))?In(i,v,n,o):(y&&y(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&yt(l,"number",l.value)),y=r?$e(r):window,e){case"focusin":(jn(y)||"true"===y.contentEditable)&&(rr=y,or=r,ar=null);break;case"focusout":ar=or=rr=null;break;case"mousedown":ir=!0;break;case"contextmenu":case"mouseup":case"dragend":ir=!1,lr(i,n,o);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":lr(i,n,o)}var b;if(Sn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else On?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(_n&&"ko"!==n.locale&&(On||"onCompositionStart"!==w?"onCompositionEnd"===w&&On&&(b=Ht()):(Vt="value"in(Ut=o)?Ut.value:Ut.textContent,On=!0)),0<(y=Hc(r,w)).length&&(w=new un(w,e,null,n,o),i.push({event:w,listeners:y}),b?w.data=b:null!==(b=Nn(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return Nn(t);case"keypress":return 32!==t.which?null:(Pn=!0,Cn);case"textInput":return(e=t.data)===Cn&&Pn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Sn&&Tn(e,t)?(e=Ht(),$t=Vt=Ut=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Hc(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,o),i.push({event:y,listeners:w}),y.data=b)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var a=Oc((o[Ie]||null).action),i=r.submitter;i&&null!==(t=(t=i[Ie]||null)?Oc(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var l=new Jt("action","action",null,r,o);e.push({event:l,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xc){var e=i?Ac(o,i):new FormData(o);Ai(n,{pending:!0,data:e,method:o.method,action:a},null,e)}}else"function"==typeof a&&(l.preventDefault(),e=i?Ac(o,i):new FormData(o),Ai(n,{pending:!0,data:e,method:o.method,action:a},a,e))},currentTarget:o}]})}}(i,e,r,n,o)}Mc(i,t)}))}function $c(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hc(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,a=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===a||(null!=(o=Rt(e,n))&&r.unshift($c(e,o,a)),null!=(o=Rt(e,t))&&r.push($c(e,o,a))),3===e.tag)return r;e=e.return}return[]}function Gc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Yc(e,t,n,r,o){for(var a=t._reactName,i=[];null!==n&&n!==r;){var l=n,s=l.alternate,u=l.stateNode;if(l=l.tag,null!==s&&s===r)break;5!==l&&26!==l&&27!==l||null===u||(s=u,o?null!=(u=Rt(n,a))&&i.unshift($c(n,u,s)):o||null!=(u=Rt(n,a))&&i.push($c(n,u,s))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Wc=/\r\n?/g,qc=/\u0000|\uFFFD/g;function Xc(e){return("string"==typeof e?e:""+e).replace(Wc,"\n").replace(qc,"")}function Qc(e,t){return t=Xc(t),Xc(e)===t}function Kc(){}function Zc(e,t,n,r,o,a){switch(n){case"children":"string"==typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"==typeof r||"bigint"==typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,a);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"==typeof r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"==typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&Zc(e,t,"name",o.name,o,null),Zc(e,t,"formEncType",o.formEncType,o,null),Zc(e,t,"formMethod",o.formMethod,o,null),Zc(e,t,"formTarget",o.formTarget,o,null)):(Zc(e,t,"encType",o.encType,o,null),Zc(e,t,"method",o.method,o,null),Zc(e,t,"target",o.target,o,null))),null==r||"symbol"==typeof r||"boolean"==typeof r){e.removeAttribute(n);break}r=Nt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Kc);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(i(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"muted":e.muted=r&&"function"!=typeof r&&"symbol"!=typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"==typeof r||"boolean"==typeof r||"symbol"==typeof r){e.removeAttribute("xlink:href");break}n=Nt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!=typeof r&&"symbol"!=typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!=typeof r&&"symbol"!=typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"==typeof r||"symbol"==typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Rc("beforetoggle",e),Rc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Pt.get(n)||n,r)}}function Jc(e,t,n,r,o,a){switch(n){case"style":_t(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!=typeof r||!("__html"in r))throw Error(i(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(i(60));e.innerHTML=n}}break;case"children":"string"==typeof r?St(e,r):("number"==typeof r||"bigint"==typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Rc("scroll",e);break;case"onScrollEnd":null!=r&&Rc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(a=null!=(a=e[Ie]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!=typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function ef(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rc("error",e),Rc("load",e);var r,o=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(null!=l)switch(r){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zc(e,t,r,l,n,null)}}return a&&Zc(e,t,"srcSet",n.srcSet,n,null),void(o&&Zc(e,t,"src",n.src,n,null));case"input":Rc("invalid",e);var s=r=l=a=null,u=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var f=n[o];if(null!=f)switch(o){case"name":a=f;break;case"type":l=f;break;case"checked":u=f;break;case"defaultChecked":c=f;break;case"value":r=f;break;case"defaultValue":s=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(i(137,t));break;default:Zc(e,t,o,f,n,null)}}return vt(e,r,s,u,c,l,a,!1),void ft(e);case"select":for(a in Rc("invalid",e),o=l=r=null,n)if(n.hasOwnProperty(a)&&null!=(s=n[a]))switch(a){case"value":r=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:Zc(e,t,a,s,n,null)}return t=r,n=l,e.multiple=!!o,void(null!=t?bt(e,!!o,t,!1):null!=n&&bt(e,!!o,n,!0));case"textarea":for(l in Rc("invalid",e),r=a=o=null,n)if(n.hasOwnProperty(l)&&null!=(s=n[l]))switch(l){case"value":o=s;break;case"defaultValue":a=s;break;case"children":r=s;break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(i(91));break;default:Zc(e,t,l,s,n,null)}return xt(e,o,a,r),void ft(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))if("selected"===u)e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else Zc(e,t,u,o,n,null);return;case"dialog":Rc("beforetoggle",e),Rc("toggle",e),Rc("cancel",e),Rc("close",e);break;case"iframe":case"object":Rc("load",e);break;case"video":case"audio":for(o=0;o<Lc.length;o++)Rc(Lc[o],e);break;case"image":Rc("error",e),Rc("load",e);break;case"details":Rc("toggle",e);break;case"embed":case"source":case"link":Rc("error",e),Rc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:Zc(e,t,c,o,n,null)}return;default:if(Ct(t)){for(f in n)n.hasOwnProperty(f)&&(void 0!==(o=n[f])&&Jc(e,t,f,o,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(null!=(o=n[s])&&Zc(e,t,s,o,n,null))}var tf=null,nf=null;function rf(e){return 9===e.nodeType?e:e.ownerDocument}function of(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function af(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function lf(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sf=null;var uf="function"==typeof setTimeout?setTimeout:void 0,cf="function"==typeof clearTimeout?clearTimeout:void 0,ff="function"==typeof Promise?Promise:void 0,df="function"==typeof queueMicrotask?queueMicrotask:void 0!==ff?function(e){return ff.resolve(null).then(e).catch(pf)}:uf;function pf(e){setTimeout((function(){throw e}))}function hf(e){return"head"===e}function mf(e,t){var n=t,r=0,o=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<r&&8>r){n=r;var i=e.ownerDocument;if(1&n&&Sf(i.documentElement),2&n&&Sf(i.body),4&n)for(Sf(n=i.head),i=n.firstChild;i;){var l=i.nextSibling,s=i.nodeName;i[ze]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=l}}if(0===o)return e.removeChild(a),void Td(t);o--}else"$"===n||"$?"===n||"$!"===n?o++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Td(t)}function gf(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gf(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function vf(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yf(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bf=null;function wf(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xf(e,t,n){switch(t=rf(n),e){case"html":if(!(e=t.documentElement))throw Error(i(452));return e;case"head":if(!(e=t.head))throw Error(i(453));return e;case"body":if(!(e=t.body))throw Error(i(454));return e;default:throw Error(i(451))}}function Sf(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var kf=new Map,Ef=new Set;function _f(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cf=D.d;D.d={f:function(){var e=Cf.f(),t=Uu();return e||t},r:function(e){var t=Ve(e);null!==t&&5===t.tag&&"form"===t.type?Ii(t):Cf.r(e)},D:function(e){Cf.D(e),Tf("dns-prefetch",e,null)},C:function(e,t){Cf.C(e,t),Tf("preconnect",e,t)},L:function(e,t,n){Cf.L(e,t,n);var r=Pf;if(r&&e&&t){var o='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(o+='[imagesizes="'+mt(n.imageSizes)+'"]')):o+='[href="'+mt(e)+'"]';var a=o;switch(t){case"style":a=Of(e);break;case"script":a=If(e)}kf.has(a)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kf.set(a,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Af(a))||"script"===t&&r.querySelector(Lf(a))||(ef(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Cf.m(e,t);var n=Pf;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',a=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=If(e)}if(!kf.has(a)&&(e=d({rel:"modulepreload",href:e},t),kf.set(a,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Lf(a)))return}ef(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Cf.X(e,t);var n=Pf;if(n&&e){var r=He(n).hoistableScripts,o=If(e),a=r.get(o);a||((a=n.querySelector(Lf(o)))||(e=d({src:e,async:!0},t),(t=kf.get(o))&&Ff(e,t),Ge(a=n.createElement("script")),ef(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}},S:function(e,t,n){Cf.S(e,t,n);var r=Pf;if(r&&e){var o=He(r).hoistableStyles,a=Of(e);t=t||"default";var i=o.get(a);if(!i){var l={loading:0,preload:null};if(i=r.querySelector(Af(a)))l.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kf.get(a))&&Rf(e,n);var s=i=r.createElement("link");Ge(s),ef(s,"link",e),s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),s.addEventListener("load",(function(){l.loading|=1})),s.addEventListener("error",(function(){l.loading|=2})),l.loading|=4,Mf(i,t,r)}i={type:"stylesheet",instance:i,count:1,state:l},o.set(a,i)}}},M:function(e,t){Cf.M(e,t);var n=Pf;if(n&&e){var r=He(n).hoistableScripts,o=If(e),a=r.get(o);a||((a=n.querySelector(Lf(o)))||(e=d({src:e,async:!0,type:"module"},t),(t=kf.get(o))&&Ff(e,t),Ge(a=n.createElement("script")),ef(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(o,a))}}};var Pf="undefined"==typeof document?null:document;function Tf(e,t,n){var r=Pf;if(r&&"string"==typeof t&&t){var o=mt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"==typeof n&&(o+='[crossorigin="'+n+'"]'),Ef.has(o)||(Ef.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(ef(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Nf(e,t,n,r){var o,a,l,s,u=(u=H.current)?_f(u):null;if(!u)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Of(n.href),(r=(n=He(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Of(n.href);var c=He(u).hoistableStyles,f=c.get(e);if(f||(u=u.ownerDocument||u,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,f),(c=u.querySelector(Af(e)))&&!c._p&&(f.instance=c,f.state.loading=5),kf.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kf.set(e,n),c||(o=u,a=e,l=n,s=f.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?s.loading=1:(a=o.createElement("link"),s.preload=a,a.addEventListener("load",(function(){return s.loading|=1})),a.addEventListener("error",(function(){return s.loading|=2})),ef(a,"link",l),Ge(a),o.head.appendChild(a))))),t&&null===r)throw Error(i(528,""));return f}if(t&&null!==r)throw Error(i(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=If(n),(r=(n=He(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Of(e){return'href="'+mt(e)+'"'}function Af(e){return'link[rel="stylesheet"]['+e+"]"}function jf(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function If(e){return'[src="'+mt(e)+'"]'}function Lf(e){return"script[async]"+e}function Df(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var o=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),ef(r,"style",o),Mf(r,n.precedence,e),t.instance=r;case"stylesheet":o=Of(n.href);var a=e.querySelector(Af(o));if(a)return t.state.loading|=4,t.instance=a,Ge(a),a;r=jf(n),(o=kf.get(o))&&Rf(r,o),Ge(a=(e.ownerDocument||e).createElement("link"));var l=a;return l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),ef(a,"link",r),t.state.loading|=4,Mf(a,n.precedence,e),t.instance=a;case"script":return a=If(n.src),(o=e.querySelector(Lf(a)))?(t.instance=o,Ge(o),o):(r=n,(o=kf.get(a))&&Ff(r=d({},n),o),Ge(o=(e=e.ownerDocument||e).createElement("script")),ef(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(i(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Mf(r,n.precedence,e));return t.instance}function Mf(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,a=o,i=0;i<r.length;i++){var l=r[i];if(l.dataset.precedence===t)a=l;else if(a!==o)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Rf(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ff(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zf=null;function Bf(e,t,n){if(null===zf){var r=new Map,o=zf=new Map;o.set(n,r)}else(r=(o=zf).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var a=n[o];if(!(a[ze]||a[je]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var l=r.get(i);l?l.push(a):r.set(i,[a])}}return r}function Uf(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vf(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var $f=null;function Hf(){}function Gf(){if(this.count--,0===this.count)if(this.stylesheets)Wf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Yf=null;function Wf(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Yf=new Map,t.forEach(qf,e),Yf=null,Gf.call(e))}function qf(e,t){if(!(4&t.state.loading)){var n=Yf.get(e);if(n)var r=n.get(null);else{n=new Map,Yf.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<o.length;a++){var i=o[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}i=(o=t.instance).getAttribute("data-precedence"),(a=n.get(i)||r)===r&&n.set(null,o),n.set(i,o),this.count++,r=Gf.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),a?a.parentNode.insertBefore(o,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var Xf={$$typeof:x,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Qf(e,t,n,r,o,a,i,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function Kf(e,t,n,r,o,a,i,l,s,u,c,f){return e=new Qf(e,t,n,i,l,s,u,f),t=1,!0===a&&(t|=24),a=Mr(3,null,null,t),e.current=a,a.stateNode=e,(t=Lo()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ra(a),e}function Zf(e){return e?e=Lr:Lr}function Jf(e,t,n,r,o,a){o=Zf(o),null===r.context?r.context=o:r.pendingContext=o,(r=aa(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=ia(e,r,t))&&(Mu(n,0,t),la(n,e,t))}function ed(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function td(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}function nd(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Mu(t,0,67108864),td(e,67108864)}}var rd=!0;function od(e,t,n,r){var o=L.T;L.T=null;var a=D.p;try{D.p=2,id(e,t,n,r)}finally{D.p=a,L.T=o}}function ad(e,t,n,r){var o=L.T;L.T=null;var a=D.p;try{D.p=8,id(e,t,n,r)}finally{D.p=a,L.T=o}}function id(e,t,n,r){if(rd){var o=ld(r);if(null===o)Vc(e,t,r,sd,n),bd(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return dd=wd(dd,e,t,n,r,o),!0;case"dragenter":return pd=wd(pd,e,t,n,r,o),!0;case"mouseover":return hd=wd(hd,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return md.set(a,wd(md.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,gd.set(a,wd(gd.get(a)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(bd(e,r),4&t&&-1<yd.indexOf(e)){for(;null!==o;){var a=Ve(o);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=ye(a.pendingLanes);if(0!==i){var l=a;for(l.pendingLanes|=2,l.entangledLanes|=2;i;){var s=1<<31-pe(i);l.entanglements[1]|=s,i&=~s}Sc(a),!(6&nu)&&(Su=te()+500,kc(0,!1))}}break;case 13:null!==(l=Ar(a,2))&&Mu(l,0,2),Uu(),td(a,2)}if(null===(a=ld(r))&&Vc(e,t,r,sd,n),a===o)break;o=a}null!==o&&r.stopPropagation()}else Vc(e,t,r,null,n)}}function ld(e){return ud(e=At(e))}var sd=null;function ud(e){if(sd=null,null!==(e=Ue(e))){var t=s(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sd=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case oe:return 8;case ae:case ie:return 32;case le:return 268435456;default:return 32}default:return 32}}var fd=!1,dd=null,pd=null,hd=null,md=new Map,gd=new Map,vd=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bd(e,t){switch(e){case"focusin":case"focusout":dd=null;break;case"dragenter":case"dragleave":pd=null;break;case"mouseover":case"mouseout":hd=null;break;case"pointerover":case"pointerout":md.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(t.pointerId)}}function wd(e,t,n,r,o,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},null!==t&&(null!==(t=Ve(t))&&nd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function xd(e){var t=Ue(e.target);if(null!==t){var n=s(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,(function(){if(13===n.tag){var e=Lu();e=Te(e);var t=Ar(n,e);null!==t&&Mu(t,0,e),td(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ld(e.nativeEvent);if(null!==n)return null!==(t=Ve(n))&&nd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ot=r,n.target.dispatchEvent(r),Ot=null,t.shift()}return!0}function kd(e,t,n){Sd(e)&&n.delete(t)}function Ed(){fd=!1,null!==dd&&Sd(dd)&&(dd=null),null!==pd&&Sd(pd)&&(pd=null),null!==hd&&Sd(hd)&&(hd=null),md.forEach(kd),gd.forEach(kd)}function _d(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ed)))}var Cd=null;function Pd(e){Cd!==e&&(Cd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){Cd===e&&(Cd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!=typeof r){if(null===ud(r||n))continue;break}var a=Ve(n);null!==a&&(e.splice(t,3),t-=3,Ai(a,{pending:!0,data:o,method:n.method,action:r},r,o))}})))}function Td(e){function t(t){return _d(t,e)}null!==dd&&_d(dd,e),null!==pd&&_d(pd,e),null!==hd&&_d(hd,e),md.forEach(t),gd.forEach(t);for(var n=0;n<vd.length;n++){var r=vd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<vd.length&&null===(n=vd[0]).blockedOn;)xd(n),null===n.blockedOn&&vd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],a=n[r+1],i=o[Ie]||null;if("function"==typeof a)i||Pd(n);else if(i){var l=null;if(a&&a.hasAttribute("formAction")){if(o=a,i=a[Ie]||null)l=i.formAction;else if(null!==ud(o))continue}else l=i.action;"function"==typeof l?n[r+1]=l:(n.splice(r,3),r-=3),Pd(n)}}}function Nd(e){this._internalRoot=e}function Od(e){this._internalRoot=e}Od.prototype.render=Nd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Jf(t.current,Lu(),e,t,null,null)},Od.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jf(e.current,2,null,e,null,null),Uu(),t[Le]=null}},Od.prototype.unstable_scheduleHydration=function(e){if(e){var t=Oe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<vd.length&&0!==t&&t<vd[n].priority;n++);vd.splice(n,0,e),0===n&&xd(e)}};var Ad=o.version;if("19.1.1"!==Ad)throw Error(i(527,Ad,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=s(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return c(o),e;if(a===r)return c(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var l=!1,u=o.child;u;){if(u===n){l=!0,n=o,r=a;break}if(u===r){l=!0,r=o,n=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===n){l=!0,n=a,r=o;break}if(u===r){l=!0,r=a,n=o;break}u=u.sibling}if(!l)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?f(e):null)?null:e.stateNode};var jd={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Id=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Id.isDisabled&&Id.supportsFiber)try{ce=Id.inject(jd),fe=Id}catch(e){}}t.createRoot=function(e,t){if(!l(e))throw Error(i(299));var n=!1,r="",o=yl,a=bl,s=wl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Kf(e,1,!1,null,0,n,r,o,a,s,0,null),e[Le]=t.current,Bc(e),new Nd(t)},t.hydrateRoot=function(e,t,n){if(!l(e))throw Error(i(299));var r=!1,o="",a=yl,s=bl,u=wl,c=null;return null!=n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(s=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Kf(e,1,!0,t,0,r,o,a,s,u,0,c)).context=Zf(null),n=t.current,(o=aa(r=Te(r=Lu()))).callback=null,ia(n,o,r),n=r,t.current.lanes=n,_e(t,n),Sc(t),e[Le]=t.current,Bc(e),new Od(t)},t.version="19.1.1"},221:(e,t,n)=>{
/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var r=n(540);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(o(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");var s=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:l,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=s.T,n=i.p;try{if(s.T=null,i.p=2,e)return e()}finally{s.T=t,i.p=n,i.d.f()}},t.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,i.d.C(e,t))},t.prefetchDNS=function(e){"string"==typeof e&&i.d.D(e)},t.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,a="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?i.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:a}):"script"===n&&i.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:a,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);i.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&i.d.M(e)},t.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,r=u(n,t.crossOrigin);i.d.L(e,n,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=u(t.as,t.crossOrigin);i.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else i.d.m(e)},t.requestFormReset=function(e){i.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return s.H.useFormState(e,t,n)},t.useFormStatus=function(){return s.H.useHostTransitionStatus()},t.version="19.1.1"},338:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(247)},961:(e,t,n)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(221)},698:(e,t)=>{
/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},869:(e,t)=>{
/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||h}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function E(e,t,r,o,a,i){return r=i.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:i}}function _(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function T(){}function N(e,t,o,a,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var s,u,c=!1;if(null===e)c=!0;else switch(l){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case d:return N((c=e._init)(e._payload),t,o,a,i)}}if(c)return i=i(e),c=""===a?"."+P(e,0):a,x(i)?(o="",null!=c&&(o=c.replace(C,"$&/")+"/"),N(i,t,o,"",(function(e){return e}))):null!=i&&(_(i)&&(s=i,u=o+(null==i.key||e&&e.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+c,i=E(s.type,u,void 0,0,0,s.props)),t.push(i)),1;c=0;var f,h=""===a?".":a+":";if(x(e))for(var m=0;m<e.length;m++)c+=N(a=e[m],t,o,l=h+P(a,m),i);else if("function"==typeof(m=null===(f=e)||"object"!=typeof f?null:"function"==typeof(f=p&&f[p]||f["@@iterator"])?f:null))for(e=m.call(e),m=0;!(a=e.next()).done;)c+=N(a=a.value,t,o,l=h+P(a,m++),i);else if("object"===l){if("function"==typeof e.then)return N(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(T,T):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,a,i);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function O(e,t,n){if(null==e)return e;var r=[],o=0;return N(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=o,t.Profiler=i,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!k.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var i=Array(a),l=0;l<a;l++)i[l]=arguments[l+2];r.children=i}return E(e.type,o,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:l,_context:e},e},t.createElement=function(e,t,n){var r,o={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var i=arguments.length-2;if(1===i)o.children=n;else if(1<i){for(var l=Array(i),s=0;s<i;s++)l[s]=arguments[s+2];o.children=l}if(e&&e.defaultProps)for(r in i=e.defaultProps)void 0===o[r]&&(o[r]=i[r]);return E(e,a,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),o=S.S;null!==o&&o(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(I,j)}catch(e){j(e)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},540:(e,t,n)=>{e.exports=n(869)},848:(e,t,n)=>{e.exports=n(698)},477:(e,t)=>{
/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<a(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,i=o>>>1;r<i;){var l=2*(r+1)-1,s=e[l],u=l+1,c=e[u];if(0>a(s,n))u<o&&0>a(c,s)?(e[r]=c,e[u]=n,r=u):(e[r]=s,e[l]=n,r=l);else{if(!(u<o&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,s=l.now();t.unstable_now=function(){return l.now()-s}}var u=[],c=[],f=1,d=null,p=3,h=!1,m=!1,g=!1,v=!1,y="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,w="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)o(c);else{if(!(t.startTime<=e))break;o(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function S(e){if(g=!1,x(e),!m)if(null!==r(u))m=!0,E||(E=!0,k());else{var t=r(c);null!==t&&j(S,t.startTime-e)}}var k,E=!1,_=-1,C=5,P=-1;function T(){return!!v||!(t.unstable_now()-P<C)}function N(){if(v=!1,E){var e=t.unstable_now();P=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),h=!0;var a=p;try{t:{for(x(e),d=r(u);null!==d&&!(d.expirationTime>e&&T());){var i=d.callback;if("function"==typeof i){d.callback=null,p=d.priorityLevel;var l=i(d.expirationTime<=e);if(e=t.unstable_now(),"function"==typeof l){d.callback=l,x(e),n=!0;break t}d===r(u)&&o(u),x(e)}else o(u);d=r(u)}if(null!==d)n=!0;else{var s=r(c);null!==s&&j(S,s.startTime-e),n=!1}}break e}finally{d=null,p=a,h=!1}n=void 0}}finally{n?k():E=!1}}}if("function"==typeof w)k=function(){w(N)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,A=O.port2;O.port1.onmessage=N,k=function(){A.postMessage(null)}}else k=function(){y(N,0)};function j(e,n){_=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,a){var i=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:f++,callback:o,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>i?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(g?(b(_),_=-1):g=!0,j(S,a-i))):(e.sortIndex=l,n(u,e),m||h||(m=!0,E||(E=!0,k()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},982:(e,t,n)=>{e.exports=n(477)}},g={};function v(e){var t=g[e];if(void 0!==t)return t.exports;var n=g[e]={exports:{}};return m[e](n,n.exports,v),n.exports}v.d=(e,t)=>{for(var n in t)v.o(t,n)&&!v.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},v.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var y={};v.d(y,{T:()=>Zo});var b=v(848),w=v(540),x=v(338);Error;class S{settingsKey;defaultSettings;constructor(e,t){this.settingsKey=e,this.defaultSettings=t}async initializeSettings(e={}){const{strategy:t="recursive"}=e,n=this.defaultSettings.version,r=this.defaultSettings.formatVersion,o=SillyTavern.getContext().extensionSettings[this.settingsKey],a={version:{changed:!1,new:n??""},formatVersion:{changed:!1,new:r??""},oldSettings:null,newSettings:this.defaultSettings};if(!o)return SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings(),a;const i={...a,oldSettings:structuredClone(o),version:{changed:!1,old:o.version,new:o.version},formatVersion:{changed:!1,old:o.formatVersion,new:o.formatVersion}};if("recursive"===t){function l(e,t){let n=!1;for(const r of Object.keys(t))void 0===e[r]?(e[r]=t[r],n=!0):"object"==typeof t[r]&&null!==t[r]&&(e[r]=e[r]||{},l(e[r],t[r])&&(n=!0));return n}n&&o.version!==n&&(i.version.changed=!0,i.version.new=n,o.version=n),r&&"*"!==r&&o.formatVersion!==r&&(i.formatVersion.changed=!0,i.formatVersion.new=r,o.formatVersion=r),(l(o,this.defaultSettings)||i.version.changed||i.formatVersion.changed)&&this.saveSettings()}else if(Array.isArray(t)){n&&!o.version&&(o.version=n,i.version.changed=!0,i.version.new=n),r&&!o.formatVersion&&(o.formatVersion=r,i.formatVersion.changed=!0,i.formatVersion.new=r);let s=structuredClone(o),u=o.formatVersion;try{let c;do{c=!1;let f=t.find((e=>e.from===u));if(f&&f.to>u)s=await f.action(s),u=f.to,s.formatVersion=f.to,c=!0;else for(const d of t)if("*"===d.from&&d.to>u&&u!==d.to){s=await d.action(s),u=d.to,s.formatVersion=d.to,c=!0;break}}while(c);if(u!==o.formatVersion){i.formatVersion.changed=!0,i.formatVersion.new=u;const p=this.defaultSettings.version;p&&(s.version=p)}if(i.formatVersion.changed){for(const h of Object.keys(o))delete o[h];Object.assign(o,s),this.saveSettings()}}catch(m){throw console.error("Failed to apply version changes:",m),new Error(`Version migration failed: ${m instanceof Error?m.message:m}`,{cause:m})}}return i.newSettings=o,i}getSettings(){return SillyTavern.getContext().extensionSettings[this.settingsKey]}updateSetting(e,t){SillyTavern.getContext().extensionSettings[this.settingsKey][e]=t,this.saveSettings()}saveSettings(){SillyTavern.getContext().saveSettingsDebounced()}resetSettings(){SillyTavern.getContext().extensionSettings[this.settingsKey]=this.defaultSettings,this.saveSettings()}}const k=(e=>{var t={};return v.d(t,e),t})({persona_description_positions:()=>e.persona_description_positions,renderStoryString:()=>e.renderStoryString});const E=(e=>{var t={};return v.d(t,e),t})({baseChatReplace:()=>t.baseChatReplace,chat_metadata:()=>t.chat_metadata,depth_prompt_depth_default:()=>t.depth_prompt_depth_default,depth_prompt_role_default:()=>t.depth_prompt_role_default,extension_prompt_types:()=>t.extension_prompt_types,getMaxContextSize:()=>t.getMaxContextSize,name1:()=>t.name1,name2:()=>t.name2,parseMesExamples:()=>t.parseMesExamples,this_chid:()=>t.this_chid});const _=(e=>{var t={};return v.d(t,e),t})({wi_anchor_position:()=>n.wi_anchor_position,world_info_include_names:()=>n.world_info_include_names});const C=(e=>{var t={};return v.d(t,e),t})({formatInstructModeExamples:()=>r.formatInstructModeExamples,formatInstructModeSystemPrompt:()=>r.formatInstructModeSystemPrompt});const P=(e=>{var t={};return v.d(t,e),t})({appendFileContent:()=>o.appendFileContent});const T=(e=>{var t={};return v.d(t,e),t})({formatWorldInfo:()=>a.formatWorldInfo,getPromptPosition:()=>a.getPromptPosition,getPromptRole:()=>a.getPromptRole,prepareOpenAIMessages:()=>a.prepareOpenAIMessages,setOpenAIMessageExamples:()=>a.setOpenAIMessageExamples,setOpenAIMessages:()=>a.setOpenAIMessages});const N=(e=>{var t={};return v.d(t,e),t})({metadata_keys:()=>i.metadata_keys});const O=(e=>{var t={};return v.d(t,e),t})({getGroupDepthPrompts:()=>l.getGroupDepthPrompts,selected_group:()=>l.selected_group});const A=(e=>{var t={};return v.d(t,e),t})({getRegexedString:()=>s.getRegexedString,regex_placement:()=>s.regex_placement});const j=(e=>{var t={};return v.d(t,e),t})({getCharaFilename:()=>u.getCharaFilename,removeFromArray:()=>u.removeFromArray,runAfterAnimation:()=>u.runAfterAnimation});(e=>{var t={};v.d(t,e)})({});(e=>{var t={};v.d(t,e)})({});const I=(e=>{var t={};return v.d(t,e),t})({Popup:()=>d.Popup,fixToastrForDialogs:()=>d.fixToastrForDialogs});const L=(e=>{var t={};return v.d(t,e),t})({default:()=>p.default});async function D(e,t,{escapeHtml:n=!0}={}){await async function(e,...t){await SillyTavern.getContext().SlashCommandParser.commands[e].callback(...t)}("echo",{severity:e,escapeHtml:Boolean(n).toString()},t)}function M(e){return(0,E.getMaxContextSize)(e)}function R(e,t){return(0,E.parseMesExamples)(e,t)}function F(e,t,n){return(0,E.baseChatReplace)(e,t,n)}function z(e){return(0,T.getPromptRole)(e)}function B(e,{wiFormat:t}={}){return(0,T.formatWorldInfo)(e,{wiFormat:t})}function U(e){return(0,T.getPromptPosition)(e)}class V{encode(e){const t=Math.ceil(e.length/4);return new Array(t).fill(" ")}decode(e){return e.join("")}}class H{messages=[];tokenizer;maxContext;currentTokenCount=0;constructor(e){this.tokenizer=new V,this.maxContext=e}getTokenCount(e){return e.content?e.source?.extra?.token_count??this.tokenizer.encode(e.content).length:0}canFit(e){return this.currentTokenCount+this.getTokenCount(e)<=this.maxContext}add(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.push(e),this.currentTokenCount+=t,!0)}addFront(e){if(!e.content)return!0;const t=this.getTokenCount(e);return!(this.currentTokenCount+t>this.maxContext)&&(this.messages.unshift(e),this.currentTokenCount+=t,!0)}addMany(e){const t=e.filter((e=>e.content)),n=t.map((e=>this.getTokenCount(e))),r=n.reduce(((e,t)=>e+t),0);if(this.currentTokenCount+r<=this.maxContext)return this.messages.push(...t),this.currentTokenCount+=r,!0;let o=0;const a=[];for(let e=t.length-1;e>=0;e--){const r=t[e],i=n[e];if(!(this.currentTokenCount+o+i<=this.maxContext))break;a.unshift(r),o+=i}return a.length>0&&(this.messages.push(...a),this.currentTokenCount+=o),a.length===t.length}insert(e,t){if(!t.content)return!0;const n=this.getTokenCount(t);return!(this.currentTokenCount+n>this.maxContext)&&(this.messages.splice(e,0,t),this.currentTokenCount+=n,!0)}getMessages(){return this.messages}}async function G(e,{targetCharacterId:t,presetName:n,instructName:r,contextName:o,syspromptName:a,maxContext:i,includeNames:l,ignoreCharacterFields:s,ignoreAuthorNote:u,ignoreWorldInfo:c,messageIndexesBetween:f}={}){if(!["textgenerationwebui","openai"].includes(e))throw new Error("Unsupported API");const d=SillyTavern.getContext();let{description:p,personality:h,persona:m,scenario:g,mesExamples:v,system:y,jailbreak:b}=s?{description:"",personality:"",persona:"",scenario:"",mesExamples:"",system:"",jailbreak:""}:d.getCharacterCardFields({chid:t});const w="textgenerationwebui"===e?d.getPresetManager("instruct")?.getCompletionPresetByName(r):void 0,x=!!w?.enabled;let S=R(v,x);let j=[];const I=function(){if("number"==typeof i)return i;if(!i)return M();if("active"===i||!n)return M();if("number"==typeof i)return i;let t;if("textgenerationwebui"===e){const e=d.getPresetManager("textgenerationwebui")?.getCompletionPresetByName(n);t=e?.max_length}else{const e=d.getPresetManager("openai")?.getCompletionPresetByName(n);t=e?.openai_max_context}return"number"==typeof t?t:M()}();if(I<=0)return{result:[],warnings:j};const L=new H(I),D=d.ToolManager.isToolCallingSupported(),V=f?.start??0,$=f?.end?f.end+1:void 0;let G=-1===V&&0===$?[]:d.chat.slice(V,$).filter((e=>!e.is_system||D&&Array.isArray(e.extra?.tool_invocations)));G=await Promise.all(G.map((async(e,t)=>{let n=function(e,t,{characterOverride:n,isMarkdown:r,isPrompt:o,isEdit:a,depth:i}){return(0,A.getRegexedString)(e,t,{characterOverride:n,isMarkdown:r,isPrompt:o,isEdit:a,depth:i})}(e.mes,e.is_user?A.regex_placement.USER_INPUT:A.regex_placement.AI_OUTPUT,{isPrompt:!0,depth:G.length-t-1});return n=await async function(e,t){return await(0,P.appendFileContent)(e,t)}(e,n),e?.extra?.append_title&&e?.extra?.title&&(n=`${n}\n\n${e.extra.title}`),{...e,mes:n,index:t}})));const Y=G.map((e=>_.world_info_include_names?`${e.name}: ${e.mes}`:e.mes)).reverse(),{worldInfoString:W,worldInfoBefore:q,worldInfoAfter:X,worldInfoExamples:Q,worldInfoDepth:K,anBefore:Z,anAfter:J}=c?{worldInfoString:"",worldInfoBefore:"",worldInfoAfter:"",worldInfoExamples:[],worldInfoDepth:[],anBefore:[],anAfter:[]}:await d.getWorldInfoPrompt(Y,I,!1);for(const se of Q){const ue=se.content;if(0===ue.length)continue;const ce=R(F(ue,E.name1,E.name2),x);se.position===_.wi_anchor_position.before?S.unshift(...ce):S.push(...ce)}function ee(){const e=[];for(let t=G.length-1;t>=0;t--){const n=G[t],r="System"!==n.name||n.is_user?n.is_user?"user":"assistant":"system";e.unshift({role:r,content:l&&"system"!=r?`${n.name}: ${n.mes}`:n.mes,source:n})}L.addMany(e)}if("textgenerationwebui"===e){const fe=[...S];S&&(S=function(e,t,n){return(0,C.formatInstructModeExamples)(e,t,n)}(S,E.name1,E.name2));const de=d.getPresetManager("sysprompt")?.getCompletionPresetByName(a);de&&(y=d.powerUserSettings.prefer_character_prompt&&y?y:F(de.content,E.name1,E.name2),y=x?(ne=d.substituteParams(y,E.name1,E.name2,de.content),re=w,(0,C.formatInstructModeSystemPrompt)(ne,re)):y);const pe={description:p,personality:h,persona:d.powerUserSettings.persona_description_position==k.persona_description_positions.IN_PROMPT?m:"",scenario:g,system:y,char:E.name2,user:E.name1,wiBefore:q,wiAfter:X,loreBefore:q,loreAfter:X,mesExamples:S.join(""),mesExamplesRaw:fe.join("")},he=d.getPresetManager("context")?.getCompletionPresetByName(o);let me=function(e,{customStoryString:t,customInstructSettings:n}={}){return(0,k.renderStoryString)(e,{customStoryString:t,customInstructSettings:n})}(pe,{customInstructSettings:w,customStoryString:he?.story_string});me&&L.add({role:"system",content:me,ignoreInstruct:!0}),ee()}else{let ge=(te=G,(0,T.setOpenAIMessages)(te)),ve=function(e){return(0,T.setOpenAIMessageExamples)(e)}(S);async function ye(){let[e,t]=await function({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:o,worldInfoAfter:a,bias:i,type:l,quietPrompt:s,quietImage:u,extensionPrompts:c,cyclePrompt:f,systemPromptOverride:d,jailbreakPromptOverride:p,personaDescription:h,messages:m,messageExamples:g},v){return(0,T.prepareOpenAIMessages)({name2:e,charDescription:t,charPersonality:n,Scenario:r,worldInfoBefore:o,worldInfoAfter:a,bias:i,type:l,quietPrompt:s,quietImage:u,cyclePrompt:f,systemPromptOverride:d,jailbreakPromptOverride:p,personaDescription:h,extensionPrompts:c,messages:m,messageExamples:g},v)}({name2:E.name2,charDescription:p,charPersonality:h,Scenario:g,worldInfoBefore:q,worldInfoAfter:X,extensionPrompts:d.extensionPrompts,bias:"",type:"normal",quietPrompt:void 0,quietImage:void 0,cyclePrompt:"",systemPromptOverride:y,jailbreakPromptOverride:b,personaDescription:m,messages:ge,messageExamples:ve},!1);L.addMany(e)}if(!n)return j.push("No preset name provided. Using default preset."),await ye(),{result:L.getMessages(),warnings:j};const be=d.getPresetManager("openai")?.getCompletionPresetByName(n);if(!be)return console.warn(`Preset not found: ${n}. Using current preset.`),j.push(`Preset not found: ${n}. Using current preset.`),ye(),{result:L.getMessages(),warnings:j};let we=be.prompt_order?.find((e=>e.character_id===E.this_chid));if(!we&&be.prompt_order&&be.prompt_order.length>0&&(we=be.prompt_order[0]),!we)return console.warn(`No prompt order found for preset: ${n}. Using current preset.`),j.push(`No prompt order found for preset: ${n}. Using current preset.`),ye(),{result:L.getMessages(),warnings:j};const xe=g&&be.scenario_format?d.substituteParams(be.scenario_format):"",Se=h&&be.personality_format?d.substituteParams(be.personality_format):"",ke=d.substituteParams(be.group_nudge_prompt),Ee=be.impersonation_prompt?d.substituteParams(be.impersonation_prompt):"",_e=[];c||_e.push({role:"system",content:B(q,{wiFormat:be.wi_format}),identifier:"worldInfoBefore"},{role:"system",content:B(X,{wiFormat:be.wi_format}),identifier:"worldInfoAfter"}),s||_e.push({role:"system",content:p,identifier:"charDescription"},{role:"system",content:Se,identifier:"charPersonality"},{role:"system",content:xe,identifier:"scenario"}),_e.push({role:"system",content:Ee,identifier:"impersonate"},{role:"system",content:ke,identifier:"groupNudge"});const Ce=d.extensionPrompts["1_memory"];Ce&&Ce.value&&_e.push({role:z(Ce.role),content:Ce.value,identifier:"summary",position:U(Ce.position)});const Pe=d.extensionPrompts["2_floating_prompt"];!u&&Pe&&Pe.value&&_e.push({role:z(Pe.role),content:Pe.value,identifier:"authorsNote",position:U(Pe.position)});const Te=d.extensionPrompts["3_vectors"];Te&&Te.value&&_e.push({role:"system",content:Te.value,identifier:"vectorsMemory",position:U(Te.position)});const Ne=d.extensionPrompts["4_vectors_data_bank"];Ne&&Ne.value&&_e.push({role:z(Ne.role),content:Ne.value,identifier:"vectorsDataBank",position:U(Ne.position)});const Oe=d.extensionPrompts.chromadb;function Ae(e){const t=_e.find((t=>t.identifier===e));if(t)return t;const n=be.prompts.find((t=>t.identifier===e));return n||void 0}Oe&&Oe.value&&_e.push({role:"system",content:Oe.value,identifier:"smartContext",position:U(Oe.position)}),!s&&d.powerUserSettings.persona_description&&d.powerUserSettings.persona_description_position===k.persona_description_positions.IN_PROMPT&&_e.push({role:"system",content:d.powerUserSettings.persona_description,identifier:"personaDescription"}),we.order.forEach((e=>{if(!e.enabled)return;const t=Ae(e.identifier);t&&t.content?L.add({role:t.role??"system",content:d.substituteParams(t.content)}):"chatHistory"===e.identifier&&ee()}))}var te,ne,re;const oe=["1_memory","2_floating_prompt","3_vectors","4_vectors_data_bank","chromadb","PERSONA_DESCRIPTION","QUIET_PROMPT","DEPTH_PROMPT"];for(const je in d.extensionPrompts)if(Object.hasOwn(d.extensionPrompts,je)){const Ie=d.extensionPrompts[je];if(oe.includes(je))continue;if(!d.extensionPrompts[je].value)continue;if(![E.extension_prompt_types.BEFORE_PROMPT,E.extension_prompt_types.IN_PROMPT].includes(Ie.position))continue;if("function"==typeof Ie.filter&&!await Ie.filter())continue;const Le={role:z(Ie.role)??"system",content:Ie.value};if(Ie.position===E.extension_prompt_types.BEFORE_PROMPT)L.insert(Ie.depth,Le);else if(Ie.position===E.extension_prompt_types.IN_PROMPT){const De=L.getMessages();L.insert(De.length-Ie.depth,Le)}}for(const Me of K){const Re=L.getMessages();L.insert(Re.length-Me.depth,{role:z(Me.role),content:Me.entries.join("\n")})}if(!s){const Fe=(ae=O.selected_group,ie=Number(E.this_chid),(0,O.getGroupDepthPrompts)(ae,ie));if(O.selected_group&&Array.isArray(Fe)&&Fe.length>0)Fe.filter((e=>e.text)).forEach(((e,t)=>{const n=L.getMessages();L.insert(n.length-e.depth,{role:e.role,content:e.text})}));else{const ze=F(d.characters[E.this_chid]?.data?.extensions?.depth_prompt?.prompt?.trim(),E.name1,E.name2)||"";if(ze){const Be=E.depth_prompt_depth_default,Ue=d.characters[E.this_chid]?.data?.extensions?.depth_prompt?.role??E.depth_prompt_role_default,Ve=L.getMessages();L.insert(Ve.length-Be,{role:z(Ue),content:ze})}}}var ae,ie;let le=-1;if(!u){const $e={prompt:E.chat_metadata[N.metadata_keys.prompt],interval:E.chat_metadata[N.metadata_keys.interval],position:E.chat_metadata[N.metadata_keys.position],depth:E.chat_metadata[N.metadata_keys.depth],role:E.chat_metadata[N.metadata_keys.role]};if($e.prompt){$e.prompt=F($e.prompt,E.name1,E.name2);const He={role:z($e.role),content:$e.prompt};switch($e.position){case E.extension_prompt_types.IN_PROMPT:L.insert(1,He),le=1;break;case E.extension_prompt_types.IN_CHAT:le=L.getMessages().length-$e.depth,L.insert(le,He);break;case E.extension_prompt_types.BEFORE_PROMPT:L.addFront(He),le=0}}}return le>=0&&(Z.length>0&&(L.insert(le,{role:"system",content:Z.join("\n")}),le++),J.length>0&&L.insert(le+1,{role:"system",content:J.join("\n")})),{result:L.getMessages(),warnings:j}}
/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function K(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Z(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var J=Z(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),ee=Z(/Edge/i),te=Z(/firefox/i),ne=Z(/safari/i)&&!Z(/chrome/i)&&!Z(/android/i),re=Z(/iP(ad|od|hone)/i),oe=Z(/chrome/i)&&Z(/android/i),ae={capture:!1,passive:!1};function ie(e,t,n){e.addEventListener(t,n,!J&&ae)}function le(e,t,n){e.removeEventListener(t,n,!J&&ae)}function se(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function ue(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ce(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&se(e,t):se(e,t))||r&&e===n)return e;if(e===n)break}while(e=ue(e))}return null}var fe,de=/\s+/g;function pe(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(de," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(de," ")}}function he(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function me(e,t){var n="";if("string"==typeof e)n=e;else do{var r=he(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function ge(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,a=r.length;if(n)for(;o<a;o++)n(r[o],o);return r}return[]}function ve(){var e=document.scrollingElement;return e||document.documentElement}function ye(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var a,i,l,s,u,c,f;if(e!==window&&e.parentNode&&e!==ve()?(i=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,u=a.right,c=a.height,f=a.width):(i=0,l=0,s=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!J))do{if(o&&o.getBoundingClientRect&&("none"!==he(o,"transform")||n&&"static"!==he(o,"position"))){var d=o.getBoundingClientRect();i-=d.top+parseInt(he(o,"border-top-width")),l-=d.left+parseInt(he(o,"border-left-width")),s=i+a.height,u=l+a.width;break}}while(o=o.parentNode);if(r&&e!==window){var p=me(o||e),h=p&&p.a,m=p&&p.d;p&&(s=(i/=m)+(c/=m),u=(l/=h)+(f/=h))}return{top:i,left:l,bottom:s,right:u,width:f,height:c}}}function be(e,t,n){for(var r=Ee(e,!0),o=ye(e)[t];r;){var a=ye(r)[n];if(!("top"===n||"left"===n?o>=a:o<=a))return r;if(r===ve())break;r=Ee(r,!1)}return!1}function we(e,t,n,r){for(var o=0,a=0,i=e.children;a<i.length;){if("none"!==i[a].style.display&&i[a]!==Nt.ghost&&(r||i[a]!==Nt.dragged)&&ce(i[a],n.draggable,e,!1)){if(o===t)return i[a];o++}a++}return null}function xe(e,t){for(var n=e.lastElementChild;n&&(n===Nt.ghost||"none"===he(n,"display")||t&&!se(n,t));)n=n.previousElementSibling;return n||null}function Se(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Nt.clone||t&&!se(e,t)||n++;return n}function ke(e){var t=0,n=0,r=ve();if(e)do{var o=me(e),a=o.a,i=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*i}while(e!==r&&(e=e.parentNode));return[t,n]}function Ee(e,t){if(!e||!e.getBoundingClientRect)return ve();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=he(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return ve();if(r||t)return n;r=!0}}}while(n=n.parentNode);return ve()}function _e(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Ce(e,t){return function(){if(!fe){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),fe=setTimeout((function(){fe=void 0}),t)}}}function Pe(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Te(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Ne(e,t,n){var r={};return Array.from(e.children).forEach((function(o){var a,i,l,s;if(ce(o,t.draggable,e,!1)&&!o.animated&&o!==n){var u=ye(o);r.left=Math.min(null!==(a=r.left)&&void 0!==a?a:1/0,u.left),r.top=Math.min(null!==(i=r.top)&&void 0!==i?i:1/0,u.top),r.right=Math.max(null!==(l=r.right)&&void 0!==l?l:-1/0,u.right),r.bottom=Math.max(null!==(s=r.bottom)&&void 0!==s?s:-1/0,u.bottom)}})),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Oe="Sortable"+(new Date).getTime();function Ae(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==he(e,"display")&&e!==Nt.ghost){t.push({target:e,rect:ye(e)});var n=W({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=me(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,a=0;t.forEach((function(e){var t=0,n=e.target,i=n.fromRect,l=ye(n),s=n.prevFromRect,u=n.prevToRect,c=e.rect,f=me(n,!0);f&&(l.top-=f.f,l.left-=f.e),n.toRect=l,n.thisAnimationDuration&&_e(s,l)&&!_e(i,l)&&(c.top-l.top)/(c.left-l.left)==(i.top-l.top)/(i.left-l.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,s,u,r.options)),_e(l,i)||(n.prevFromRect=i,n.prevToRect=l,t||(t=r.options.animation),r.animate(n,c,l,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){he(e,"transition",""),he(e,"transform","");var o=me(this.el),a=o&&o.a,i=o&&o.d,l=(t.left-n.left)/(a||1),s=(t.top-n.top)/(i||1);e.animatingX=!!l,e.animatingY=!!s,he(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),he(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),he(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){he(e,"transition",""),he(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var je=[],Ie={initializeByDefault:!0},Le={mount:function(e){for(var t in Ie)Ie.hasOwnProperty(t)&&!(t in e)&&(e[t]=Ie[t]);je.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),je.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";je.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](W({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](W({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var o in je.forEach((function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,Q(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);void 0!==a&&(e.options[o]=a)}},getEventProperties:function(e,t){var n={};return je.forEach((function(r){"function"==typeof r.eventProperties&&Q(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return je.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))})),r}};function De(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,a=e.cloneEl,i=e.toEl,l=e.fromEl,s=e.oldIndex,u=e.newIndex,c=e.oldDraggableIndex,f=e.newDraggableIndex,d=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[Oe]){var m,g=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||J||ee?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=i||n,m.from=l||n,m.item=o||n,m.clone=a,m.oldIndex=s,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=f,m.originalEvent=d,m.pullMode=p?p.lastPutMode:void 0;var y=W(W({},h),Le.getEventProperties(r,t));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var Me=["evt"],Re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=K(n,Me);Le.pluginEvent.bind(Nt)(e,t,W({dragEl:ze,parentEl:Be,ghostEl:Ue,rootEl:Ve,nextEl:$e,lastDownEl:He,cloneEl:Ge,cloneHidden:Ye,dragStarted:at,putSortable:Ze,activeSortable:Nt.active,originalEvent:r,oldIndex:We,oldDraggableIndex:Xe,newIndex:qe,newDraggableIndex:Qe,hideGhostForTarget:_t,unhideGhostForTarget:Ct,cloneNowHidden:function(){Ye=!0},cloneNowShown:function(){Ye=!1},dispatchSortableEvent:function(e){Fe({sortable:t,name:e,originalEvent:r})}},o))};function Fe(e){De(W({putSortable:Ze,cloneEl:Ge,targetEl:ze,rootEl:Ve,oldIndex:We,oldDraggableIndex:Xe,newIndex:qe,newDraggableIndex:Qe},e))}var ze,Be,Ue,Ve,$e,He,Ge,Ye,We,qe,Xe,Qe,Ke,Ze,Je,et,tt,nt,rt,ot,at,it,lt,st,ut,ct=!1,ft=!1,dt=[],pt=!1,ht=!1,mt=[],gt=!1,vt=[],yt="undefined"!=typeof document,bt=re,wt=ee||J?"cssFloat":"float",xt=yt&&!oe&&!re&&"draggable"in document.createElement("div"),St=function(){if(yt){if(J)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),kt=function(e,t){var n=he(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=we(e,0,t),a=we(e,1,t),i=o&&he(o),l=a&&he(a),s=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ye(o).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+ye(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&"none"!==i.float){var c="left"===i.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return o&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||s>=r&&"none"===n[wt]||a&&"none"===n[wt]&&s+u>r)?"vertical":"horizontal"},Et=function(e){function t(e,n){return function(r,o,a,i){var l=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,o,a,i),n)(r,o,a,i);var s=(n?r:o).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},r=e.group;r&&"object"==q(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},_t=function(){!St&&Ue&&he(Ue,"display","none")},Ct=function(){!St&&Ue&&he(Ue,"display","")};yt&&!oe&&document.addEventListener("click",(function(e){if(ft)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ft=!1,!1}),!0);var Pt=function(e){if(ze){var t=function(e,t){var n;return dt.some((function(r){var o=r[Oe].options.emptyInsertThreshold;if(o&&!xe(r)){var a=ye(r),i=e>=a.left-o&&e<=a.right+o,l=t>=a.top-o&&t<=a.bottom+o;return i&&l?n=r:void 0}})),n}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Oe]._onDragOver(n)}}},Tt=function(e){ze&&ze.parentNode[Oe]._isOutsideThisEl(e.target)};function Nt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Q({},t),e[Oe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return kt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Nt.supportPointer&&"PointerEvent"in window&&(!ne||re),emptyInsertThreshold:5};for(var r in Le.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in Et(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&xt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?ie(e,"pointerdown",this._onTapStart):(ie(e,"mousedown",this._onTapStart),ie(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(ie(e,"dragover",this),ie(e,"dragenter",this)),dt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Q(this,Ae())}function Ot(e,t,n,r,o,a,i,l){var s,u,c=e[Oe],f=c.options.onMove;return!window.CustomEvent||J||ee?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=r,s.related=o||t,s.relatedRect=a||ye(t),s.willInsertAfter=l,s.originalEvent=i,e.dispatchEvent(s),f&&(u=f.call(c,s,i)),u}function At(e){e.draggable=!1}function jt(){gt=!1}function It(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function Lt(e){return setTimeout(e,0)}function Dt(e){return clearTimeout(e)}Nt.prototype={constructor:Nt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(it=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,ze):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,a=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(i||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=r.filter;if(function(e){vt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&vt.push(r)}}(n),!ze&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!ne||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=ce(l,r.draggable,n,!1))&&l.animated||He===l)){if(We=Se(l),Xe=Se(l,r.draggable),"function"==typeof u){if(u.call(this,e,l,this))return Fe({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),Re("filter",t,{evt:e}),void(o&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(r){if(r=ce(s,r.trim(),n,!1))return Fe({sortable:t,rootEl:r,name:"filter",targetEl:l,fromEl:n,toEl:n}),Re("filter",t,{evt:e}),!0}))))return void(o&&e.preventDefault());r.handle&&!ce(s,r.handle,n,!1)||this._prepareDragStart(e,i,l)}}},_prepareDragStart:function(e,t,n){var r,o=this,a=o.el,i=o.options,l=a.ownerDocument;if(n&&!ze&&n.parentNode===a){var s=ye(n);if(Ve=a,Be=(ze=n).parentNode,$e=ze.nextSibling,He=n,Ke=i.group,Nt.dragged=ze,Je={target:ze,clientX:(t||e).clientX,clientY:(t||e).clientY},rt=Je.clientX-s.left,ot=Je.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ze.style["will-change"]="all",r=function(){Re("delayEnded",o,{evt:e}),Nt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!te&&o.nativeDraggable&&(ze.draggable=!0),o._triggerDragStart(e,t),Fe({sortable:o,name:"choose",originalEvent:e}),pe(ze,i.chosenClass,!0))},i.ignore.split(",").forEach((function(e){ge(ze,e.trim(),At)})),ie(l,"dragover",Pt),ie(l,"mousemove",Pt),ie(l,"touchmove",Pt),i.supportPointer?(ie(l,"pointerup",o._onDrop),!this.nativeDraggable&&ie(l,"pointercancel",o._onDrop)):(ie(l,"mouseup",o._onDrop),ie(l,"touchend",o._onDrop),ie(l,"touchcancel",o._onDrop)),te&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ze.draggable=!0),Re("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(ee||J))r();else{if(Nt.eventCanceled)return void this._onDrop();i.supportPointer?(ie(l,"pointerup",o._disableDelayedDrag),ie(l,"pointercancel",o._disableDelayedDrag)):(ie(l,"mouseup",o._disableDelayedDrag),ie(l,"touchend",o._disableDelayedDrag),ie(l,"touchcancel",o._disableDelayedDrag)),ie(l,"mousemove",o._delayedDragTouchMoveHandler),ie(l,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&ie(l,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ze&&At(ze),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;le(e,"mouseup",this._disableDelayedDrag),le(e,"touchend",this._disableDelayedDrag),le(e,"touchcancel",this._disableDelayedDrag),le(e,"pointerup",this._disableDelayedDrag),le(e,"pointercancel",this._disableDelayedDrag),le(e,"mousemove",this._delayedDragTouchMoveHandler),le(e,"touchmove",this._delayedDragTouchMoveHandler),le(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?ie(document,"pointermove",this._onTouchMove):ie(document,t?"touchmove":"mousemove",this._onTouchMove):(ie(ze,"dragend",this),ie(Ve,"dragstart",this._onDragStart));try{document.selection?Lt((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(ct=!1,Ve&&ze){Re("dragStarted",this,{evt:t}),this.nativeDraggable&&ie(document,"dragover",Tt);var n=this.options;!e&&pe(ze,n.dragClass,!1),pe(ze,n.ghostClass,!0),Nt.active=this,e&&this._appendGhost(),Fe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(et){this._lastX=et.clientX,this._lastY=et.clientY,_t();for(var e=document.elementFromPoint(et.clientX,et.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(et.clientX,et.clientY))!==t;)t=e;if(ze.parentNode[Oe]._isOutsideThisEl(e),t)do{if(t[Oe]){if(t[Oe]._onDragOver({clientX:et.clientX,clientY:et.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=ue(t));Ct()}},_onTouchMove:function(e){if(Je){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=Ue&&me(Ue,!0),i=Ue&&a&&a.a,l=Ue&&a&&a.d,s=bt&&ut&&ke(ut),u=(o.clientX-Je.clientX+r.x)/(i||1)+(s?s[0]-mt[0]:0)/(i||1),c=(o.clientY-Je.clientY+r.y)/(l||1)+(s?s[1]-mt[1]:0)/(l||1);if(!Nt.active&&!ct){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Ue){a?(a.e+=u-(tt||0),a.f+=c-(nt||0)):a={a:1,b:0,c:0,d:1,e:u,f:c};var f="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");he(Ue,"webkitTransform",f),he(Ue,"mozTransform",f),he(Ue,"msTransform",f),he(Ue,"transform",f),tt=u,nt=c,et=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ue){var e=this.options.fallbackOnBody?document.body:Ve,t=ye(ze,!0,bt,!0,e),n=this.options;if(bt){for(ut=e;"static"===he(ut,"position")&&"none"===he(ut,"transform")&&ut!==document;)ut=ut.parentNode;ut!==document.body&&ut!==document.documentElement?(ut===document&&(ut=ve()),t.top+=ut.scrollTop,t.left+=ut.scrollLeft):ut=ve(),mt=ke(ut)}pe(Ue=ze.cloneNode(!0),n.ghostClass,!1),pe(Ue,n.fallbackClass,!0),pe(Ue,n.dragClass,!0),he(Ue,"transition",""),he(Ue,"transform",""),he(Ue,"box-sizing","border-box"),he(Ue,"margin",0),he(Ue,"top",t.top),he(Ue,"left",t.left),he(Ue,"width",t.width),he(Ue,"height",t.height),he(Ue,"opacity","0.8"),he(Ue,"position",bt?"absolute":"fixed"),he(Ue,"zIndex","100000"),he(Ue,"pointerEvents","none"),Nt.ghost=Ue,e.appendChild(Ue),he(Ue,"transform-origin",rt/parseInt(Ue.style.width)*100+"% "+ot/parseInt(Ue.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;Re("dragStart",this,{evt:e}),Nt.eventCanceled?this._onDrop():(Re("setupClone",this),Nt.eventCanceled||((Ge=Te(ze)).removeAttribute("id"),Ge.draggable=!1,Ge.style["will-change"]="",this._hideClone(),pe(Ge,this.options.chosenClass,!1),Nt.clone=Ge),n.cloneId=Lt((function(){Re("clone",n),Nt.eventCanceled||(n.options.removeCloneOnHide||Ve.insertBefore(Ge,ze),n._hideClone(),Fe({sortable:n,name:"clone"}))})),!t&&pe(ze,o.dragClass,!0),t?(ft=!0,n._loopId=setInterval(n._emulateDragOver,50)):(le(document,"mouseup",n._onDrop),le(document,"touchend",n._onDrop),le(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,ze)),ie(document,"drop",n),he(ze,"transform","translateZ(0)")),ct=!0,n._dragStartId=Lt(n._dragStarted.bind(n,t,e)),ie(document,"selectstart",n),at=!0,window.getSelection().removeAllRanges(),ne&&he(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,a=this.el,i=e.target,l=this.options,s=l.group,u=Nt.active,c=Ke===s,f=l.sort,d=Ze||u,p=this,h=!1;if(!gt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),i=ce(i,l.draggable,a,!0),N("dragOver"),Nt.eventCanceled)return h;if(ze.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return A(!1);if(ft=!1,u&&!l.disabled&&(c?f||(r=Be!==Ve):Ze===this||(this.lastPutMode=Ke.checkPull(this,u,ze,e))&&s.checkPut(this,u,ze,e))){if(o="vertical"===this._getDirection(e,i),t=ye(ze),N("dragOverValid"),Nt.eventCanceled)return h;if(r)return Be=Ve,O(),this._hideClone(),N("revert"),Nt.eventCanceled||($e?Ve.insertBefore(ze,$e):Ve.appendChild(ze)),A(!0);var m=xe(a,l.draggable);if(!m||function(e,t,n){var r=ye(xe(n.el,n.options.draggable)),o=Ne(n.el,n.options,Ue),a=10;return t?e.clientX>o.right+a||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>o.bottom+a||e.clientX>r.right&&e.clientY>r.top}(e,o,this)&&!m.animated){if(m===ze)return A(!1);if(m&&a===e.target&&(i=m),i&&(n=ye(i)),!1!==Ot(Ve,a,ze,t,i,n,e,!!i))return O(),m&&m.nextSibling?a.insertBefore(ze,m.nextSibling):a.appendChild(ze),Be=a,j(),A(!0)}else if(m&&function(e,t,n){var r=ye(we(n.el,0,n.options,!0)),o=Ne(n.el,n.options,Ue),a=10;return t?e.clientX<o.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<o.top-a||e.clientY<r.bottom&&e.clientX<r.left}(e,o,this)){var g=we(a,0,l,!0);if(g===ze)return A(!1);if(n=ye(i=g),!1!==Ot(Ve,a,ze,t,i,n,e,!1))return O(),a.insertBefore(ze,g),Be=a,j(),A(!0)}else if(i.parentNode===a){n=ye(i);var v,y,b,w=ze.parentNode!==a,x=!function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,a=n?e.width:e.height,i=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return r===i||o===l||r+a/2===i+s/2}(ze.animated&&ze.toRect||t,i.animated&&i.toRect||n,o),S=o?"top":"left",k=be(i,"top","top")||be(ze,"top","top"),E=k?k.scrollTop:void 0;if(it!==i&&(y=n[S],pt=!1,ht=!x&&l.invertSwap||w),v=function(e,t,n,r,o,a,i,l){var s=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,f=r?n.bottom:n.right,d=!1;if(!i)if(l&&st<u*o){if(!pt&&(1===lt?s>c+u*a/2:s<f-u*a/2)&&(pt=!0),pt)d=!0;else if(1===lt?s<c+st:s>f-st)return-lt}else if(s>c+u*(1-o)/2&&s<f-u*(1-o)/2)return function(e){return Se(ze)<Se(e)?1:-1}(t);if((d=d||i)&&(s<c+u*a/2||s>f-u*a/2))return s>c+u/2?1:-1;return 0}(e,i,n,o,x?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ht,it===i),0!==v){var _=Se(ze);do{_-=v,b=Be.children[_]}while(b&&("none"===he(b,"display")||b===Ue))}if(0===v||b===i)return A(!1);it=i,lt=v;var C=i.nextElementSibling,P=!1,T=Ot(Ve,a,ze,t,i,n,e,P=1===v);if(!1!==T)return 1!==T&&-1!==T||(P=1===T),gt=!0,setTimeout(jt,30),O(),P&&!C?a.appendChild(ze):i.parentNode.insertBefore(ze,P?C:i),k&&Pe(k,0,E-k.scrollTop),Be=ze.parentNode,void 0===y||ht||(st=Math.abs(y-ye(i)[S])),j(),A(!0)}if(a.contains(ze))return A(!1)}return!1}function N(l,s){Re(l,p,W({evt:e,isOwner:c,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:f,fromSortable:d,target:i,completed:A,onMove:function(n,r){return Ot(Ve,a,ze,t,n,ye(n),e,r)},changed:j},s))}function O(){N("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function A(t){return N("dragOverCompleted",{insertion:t}),t&&(c?u._hideClone():u._showClone(p),p!==d&&(pe(ze,Ze?Ze.options.ghostClass:u.options.ghostClass,!1),pe(ze,l.ghostClass,!0)),Ze!==p&&p!==Nt.active?Ze=p:p===Nt.active&&Ze&&(Ze=null),d===p&&(p._ignoreWhileAnimating=i),p.animateAll((function(){N("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(i===ze&&!ze.animated||i===a&&!i.animated)&&(it=null),l.dragoverBubble||e.rootEl||i===document||(ze.parentNode[Oe]._isOutsideThisEl(e.target),!t&&Pt(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function j(){qe=Se(ze),Qe=Se(ze,l.draggable),Fe({sortable:p,name:"change",toEl:a,newIndex:qe,newDraggableIndex:Qe,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){le(document,"mousemove",this._onTouchMove),le(document,"touchmove",this._onTouchMove),le(document,"pointermove",this._onTouchMove),le(document,"dragover",Pt),le(document,"mousemove",Pt),le(document,"touchmove",Pt)},_offUpEvents:function(){var e=this.el.ownerDocument;le(e,"mouseup",this._onDrop),le(e,"touchend",this._onDrop),le(e,"pointerup",this._onDrop),le(e,"pointercancel",this._onDrop),le(e,"touchcancel",this._onDrop),le(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;qe=Se(ze),Qe=Se(ze,n.draggable),Re("drop",this,{evt:e}),Be=ze&&ze.parentNode,qe=Se(ze),Qe=Se(ze,n.draggable),Nt.eventCanceled||(ct=!1,ht=!1,pt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Dt(this.cloneId),Dt(this._dragStartId),this.nativeDraggable&&(le(document,"drop",this),le(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),ne&&he(document.body,"user-select",""),he(ze,"transform",""),e&&(at&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Ue&&Ue.parentNode&&Ue.parentNode.removeChild(Ue),(Ve===Be||Ze&&"clone"!==Ze.lastPutMode)&&Ge&&Ge.parentNode&&Ge.parentNode.removeChild(Ge),ze&&(this.nativeDraggable&&le(ze,"dragend",this),At(ze),ze.style["will-change"]="",at&&!ct&&pe(ze,Ze?Ze.options.ghostClass:this.options.ghostClass,!1),pe(ze,this.options.chosenClass,!1),Fe({sortable:this,name:"unchoose",toEl:Be,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ve!==Be?(qe>=0&&(Fe({rootEl:Be,name:"add",toEl:Be,fromEl:Ve,originalEvent:e}),Fe({sortable:this,name:"remove",toEl:Be,originalEvent:e}),Fe({rootEl:Be,name:"sort",toEl:Be,fromEl:Ve,originalEvent:e}),Fe({sortable:this,name:"sort",toEl:Be,originalEvent:e})),Ze&&Ze.save()):qe!==We&&qe>=0&&(Fe({sortable:this,name:"update",toEl:Be,originalEvent:e}),Fe({sortable:this,name:"sort",toEl:Be,originalEvent:e})),Nt.active&&(null!=qe&&-1!==qe||(qe=We,Qe=Xe),Fe({sortable:this,name:"end",toEl:Be,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Re("nulling",this),Ve=ze=Be=Ue=$e=Ge=He=Ye=Je=et=at=qe=Qe=We=Xe=it=lt=Ze=Ke=Nt.dragged=Nt.ghost=Nt.clone=Nt.active=null,vt.forEach((function(e){e.checked=!0})),vt.length=tt=nt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ze&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)ce(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||It(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var o=r.children[t];ce(o,this.options.draggable,r,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ce(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=Le.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Et(n)},destroy:function(){Re("destroy",this);var e=this.el;e[Oe]=null,le(e,"mousedown",this._onTapStart),le(e,"touchstart",this._onTapStart),le(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(le(e,"dragover",this),le(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),dt.splice(dt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ye){if(Re("hideClone",this),Nt.eventCanceled)return;he(Ge,"display","none"),this.options.removeCloneOnHide&&Ge.parentNode&&Ge.parentNode.removeChild(Ge),Ye=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ye){if(Re("showClone",this),Nt.eventCanceled)return;ze.parentNode!=Ve||this.options.group.revertClone?$e?Ve.insertBefore(Ge,$e):Ve.appendChild(Ge):Ve.insertBefore(Ge,ze),this.options.group.revertClone&&this.animate(ze,Ge),he(Ge,"display",""),Ye=!1}}else this._hideClone()}},yt&&ie(document,"touchmove",(function(e){(Nt.active||ct)&&e.cancelable&&e.preventDefault()})),Nt.utils={on:ie,off:le,css:he,find:ge,is:function(e,t){return!!ce(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Ce,closest:ce,toggleClass:pe,clone:Te,index:Se,nextTick:Lt,cancelNextTick:Dt,detectDirection:kt,getChild:we,expando:Oe},Nt.get=function(e){return e[Oe]},Nt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Nt.utils=W(W({},Nt.utils),e.utils)),Le.mount(e)}))},Nt.create=function(e,t){return new Nt(e,t)},Nt.version="1.15.6";var Mt,Rt,Ft,zt,Bt,Ut,Vt=[],$t=!1;function Ht(){Vt.forEach((function(e){clearInterval(e.pid)})),Vt=[]}function Gt(){clearInterval(Ut)}var Yt=Ce((function(e,t,n,r){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,u=ve(),c=!1;Rt!==n&&(Rt=n,Ht(),Mt=t.scroll,o=t.scrollFn,!0===Mt&&(Mt=Ee(n,!0)));var f=0,d=Mt;do{var p=d,h=ye(p),m=h.top,g=h.bottom,v=h.left,y=h.right,b=h.width,w=h.height,x=void 0,S=void 0,k=p.scrollWidth,E=p.scrollHeight,_=he(p),C=p.scrollLeft,P=p.scrollTop;p===u?(x=b<k&&("auto"===_.overflowX||"scroll"===_.overflowX||"visible"===_.overflowX),S=w<E&&("auto"===_.overflowY||"scroll"===_.overflowY||"visible"===_.overflowY)):(x=b<k&&("auto"===_.overflowX||"scroll"===_.overflowX),S=w<E&&("auto"===_.overflowY||"scroll"===_.overflowY));var T=x&&(Math.abs(y-a)<=l&&C+b<k)-(Math.abs(v-a)<=l&&!!C),N=S&&(Math.abs(g-i)<=l&&P+w<E)-(Math.abs(m-i)<=l&&!!P);if(!Vt[f])for(var O=0;O<=f;O++)Vt[O]||(Vt[O]={});Vt[f].vx==T&&Vt[f].vy==N&&Vt[f].el===p||(Vt[f].el=p,Vt[f].vx=T,Vt[f].vy=N,clearInterval(Vt[f].pid),0==T&&0==N||(c=!0,Vt[f].pid=setInterval(function(){r&&0===this.layer&&Nt.active._onTouchMove(Bt);var t=Vt[this.layer].vy?Vt[this.layer].vy*s:0,n=Vt[this.layer].vx?Vt[this.layer].vx*s:0;"function"==typeof o&&"continue"!==o.call(Nt.dragged.parentNode[Oe],n,t,e,Bt,Vt[this.layer].el)||Pe(Vt[this.layer].el,n,t)}.bind({layer:f}),24))),f++}while(t.bubbleScroll&&d!==u&&(d=Ee(d,!1)));$t=c}}),30),Wt=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,i=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||o;i();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);l(),s&&!s.el.contains(c)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function qt(){}function Xt(){}qt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=we(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Wt},Q(qt,{pluginName:"revertOnSpill"}),Xt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Wt},Q(Xt,{pluginName:"removeOnSpill"});Nt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?ie(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ie(document,"pointermove",this._handleFallbackAutoScroll):t.touches?ie(document,"touchmove",this._handleFallbackAutoScroll):ie(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?le(document,"dragover",this._handleAutoScroll):(le(document,"pointermove",this._handleFallbackAutoScroll),le(document,"touchmove",this._handleFallbackAutoScroll),le(document,"mousemove",this._handleFallbackAutoScroll)),Gt(),Ht(),clearTimeout(fe),fe=void 0},nulling:function(){Bt=Rt=Mt=$t=Ut=Ft=zt=null,Vt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,o);if(Bt=e,t||this.options.forceAutoScrollFallback||ee||J||ne){Yt(e,this.options,a,t);var i=Ee(a,!0);!$t||Ut&&r===Ft&&o===zt||(Ut&&Gt(),Ut=setInterval((function(){var a=Ee(document.elementFromPoint(r,o),!0);a!==i&&(i=a,Ht()),Yt(e,n.options,a,t)}),10),Ft=r,zt=o)}else{if(!this.options.bubbleScroll||Ee(a,!0)===ve())return void Ht();Yt(e,this.options,Ee(a,!1),!1)}}},Q(e,{pluginName:"scroll",initializeByDefault:!0})}),Nt.mount(Xt,qt);const Qt=Nt;const Kt=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Zt=new RegExp("^"+("["+Kt+"]["+(Kt+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040")+"]*")+"$");function Jt(e,t){const n=[];let r=t.exec(e);for(;r;){const o=[];o.startIndex=t.lastIndex-r[0].length;const a=r.length;for(let e=0;e<a;e++)o.push(r[e]);n.push(o),r=t.exec(e)}return n}const en=function(e){const t=Zt.exec(e);return!(null==t)};const tn={allowBooleanAttributes:!1,unpairedTags:[]};function nn(e,t){t=Object.assign({},tn,t);const n=[];let r=!1,o=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++)if("<"===e[a]&&"?"===e[a+1]){if(a+=2,a=on(e,a),a.err)return a}else{if("<"!==e[a]){if(rn(e[a]))continue;return pn("InvalidChar","char '"+e[a]+"' is not expected.",mn(e,a))}{let i=a;if(a++,"!"===e[a]){a=an(e,a);continue}{let l=!1;"/"===e[a]&&(l=!0,a++);let s="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)s+=e[a];if(s=s.trim(),"/"===s[s.length-1]&&(s=s.substring(0,s.length-1),a--),!en(s)){let t;return t=0===s.trim().length?"Invalid space after '<'.":"Tag '"+s+"' is an invalid name.",pn("InvalidTag",t,mn(e,a))}const u=un(e,a);if(!1===u)return pn("InvalidAttr","Attributes for '"+s+"' have open quote.",mn(e,a));let c=u.value;if(a=u.index,"/"===c[c.length-1]){const n=a-c.length;c=c.substring(0,c.length-1);const o=fn(c,t);if(!0!==o)return pn(o.err.code,o.err.msg,mn(e,n+o.err.line));r=!0}else if(l){if(!u.tagClosed)return pn("InvalidTag","Closing tag '"+s+"' doesn't have proper closing.",mn(e,a));if(c.trim().length>0)return pn("InvalidTag","Closing tag '"+s+"' can't have attributes or invalid starting.",mn(e,i));if(0===n.length)return pn("InvalidTag","Closing tag '"+s+"' has not been opened.",mn(e,i));{const t=n.pop();if(s!==t.tagName){let n=mn(e,t.tagStartPos);return pn("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+s+"'.",mn(e,i))}0==n.length&&(o=!0)}}else{const l=fn(c,t);if(!0!==l)return pn(l.err.code,l.err.msg,mn(e,a-c.length+l.err.line));if(!0===o)return pn("InvalidXml","Multiple possible root nodes found.",mn(e,a));-1!==t.unpairedTags.indexOf(s)||n.push({tagName:s,tagStartPos:i}),r=!0}for(a++;a<e.length;a++)if("<"===e[a]){if("!"===e[a+1]){a++,a=an(e,a);continue}if("?"!==e[a+1])break;if(a=on(e,++a),a.err)return a}else if("&"===e[a]){const t=dn(e,a);if(-1==t)return pn("InvalidChar","char '&' is not expected.",mn(e,a));a=t}else if(!0===o&&!rn(e[a]))return pn("InvalidXml","Extra text at the end",mn(e,a));"<"===e[a]&&a--}}}return r?1==n.length?pn("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",mn(e,n[0].tagStartPos)):!(n.length>0)||pn("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):pn("InvalidXml","Start tag expected.",1)}function rn(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function on(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const r=e.substr(n,t-n);if(t>5&&"xml"===r)return pn("InvalidXml","XML declaration allowed only at the start of the document.",mn(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function an(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}const ln='"',sn="'";function un(e,t){let n="",r="",o=!1;for(;t<e.length;t++){if(e[t]===ln||e[t]===sn)""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){o=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:o}}const cn=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function fn(e,t){const n=Jt(e,cn),r={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return pn("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",gn(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return pn("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",gn(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return pn("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",gn(n[e]));const o=n[e][2];if(!hn(o))return pn("InvalidAttr","Attribute '"+o+"' is an invalid name.",gn(n[e]));if(r.hasOwnProperty(o))return pn("InvalidAttr","Attribute '"+o+"' is repeated.",gn(n[e]));r[o]=1}return!0}function dn(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function pn(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function hn(e){return en(e)}function mn(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function gn(e){return e.startIndex+e[1].length}const vn={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,n){return e}};class yn{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){"__proto__"===e&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e){"__proto__"===e.tagname&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}function bn(e,t){const n={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let r=1,o=!1,a=!1,i="";for(;t<e.length;t++)if("<"!==e[t]||a)if(">"===e[t]){if(a?"-"===e[t-1]&&"-"===e[t-2]&&(a=!1,r--):r--,0===r)break}else"["===e[t]?o=!0:i+=e[t];else{if(o&&Sn(e,t)){let r,o;t+=7,[r,o,t]=wn(e,t+1),-1===o.indexOf("&")&&(n[Cn(r)]={regx:RegExp(`&${r};`,"g"),val:o})}else if(o&&kn(e,t))t+=8;else if(o&&En(e,t))t+=8;else if(o&&_n(e,t))t+=9;else{if(!xn)throw new Error("Invalid DOCTYPE");a=!0}r++,i=""}if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}function wn(e,t){let n="";for(;t<e.length&&"'"!==e[t]&&'"'!==e[t];t++)n+=e[t];if(n=n.trim(),-1!==n.indexOf(" "))throw new Error("External entites are not supported");const r=e[t++];let o="";for(;t<e.length&&e[t]!==r;t++)o+=e[t];return[n,o,t]}function xn(e,t){return"!"===e[t+1]&&"-"===e[t+2]&&"-"===e[t+3]}function Sn(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7]}function kn(e,t){return"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8]}function En(e,t){return"!"===e[t+1]&&"A"===e[t+2]&&"T"===e[t+3]&&"T"===e[t+4]&&"L"===e[t+5]&&"I"===e[t+6]&&"S"===e[t+7]&&"T"===e[t+8]}function _n(e,t){return"!"===e[t+1]&&"N"===e[t+2]&&"O"===e[t+3]&&"T"===e[t+4]&&"A"===e[t+5]&&"T"===e[t+6]&&"I"===e[t+7]&&"O"===e[t+8]&&"N"===e[t+9]}function Cn(e){if(en(e))return e;throw new Error(`Invalid entity name ${e}`)}const Pn=/^[-+]?0x[a-fA-F0-9]+$/,Tn=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Nn={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function On(e,t={}){if(t=Object.assign({},Nn,t),!e||"string"!=typeof e)return e;let n=e.trim();if(void 0!==t.skipLike&&t.skipLike.test(n))return e;if("0"===e)return 0;if(t.hex&&Pn.test(n))return function(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(n,16);if(-1!==n.search(/[eE]/)){const r=n.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(t.leadingZeros)n=(r[1]||"")+r[3];else if("0"!==r[2]||"."!==r[3][0])return e;return t.eNotation?Number(n):e}return e}{const r=Tn.exec(n);if(r){const o=r[1],a=r[2];let i=function(e){if(e&&-1!==e.indexOf("."))return"."===(e=e.replace(/0+$/,""))?e="0":"."===e[0]?e="0"+e:"."===e[e.length-1]&&(e=e.substr(0,e.length-1)),e;return e}(r[3]);if(!t.leadingZeros&&a.length>0&&o&&"."!==n[2])return e;if(!t.leadingZeros&&a.length>0&&!o&&"."!==n[1])return e;if(t.leadingZeros&&a===e)return 0;{const r=Number(n),l=""+r;return-1!==l.search(/[eE]/)?t.eNotation?r:e:-1!==n.indexOf(".")?"0"===l&&""===i||l===i||o&&l==="-"+i?r:e:a?i===l||o+i===l?r:e:n===l||n===o+l?r:e}}return e}}function An(e){return"function"==typeof e?e:Array.isArray(e)?t=>{for(const n of e){if("string"==typeof n&&t===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}}:()=>!1}class jn{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""},num_dec:{regex:/&#([0-9]{1,7});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(e,t)=>String.fromCodePoint(Number.parseInt(t,16))}},this.addExternalEntities=In,this.parseXml=Fn,this.parseTextData=Ln,this.resolveNameSpace=Dn,this.buildAttributesMap=Rn,this.isItStopNode=Vn,this.replaceEntitiesValue=Bn,this.readStopNodeData=Gn,this.saveTextToParentTag=Un,this.addChild=zn,this.ignoreAttributesFn=An(this.options.ignoreAttributes)}}function In(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function Ln(e,t,n,r,o,a,i){if(void 0!==e&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));const r=this.options.tagValueProcessor(t,e,n,o,a);if(null==r)return e;if(typeof r!=typeof e||r!==e)return r;if(this.options.trimValues)return Yn(e,this.options.parseTagValue,this.options.numberParseOptions);return e.trim()===e?Yn(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Dn(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}const Mn=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function Rn(e,t,n){if(!0!==this.options.ignoreAttributes&&"string"==typeof e){const n=Jt(e,Mn),r=n.length,o={};for(let e=0;e<r;e++){const r=this.resolveNameSpace(n[e][1]);if(this.ignoreAttributesFn(r,t))continue;let a=n[e][4],i=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(i=this.options.transformAttributeName(i)),"__proto__"===i&&(i="#__proto__"),void 0!==a){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);const e=this.options.attributeValueProcessor(r,a,t);o[i]=null==e?a:typeof e!=typeof a||e!==a?e:Yn(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(o[i]=!0)}if(!Object.keys(o).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=o,e}return o}}const Fn=function(e){e=e.replace(/\r\n?/g,"\n");const t=new yn("!xml");let n=t,r="",o="";for(let a=0;a<e.length;a++){if("<"===e[a])if("/"===e[a+1]){const t=$n(e,">",a,"Closing Tag is not closed.");let i=e.substring(a+2,t).trim();if(this.options.removeNSPrefix){const e=i.indexOf(":");-1!==e&&(i=i.substr(e+1))}this.options.transformTagName&&(i=this.options.transformTagName(i)),n&&(r=this.saveTextToParentTag(r,n,o));const l=o.substring(o.lastIndexOf(".")+1);if(i&&-1!==this.options.unpairedTags.indexOf(i))throw new Error(`Unpaired tag can not be used as closing tag: </${i}>`);let s=0;l&&-1!==this.options.unpairedTags.indexOf(l)?(s=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):s=o.lastIndexOf("."),o=o.substring(0,s),n=this.tagsNodeStack.pop(),r="",a=t}else if("?"===e[a+1]){let t=Hn(e,a,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,o),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new yn(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,o,t.tagName)),this.addChild(n,e,o)}a=t.closeIndex+1}else if("!--"===e.substr(a+1,3)){const t=$n(e,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){const i=e.substring(a+4,t-2);r=this.saveTextToParentTag(r,n,o),n.add(this.options.commentPropName,[{[this.options.textNodeName]:i}])}a=t}else if("!D"===e.substr(a+1,2)){const t=bn(e,a);this.docTypeEntities=t.entities,a=t.i}else if("!["===e.substr(a+1,2)){const t=$n(e,"]]>",a,"CDATA is not closed.")-2,i=e.substring(a+9,t);r=this.saveTextToParentTag(r,n,o);let l=this.parseTextData(i,n.tagname,o,!0,!1,!0,!0);null==l&&(l=""),this.options.cdataPropName?n.add(this.options.cdataPropName,[{[this.options.textNodeName]:i}]):n.add(this.options.textNodeName,l),a=t+2}else{let i=Hn(e,a,this.options.removeNSPrefix),l=i.tagName;const s=i.rawTagName;let u=i.tagExp,c=i.attrExpPresent,f=i.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&r&&"!xml"!==n.tagname&&(r=this.saveTextToParentTag(r,n,o,!1));const d=n;if(d&&-1!==this.options.unpairedTags.indexOf(d.tagname)&&(n=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),l!==t.tagname&&(o+=o?"."+l:l),this.isItStopNode(this.options.stopNodes,o,l)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)"/"===l[l.length-1]?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),u=l):u=u.substr(0,u.length-1),a=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))a=i.closeIndex;else{const n=this.readStopNodeData(e,s,f+1);if(!n)throw new Error(`Unexpected end of ${s}`);a=n.i,t=n.tagContent}const r=new yn(l);l!==u&&c&&(r[":@"]=this.buildAttributesMap(u,o,l)),t&&(t=this.parseTextData(t,l,o,!0,c,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),r.add(this.options.textNodeName,t),this.addChild(n,r,o)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),o=o.substr(0,o.length-1),u=l):u=u.substr(0,u.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const e=new yn(l);l!==u&&c&&(e[":@"]=this.buildAttributesMap(u,o,l)),this.addChild(n,e,o),o=o.substr(0,o.lastIndexOf("."))}else{const e=new yn(l);this.tagsNodeStack.push(n),l!==u&&c&&(e[":@"]=this.buildAttributesMap(u,o,l)),this.addChild(n,e,o),n=e}r="",a=f}}else r+=e[a]}return t.child};function zn(e,t,n){const r=this.options.updateTag(t.tagname,n,t[":@"]);!1===r||("string"==typeof r?(t.tagname=r,e.addChild(t)):e.addChild(t))}const Bn=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Un(e,t,n,r){return e&&(void 0===r&&(r=0===t.child.length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,r))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function Vn(e,t,n){const r="*."+n;for(const n in e){const o=e[n];if(r===o||t===o)return!0}return!1}function $n(e,t,n,r){const o=e.indexOf(t,n);if(-1===o)throw new Error(r);return o+t.length-1}function Hn(e,t,n,r=">"){const o=function(e,t,n=">"){let r,o="";for(let a=t;a<e.length;a++){let t=e[a];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===n[0]){if(!n[1])return{data:o,index:a};if(e[a+1]===n[1])return{data:o,index:a}}else"\t"===t&&(t=" ");o+=t}}(e,t+1,r);if(!o)return;let a=o.data;const i=o.index,l=a.search(/\s/);let s=a,u=!0;-1!==l&&(s=a.substring(0,l),a=a.substring(l+1).trimStart());const c=s;if(n){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1),u=s!==o.data.substr(e+1))}return{tagName:s,tagExp:a,closeIndex:i,attrExpPresent:u,rawTagName:c}}function Gn(e,t,n){const r=n;let o=1;for(;n<e.length;n++)if("<"===e[n])if("/"===e[n+1]){const a=$n(e,">",n,`${t} is not closed`);if(e.substring(n+2,a).trim()===t&&(o--,0===o))return{tagContent:e.substring(r,n),i:a};n=a}else if("?"===e[n+1]){n=$n(e,"?>",n+1,"StopNode is not closed.")}else if("!--"===e.substr(n+1,3)){n=$n(e,"--\x3e",n+3,"StopNode is not closed.")}else if("!["===e.substr(n+1,2)){n=$n(e,"]]>",n,"StopNode is not closed.")-2}else{const r=Hn(e,n,">");if(r){(r&&r.tagName)===t&&"/"!==r.tagExp[r.tagExp.length-1]&&o++,n=r.closeIndex}}}function Yn(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&On(e,n)}return void 0!==e?e:""}function Wn(e,t){return qn(e,t)}function qn(e,t,n){let r;const o={};for(let a=0;a<e.length;a++){const i=e[a],l=Xn(i);let s="";if(s=void 0===n?l:n+"."+l,l===t.textNodeName)void 0===r?r=i[l]:r+=""+i[l];else{if(void 0===l)continue;if(i[l]){let e=qn(i[l],t,s);const n=Kn(e,t);i[":@"]?Qn(e,i[":@"],s,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==o[l]&&o.hasOwnProperty(l)?(Array.isArray(o[l])||(o[l]=[o[l]]),o[l].push(e)):t.isArray(l,s,n)?o[l]=[e]:o[l]=e}}}return"string"==typeof r?r.length>0&&(o[t.textNodeName]=r):void 0!==r&&(o[t.textNodeName]=r),o}function Xn(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function Qn(e,t,n,r){if(t){const o=Object.keys(t),a=o.length;for(let i=0;i<a;i++){const a=o[i];r.isArray(a,n+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Kn(e,t){const{textNodeName:n}=t,r=Object.keys(e).length;return 0===r||!(1!==r||!e[n]&&"boolean"!=typeof e[n]&&0!==e[n])}function Zn(e,t){let n="";return t.format&&t.indentBy.length>0&&(n="\n"),Jn(e,t,"",n)}function Jn(e,t,n,r){let o="",a=!1;for(let i=0;i<e.length;i++){const l=e[i],s=er(l);if(void 0===s)continue;let u="";if(u=0===n.length?s:`${n}.${s}`,s===t.textNodeName){let e=l[s];nr(u,t)||(e=t.tagValueProcessor(s,e),e=rr(e,t)),a&&(o+=r),o+=e,a=!1;continue}if(s===t.cdataPropName){a&&(o+=r),o+=`<![CDATA[${l[s][0][t.textNodeName]}]]>`,a=!1;continue}if(s===t.commentPropName){o+=r+`\x3c!--${l[s][0][t.textNodeName]}--\x3e`,a=!0;continue}if("?"===s[0]){const e=tr(l[":@"],t),n="?xml"===s?"":r;let i=l[s][0][t.textNodeName];i=0!==i.length?" "+i:"",o+=n+`<${s}${i}${e}?>`,a=!0;continue}let c=r;""!==c&&(c+=t.indentBy);const f=r+`<${s}${tr(l[":@"],t)}`,d=Jn(l[s],t,u,c);-1!==t.unpairedTags.indexOf(s)?t.suppressUnpairedNode?o+=f+">":o+=f+"/>":d&&0!==d.length||!t.suppressEmptyNode?d&&d.endsWith(">")?o+=f+`>${d}${r}</${s}>`:(o+=f+">",d&&""!==r&&(d.includes("/>")||d.includes("</"))?o+=r+t.indentBy+d+r:o+=d,o+=`</${s}>`):o+=f+"/>",a=!0}return o}function er(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];if(e.hasOwnProperty(r)&&":@"!==r)return r}}function tr(e,t){let n="";if(e&&!t.ignoreAttributes)for(let r in e){if(!e.hasOwnProperty(r))continue;let o=t.attributeValueProcessor(r,e[r]);o=rr(o,t),!0===o&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${o}"`}return n}function nr(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]==="*."+n)return!0;return!1}function rr(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const r=t.entities[n];e=e.replace(r.regex,r.val)}return e}const or={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ar(e){this.options=Object.assign({},or,e),!0===this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=An(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=sr),this.processTextOrObjNode=ir,this.options.format?(this.indentate=lr,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function ir(e,t,n,r){const o=this.j2x(e,n+1,r.concat(t));return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextValNode(e[this.options.textNodeName],t,o.attrStr,n):this.buildObjectNode(o.val,t,o.attrStr,n)}function lr(e){return this.options.indentBy.repeat(e)}function sr(e){return!(!e.startsWith(this.options.attributeNamePrefix)||e===this.options.textNodeName)&&e.substr(this.attrPrefixLen)}ar.prototype.build=function(e){return this.options.preserveOrder?Zn(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)},ar.prototype.j2x=function(e,t,n){let r="",o="";const a=n.join(".");for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i))if(void 0===e[i])this.isAttribute(i)&&(o+="");else if(null===e[i])this.isAttribute(i)||i===this.options.cdataPropName?o+="":"?"===i[0]?o+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if(e[i]instanceof Date)o+=this.buildTextValNode(e[i],i,"",t);else if("object"!=typeof e[i]){const n=this.isAttribute(i);if(n&&!this.ignoreAttributesFn(n,a))r+=this.buildAttrPairStr(n,""+e[i]);else if(!n)if(i===this.options.textNodeName){let t=this.options.tagValueProcessor(i,""+e[i]);o+=this.replaceEntitiesValue(t)}else o+=this.buildTextValNode(e[i],i,"",t)}else if(Array.isArray(e[i])){const r=e[i].length;let a="",l="";for(let s=0;s<r;s++){const r=e[i][s];if(void 0===r);else if(null===r)"?"===i[0]?o+=this.indentate(t)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(t)+"<"+i+"/"+this.tagEndChar;else if("object"==typeof r)if(this.options.oneListGroup){const e=this.j2x(r,t+1,n.concat(i));a+=e.val,this.options.attributesGroupName&&r.hasOwnProperty(this.options.attributesGroupName)&&(l+=e.attrStr)}else a+=this.processTextOrObjNode(r,i,t,n);else if(this.options.oneListGroup){let e=this.options.tagValueProcessor(i,r);e=this.replaceEntitiesValue(e),a+=e}else a+=this.buildTextValNode(r,i,"",t)}this.options.oneListGroup&&(a=this.buildObjectNode(a,i,l,t)),o+=a}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName){const t=Object.keys(e[i]),n=t.length;for(let o=0;o<n;o++)r+=this.buildAttrPairStr(t[o],""+e[i][t[o]])}else o+=this.processTextOrObjNode(e[i],i,t,n);return{attrStr:r,val:o}},ar.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'},ar.prototype.buildObjectNode=function(e,t,n,r){if(""===e)return"?"===t[0]?this.indentate(r)+"<"+t+n+"?"+this.tagEndChar:this.indentate(r)+"<"+t+n+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,a="";return"?"===t[0]&&(a="?",o=""),!n&&""!==n||-1!==e.indexOf("<")?!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===a.length?this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(r)+"<"+t+n+a+this.tagEndChar+e+this.indentate(r)+o:this.indentate(r)+"<"+t+n+a+">"+e+o}},ar.prototype.closeTag=function(e){let t="";return-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode||(t="/"):t=this.options.suppressEmptyNode?"/":`></${e}`,t},ar.prototype.buildTextValNode=function(e,t,n,r){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine;if("?"===t[0])return this.indentate(r)+"<"+t+n+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),""===o?this.indentate(r)+"<"+t+n+this.closeTag(t)+this.tagEndChar:this.indentate(r)+"<"+t+n+">"+o+"</"+t+this.tagEndChar}},ar.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e};function ur(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var fr=new class{constructor(e){this.externalEntities={},this.options=function(e){return Object.assign({},vn,e)}(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=nn(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new jn(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||void 0===r?r:Wn(r,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===t)throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};function dr(e){var t=e,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).previousContent;if(t=t.replace(/```xml/g,"").replace(/```/g,""),n&&(t=n+t.trimEnd()),t.includes("<image>")&&!t.includes("</image>"))throw new Error("Incomplete XML: Missing </image> tag");if(t.includes("<description>")&&!t.includes("</description>"))throw new Error("Incomplete XML: Missing </description> tag");var r,o,a,i=[];try{var l,s=fr.parse(t);if(!s.images)return i;var u=null!==(l=s.images.image)&&void 0!==l&&l.description?[s.images.image]:s.images.image;if(!u)return i;var c,f=ur(u);try{for(f.s();!(c=f.n()).done;){var d=c.value;if(d.description){var p,h=Array.isArray(d.description)?d.description.join("\n\n"):d.description;i.push({uid:(r=6,o=void 0,a=void 0,o=Math.pow(10,r-1),a=Math.pow(10,r)-1,Math.floor(Math.random()*(a-o+1))+o),type:"text",key:[],content:h,comment:null!==(p=d.title)&&void 0!==p?p:"",disable:!1,keysecondary:[]})}}}catch(e){f.e(e)}finally{f.f()}return i}catch(e){throw console.error(e),new Error("Model response is not valid XML")}}function pr(e){return"\n<images>\n  <image>\n    <title>".concat(e.comment,"</title>\n    <description>").concat(e.content,"</description>\n  </image>\n</images>")}const hr=(e=>{var t={};return v.d(t,e),t})({Handlebars:()=>h.Handlebars});function mr(e){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mr(e)}function gr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */gr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new O(r||[]);return o(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==mr(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(mr(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),u(k,s,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function vr(e){return function(e){if(Array.isArray(e))return wr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||br(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=br(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function br(e,t){if(e){if("string"==typeof e)return wr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wr(e,t):void 0}}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function xr(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Sr(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xr(a,r,o,i,l,"next",e)}function l(e){xr(a,r,o,i,l,"throw",e)}i(void 0)}))}}var kr=SillyTavern.getContext();new S("dumb",{}).getSettings();function Er(e){return _r.apply(this,arguments)}function _r(){return(_r=Sr(gr().mark((function e(t){var n,r,o,a,i,l,s,u,c,f,d,p,h,m,g,v,y,b,w,x,S,k,E;return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.profileId,o=t.userPrompt,a=t.buildPromptOptions,i=t.entries,l=t.promptSettings,s=t.mainContextList,u=t.maxResponseToken,c=t.continueFrom,r){e.next=3;break}throw new Error("No connection profile selected.");case 3:if(f=SillyTavern.getContext(),d=null===(n=f.extensionSettings.connectionManager)||void 0===n||null===(n=n.profiles)||void 0===n?void 0:n.find((function(e){return e.id===r}))){e.next=7;break}throw new Error('Connection profile with ID "'.concat(r,'" not found.'));case 7:if(p=d.api?kr.CONNECT_API_MAP[d.api].selected:void 0){e.next=10;break}throw new Error('Could not determine API for profile "'.concat(d.name,'".'));case 10:(h={}).user="{{user}}",h.char="{{char}}",h.persona="{{persona}}",m=o.trim(),h.isRevising="revise"===(null==c?void 0:c.mode),c&&"revise"===c.mode?h.userInstructions="":h.userInstructions=hr.Handlebars.compile(m,{noEscape:!0})(h),h.suggestedActions=i,g=[],v=yr(s),e.prev=20,v.s();case 22:if((y=v.n()).done){e.next=42;break}if("chatHistory"!==(b=y.value).promptName){e.next=34;break}return e.t0=g.push,e.t1=g,e.t2=vr,e.next=30,G(p,a);case 30:return e.t3=e.sent.result,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4),e.abrupt("continue",40);case 34:if(w=l[b.promptName]){e.next=37;break}return e.abrupt("continue",40);case 37:(x={role:b.role,content:hr.Handlebars.compile(w.content,{noEscape:!0})(h)}).content=kr.substituteParams(x.content),x.content&&g.push(x);case 40:e.next=22;break;case 42:e.next=47;break;case 44:e.prev=44,e.t5=e.catch(20),v.e(e.t5);case 47:return e.prev=47,v.f(),e.finish(47);case 50:return c&&("continue"===c.mode?g.push({role:"assistant",content:(_=c.entry,"\n<images>\n  <image>\n    <title>".concat(_.comment,"</title>\n    <description>").concat(_.content))}):"revise"===c.mode&&(g.push({role:"assistant",content:pr(c.entry)}),m&&g.push({role:"user",content:m}))),e.next=53,kr.ConnectionManagerRequestService.sendRequest(r,g,u);case 53:if(S=e.sent,k=g.find((function(e){return"assistant"===e.role})),E=dr(S.content,{previousContent:c&&"continue"===c.mode?null==k?void 0:k.content:void 0}),0!==Object.keys(E).length){e.next=58;break}return e.abrupt("return",[]);case 58:return E.forEach((function(e){var t=i.find((function(t){return t.uid===e.uid}));t&&(e.comment||(e.comment=t.comment)),null!==e.comment&&void 0!==e.comment||(e.comment="")})),E=c?[E[0]]:E,e.abrupt("return",E);case 61:case"end":return e.stop()}var _}),e,null,[[20,44,47,50]])})))).apply(this,arguments)}function Cr(e){return Pr.apply(this,arguments)}function Pr(){return(Pr=Sr(gr().mark((function e(t){var n,r,o,a,i,l,s,u,c,f,d,p,h,m;return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.profileId,a=t.imagePromptTemplate,i=t.maxResponseToken,l=t.messages,o){e.next=3;break}throw new Error("No connection profile selected.");case 3:if(s=SillyTavern.getContext(),u=null===(n=s.extensionSettings.connectionManager)||void 0===n||null===(n=n.profiles)||void 0===n?void 0:n.find((function(e){return e.id===o}))){e.next=7;break}throw new Error('Connection profile with ID "'.concat(o,'" not found.'));case 7:if(u.api?kr.CONNECT_API_MAP[u.api].selected:void 0){e.next=10;break}throw new Error('Could not determine API for profile "'.concat(u.name,'".'));case 10:return(c=JSON.parse(JSON.stringify(l))).length>0&&(f=hr.Handlebars.compile(a,{noEscape:!0}),"string"==typeof(d=c[0]).content?d.content=f({imageDescription:d.content}):Array.isArray(d.content)&&(p=d.content.find((function(e){return"text"===e.type})))&&(p.text=f({imageDescription:p.text}))),e.next=14,kr.ConnectionManagerRequestService.sendRequest(o,c,i,{extractData:!1},{provider:{allow_fallbacks:!1,order:["Google"]}});case 14:return h=e.sent,console.log("Raw image model output:",JSON.stringify(h,null,2)),m=null==h||null===(r=h.choices)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.message)||void 0===r||null===(r=r.images)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.image_url)||void 0===r?void 0:r.url,e.abrupt("return",m||"");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Nr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Nr=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new O(r||[]);return o(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==Tr(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Tr(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),u(k,s,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){jr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Tr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Tr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Tr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}var Lr="SillyTavern-BananaGen",Dr=["stDescription","possibleSteps","responseRules","taskDescription","imagePromptTemplate"],Mr={stDescription:"=== SILLYTAVERN ===\n\n**SillyTavern** is a popular open-source front-end interface designed for interacting with AI language models. It's primarily used for role-playing, creative writing, and conversational experiences, offering a user-friendly platform to customize interactions with AI.\n\n=== IMAGE PROMPT GENERATOR'S ROLE ===\n\nThe **Image Prompt Generator** is an AI assistant designed to help you create detailed and effective prompts for image generation models. It takes your ideas and the story context and transforms them into rich descriptions suitable for generating high-quality images.\n\n---\n\n### **What is the Image Prompt Generator?**\n- **An idea enhancer**: It takes your basic concepts and fleshes them out into descriptive prompts.\n- **A context-aware assistant**: It uses the chat history and character details to create relevant image prompts.\n- **A creative partner**: It helps you visualize scenes and characters by generating a variety of prompt ideas.\n\n---\n\n### **How It Works**\n1.  **Provide a Prompt**: You give the assistant a simple instruction (e.g., \"Generate a picture of the characters in the forest\").\n2.  **Receive Suggestions**: The AI generates a list of distinct, detailed image prompts, formatted as XML.\n3.  **Generate Images**: You can then use these prompts with your preferred image generation service.\n\n---\n\n### **Example Image Prompt Suggestion**\nIf you ask for an image of a character in a forest, the assistant might suggest:\n```xml\n<images>\n    <image>\n        <title>Character in a sun-dappled forest</title>\n        <description>A beautiful illustration of {{char}} standing in a sun-dappled clearing in an ancient forest. Sunlight streams through the canopy, illuminating floating dust motes. The character is looking towards the viewer with a curious expression. The style should be reminiscent of a fantasy concept art, with a focus on light and shadow.</description>\n    </image>\n</images>\n```\n\n---\n\n### **Best Practices**\n- **Be specific in your prompts**: The more context you give the text LLM, the more relevant the image prompts will be.\n- **Embrace creativity**: Use the suggestions as a starting point and feel free to adapt them.\n- **Think like a director**: The assistant gives you scene descriptions; you decide on the final image.",possibleSteps:"## PREVIOUSLY GENERATED PROMPTS\n{{#each possibleSteps}}\n### (NAME: {{#if comment}}{{comment}}{{else}}*No name*{{/if}}) (ID: {{uid}})\nContent: {{#if content}}{{content}}{{else}}*No content*{{/if}}\n{{/each}}",responseRules:"{{#if isRevising}}\nYou must revise the provided image prompt based on the user's instructions. Your response must be a single image prompt, formatted as XML.\n{{else}}\nYou must generate a list of exactly 2 possible image prompts, formatted as XML. Each prompt must have a short title and a detailed paragraph describing a scene.\n{{/if}}\n\nYour response must be wrapped in <images> tags. Each suggestion must be wrapped in an <image> tag, containing <title> and <description> tags.\n\nExample:\n```xml\n<images>\n    <image>\n        <title>An Unnatural Silence</title>\n        <description>A sudden, unnatural silence falls over the forest. For the next hour, the only sound is the rustling of leaves in a wind that seems to carry a chill from a distant, icy peak. The birds have stopped singing, and even the insects are quiet. As time passes, the shadows seem to stretch and twist into unsettling shapes, making you feel as though you are being watched from all directions.</description>\n    </image>\n    <image>\n        <title>The Hidden Shrine</title>\n        <description>You stumble upon a hidden, overgrown shrine dedicated to a forgotten deity. The air around it is thick with the scent of ozone and damp earth. As you spend the next few minutes examining the crumbling stone altar, you notice fresh offeringsa single, perfect white flower and a small, intricately carved wooden birdplaced carefully at its center, suggesting someone was here very recently.</description>\n    </image>\n    <image>\n        <title>A Mythical Beast</title>\n        <description>A wounded animal, larger than any you've seen before, crashes through the undergrowth nearby. It lets out a pained cry and struggles to get back on its feet, its eyes wide with fear and pain. It seems to be a creature of myth, and its presence here could attract unwanted attention over the next several hours.</description>\n    </image>\n    <image>\n        <title>The Shimmering Barrier</title>\n        <description>The path ahead is blocked by a mysterious, shimmering barrier of light that hums with a low, resonant energy. It stretches between two ancient trees, and touching it sends a harmless tingle up your arm. The barrier shows no signs of fading and appears to be a permanent fixture of this part of the woods.</description>\n    </image>\n    <image>\n        <title>A Haunting Melody</title>\n        <description>For the next few minutes, you hear a faint, melodic singing coming from deeper within the woods. The voice is beautiful but sorrowful, and it seems to be getting closer. The melody is hauntingly familiar, though you can't quite place where you've heard it before.</description>\n    </image>\n    <image>\n        <title>The Silent Observers</title>\n        <description>A group of cloaked figures, their faces hidden, silently emerges from the trees. They do not approach but simply stand and observe you for a long moment. After what feels like an eternity, they turn in unison and melt back into the shadows, leaving you to wonder about their purpose.</description>\n    </image>\n</images>\n```",taskDescription:"## Your Role as an Image Prompt Generator\n- You are a creative assistant that generates detailed image prompts based on user requests and story context.\n- Do not speak in the first person.\n- Your prompts should be descriptive and evocative, suitable for an AI image generation model.\n- Each suggestion must have a short, descriptive title.\n- Each suggestion must be a detailed paragraph.\n- The prompts should describe a single scene or moment in time.\n- Involve characters, the environment, and mood in your descriptions.\n{{#if isRevising}}\n- You must only generate a single, revised image prompt based on the user's request.\n{{else}}\n- You must generate exactly 2 distinct options.\n{{/if}}\n\n## Your Task\n{{#if userInstructions}}\n{{userInstructions}}\n{{else}}\nGenerate 2 possible image prompts for the current scene.\n{{/if}}",imagePromptTemplate:"Generate an image of the following description {{imageDescription}}"},Rr={version:"0.0.1",formatVersion:"F_1.2",profileId:"",imageProfileId:"",maxContextType:"profile",maxContextValue:16384,maxResponseToken:8192,contextToSend:{stDescription:!0,messages:{type:"all",first:10,last:10,range:{start:0,end:10}},charCard:!0,authorNote:!0,worldInfo:!0,suggestedEntries:!0},prompts:{stDescription:{label:"SillyTavern Description",content:Mr.stDescription,isDefault:!0},possibleSteps:{label:"Previous Prompts",content:Mr.possibleSteps,isDefault:!0},responseRules:{label:"Response Rules",content:Mr.responseRules,isDefault:!0},taskDescription:{label:"Task Description",content:Mr.taskDescription,isDefault:!0},imagePromptTemplate:{label:"Image Prompt Template",content:Mr.imagePromptTemplate,isDefault:!0}},promptPreset:"default",promptPresets:{default:{content:""}},mainContextTemplatePreset:"default",mainContextTemplatePresets:{default:{prompts:[{promptName:"chatHistory",enabled:!0,role:"system"},{promptName:"stDescription",enabled:!0,role:"system"},{promptName:"responseRules",enabled:!0,role:"system"},{promptName:"taskDescription",enabled:!0,role:"user"}]}}};function Fr(e){var t=e.replace(/[^\w\s]/g,"").split(/\s+/).filter(Boolean),n=!1;return t.map((function(e,t){var r=e.replace(/^\d+/,"");if(r){var o=n?"".concat(r[0].toUpperCase()).concat(r.slice(1).toLowerCase()):r.toLowerCase();return n||(n=!0),o}return""})).join("")}var zr=new S("bananaGen",Rr);function Br(){var e;return e=Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){zr.initializeSettings({strategy:[{from:"F_1.0",to:"F_1.1",action:function(e){var t=Ar(Ar({},Rr),e);return delete t.stWorldInfoPrompt,delete t.usingDefaultStWorldInfoPrompt,delete t.lorebookDefinitionPrompt,delete t.usingDefaultLorebookDefinitionPrompt,delete t.lorebookRulesPrompt,delete t.usingDefaultLorebookRulesPrompt,delete t.responseRulesPrompt,delete t.usingDefaultResponseRulesPrompt,t}},{from:"F_1.1",to:"F_1.2",action:function(e){var t=Ar({},e);return t.formatVersion="F_1.2","## Rules\n- Don't suggest already existing or suggested entries.\n\n## Your Task\n{{userInstructions}}"===t.prompts.taskDescription.content?(t.prompts.taskDescription.content=Mr.taskDescription,t.prompts.taskDescription.isDefault=!0):t.prompts.taskDescription.isDefault=!1,t}}]}).then((function(t){e()})).catch((function(t){console.error("[".concat(Lr,"] Error initializing settings:"),t),D("error","[".concat(Lr,"] Failed to initialize settings: ").concat(t.message)),kr.Popup.show.confirm("[".concat(Lr,"] Failed to load settings. This might be due to an update. Reset settings to default?"),"Extension Error").then((function(t){t&&(zr.resetSettings(),D("success","[".concat(Lr,"] Settings reset. Reloading may be required.")),e())}))}))})));case 1:case"end":return e.stop()}}),e)})),Br=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ir(a,r,o,i,l,"next",e)}function l(e){Ir(a,r,o,i,l,"throw",e)}i(void 0)}))},Br.apply(this,arguments)}const Ur=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const o=(0,w.useMemo)((()=>{const e=[];return n||e.push("menu_button","interactable"),e.push(t),e.filter(Boolean).join(" ")}),[n,t]);return(0,b.jsx)("button",{className:o,...r,children:e})},Vr=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const o=(0,w.useMemo)((()=>{const e=[];return n||e.push("text_pole"),e.push(t),e.filter(Boolean).join(" ")}),[n,t]);return(0,b.jsx)("select",{className:o,...r,children:e})},$r=({children:e,className:t,overrideDefaults:n=!1,...r})=>{const o=(0,w.useMemo)((()=>{const e=[];return n||e.push("text_pole","textarea_compact"),e.push(t),e.filter(Boolean).join(" ")}),[n,t]);return(0,b.jsx)("textarea",{className:o,...r,children:e})};var Hr,Gr,Yr=v(961);!function(e){e[e.TEXT=1]="TEXT",e[e.CONFIRM=2]="CONFIRM",e[e.INPUT=3]="INPUT",e[e.DISPLAY=4]="DISPLAY"}(Hr||(Hr={})),function(e){e[e.AFFIRMATIVE=1]="AFFIRMATIVE",e[e.NEGATIVE=0]="NEGATIVE",e[e.CANCELLED=null]="CANCELLED"}(Gr||(Gr={}));const Wr=SillyTavern.getContext(),qr=({content:e,type:t,inputValue:n="",options:r={},onComplete:o})=>{const a=(0,w.useRef)(null),i=(0,w.useRef)(null),[l,s]=(0,w.useState)(!1),[u,c]=(0,w.useState)(null),f=(0,w.useRef)(Wr.uuidv4()),d=(0,w.useRef)({id:f.current,type:t,dlg:null,mainInput:null,lastFocus:null,value:void 0,result:void 0,inputResults:void 0});(0,w.useEffect)((()=>{const e=a.current;if(e){if(d.current.dlg=e,d.current.mainInput=i.current,I.Popup.util.popups.push(d.current),!e.showModal){e.classList.add("poly_dialog"),L.default.registerDialog(e);new ResizeObserver((e=>{for(const t of e)L.default.reposition(t.target)})).observe(e)}return e.showModal(),(0,I.fixToastrForDialogs)(),()=>{(0,j.removeFromArray)(I.Popup.util.popups,d.current),(0,I.fixToastrForDialogs)()}}}),[]);const p=async e=>{let n=e;if(t===Hr.INPUT&&(n=e>=Gr.AFFIRMATIVE?i.current?.value:e!==Gr.NEGATIVE&&(e===Gr.CANCELLED&&null)),r.customInputs?.length){const e=new Map(r.customInputs.map((e=>{const t=a.current?.querySelector(`#${e.id}`);return[t.id,t.checked]})));d.current.inputResults=e}if(d.current.result=e,d.current.value=n,r.onClosing){if(!await r.onClosing(d.current))return s(!0),d.current.value=void 0,d.current.result=void 0,void(d.current.inputResults=void 0)}s(!1),I.Popup.util.lastResult={value:n,result:e,inputResults:d.current.inputResults};const l=a.current;l&&(l.setAttribute("closing",""),(0,I.fixToastrForDialogs)(),(0,j.runAfterAnimation)(l,(async()=>{if(l.close(),r.onClose&&await r.onClose(d.current),(0,j.removeFromArray)(I.Popup.util.popups,d.current),I.Popup.util.popups.length>0){const e=document.activeElement?.closest(".popup"),t=e?.getAttribute("data-id"),n=I.Popup.util.popups.find((e=>e.id===t));n&&n.lastFocus&&n.lastFocus.focus()}o(n)})))};return(0,Yr.createPortal)((0,b.jsx)("dialog",{ref:a,className:(()=>{const e=["popup"];return r.wide&&e.push("wide_dialogue_popup"),r.wider&&e.push("wider_dialogue_popup"),r.large&&e.push("large_dialogue_popup"),r.transparent&&e.push("transparent_dialogue_popup"),r.allowHorizontalScrolling&&e.push("horizontal_scrolling_dialogue_popup"),r.allowVerticalScrolling&&e.push("vertical_scrolling_dialogue_popup"),r.animation&&e.push(`popup--animation-${r.animation}`),e.join(" ")})(),"data-id":f.current,onKeyDown:async e=>{},onFocus:e=>{e.target instanceof HTMLElement&&e.target!==a.current&&(c(e.target),d.current.lastFocus=e.target)},children:(0,b.jsxs)("div",{className:"popup-body",children:[(0,b.jsx)("div",{className:"popup-content",children:e}),t===Hr.INPUT&&(0,b.jsx)("textarea",{ref:i,className:"popup-input text_pole result-control auto-select",rows:r.rows??1,defaultValue:n,"data-result":"1","data-result-event":"submit"}),r.customInputs&&(0,b.jsx)("div",{className:"popup-inputs",children:r.customInputs.map((e=>(0,b.jsxs)("label",{className:"checkbox_label justifyCenter",htmlFor:e.id,children:[(0,b.jsx)("input",{type:"checkbox",id:e.id,defaultChecked:e.defaultState}),(0,b.jsx)("span",{"data-i18n":e.label,children:e.label}),e.tooltip&&(0,b.jsx)("div",{className:"fa-solid fa-circle-info opacity50p",title:e.tooltip,"data-i18n":`[title]${e.tooltip}`})]},e.id)))}),t!==Hr.DISPLAY&&(0,b.jsxs)("div",{className:"popup-controls",children:[r.customButtons?.map(((e,t)=>{const n="string"==typeof e?{text:e,result:t+2}:e;return(0,b.jsx)("div",{className:`menu_button popup-button-custom result-control ${n.classes??""}`,"data-result":n.result,onClick:()=>{n.action?.(),p(n.result??t+2)},"data-i18n":n.text,children:n.text},t)})),t!==Hr.DISPLAY&&!1!==r.okButton&&(0,b.jsx)("div",{className:"popup-button-ok menu_button result-control",onClick:()=>p(Gr.AFFIRMATIVE),"data-result":"1",children:"string"==typeof r.okButton?r.okButton:"OK"}),t!==Hr.DISPLAY&&!1!==r.cancelButton&&(0,b.jsx)("div",{className:"popup-button-cancel menu_button result-control",onClick:()=>p(Gr.NEGATIVE),"data-result":"0",children:"string"==typeof r.cancelButton?r.cancelButton:"Cancel"})]}),t===Hr.DISPLAY&&(0,b.jsx)("div",{className:"popup-button-close right_menu_button fa-solid fa-circle-xmark",onClick:()=>p(Gr.CANCELLED),"data-result":"0",title:"Close popup","data-i18n":"[title]Close popup"})]})}),document.body)},Xr=SillyTavern.getContext(),Qr=(e,t,n)=>{if(!e||!e.api)return!1;const r=n[e.api];if(!r||!Object.hasOwn(t,r.selected))return!1;switch(r.selected){case"openai":return!!r.source;case"textgenerationwebui":return!!r.type}return!1},Kr=({initialSelectedProfileId:e,allowedTypes:t={openai:"Chat Completion",textgenerationwebui:"Text Completion"},placeholder:n="Select a Connection Profile",onChange:r,onCreate:o,onUpdate:a,onDelete:i})=>{const[l,s]=(0,w.useState)(e??""),[u,c]=(0,w.useState)(Date.now()),{isEnabled:f,profiles:d,connectApiMap:p}=(0,w.useMemo)((()=>{const e=Xr.extensionSettings.disabledExtensions?.includes("connection-manager");return e?(console.error("Connection Manager extension is disabled."),{isEnabled:!1,profiles:[],connectApiMap:{}}):{isEnabled:!0,profiles:Xr.extensionSettings.connectionManager?.profiles??[],connectApiMap:Xr.CONNECT_API_MAP}}),[u]);(0,w.useEffect)((()=>{if(!f)return;const e=e=>{Qr(e,t,p)&&(c(Date.now()),o?.(e))},n=(e,n)=>{const o=Qr(e,t,p),i=Qr(n,t,p);(o||i)&&c(Date.now()),a?.(e,n),l!==e.id||i||(s(""),r?.(void 0))},u=e=>{Qr(e,t,p)&&(c(Date.now()),i?.(e),l===e.id&&(s(""),r?.(void 0)))};return Xr.eventSource.on("CONNECTION_PROFILE_CREATED",e),Xr.eventSource.on("CONNECTION_PROFILE_UPDATED",n),Xr.eventSource.on("CONNECTION_PROFILE_DELETED",u),()=>{Xr.eventSource.removeListener("CONNECTION_PROFILE_CREATED",e),Xr.eventSource.removeListener("CONNECTION_PROFILE_UPDATED",n),Xr.eventSource.removeListener("CONNECTION_PROFILE_DELETED",u)}}),[f,l,t,p,r,o,a,i]);const h=(0,w.useMemo)((()=>{if(!f)return[];const e=d.filter((e=>Qr(e,t,p))),n={};for(const[e,r]of Object.entries(t))n[e]={label:r,profiles:[]};for(const t of e){const e=p[t.api];n[e.selected]&&n[e.selected].profiles.push(t)}for(const e of Object.values(n))e.profiles.sort(((e,t)=>(e.name??"").localeCompare(t.name??"")));return Object.values(n).filter((e=>e.profiles.length>0))}),[f,d,t,p]),m=(0,w.useCallback)((e=>{const t=e.target.value;s(t);const n=d.find((e=>e.id===t));r?.(n)}),[d,r]);return f?(0,b.jsxs)(Vr,{value:l,onChange:m,children:[(0,b.jsx)("option",{value:"",children:n}),h.map((e=>(0,b.jsx)("optgroup",{label:e.label,children:e.profiles.map((e=>(0,b.jsx)("option",{value:e.id,children:e.name},e.id)))},e.label)))]}):(0,b.jsx)(Vr,{disabled:!0,value:"",children:(0,b.jsx)("option",{children:"Connection Manager disabled"})})},Zr=SillyTavern.getContext(),Jr=({value:e,items:t,readOnlyValues:n=[],label:r,onChange:o,onItemsChange:a,enableCreate:i=!1,enableRename:l=!1,enableDelete:s=!1,onCreate:u,onRename:c,onDelete:f})=>{const d=(0,w.useMemo)((()=>t.find((t=>t.value===e))),[t,e]),p=(0,w.useCallback)((e=>!!e&&n.includes(e)),[n]);return(0,b.jsxs)("div",{className:"preset-select-container",style:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(Vr,{value:e??"",onChange:t=>o(t.target.value,e),children:t.map((e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value)))}),i&&(0,b.jsx)(Ur,{className:"fa-solid fa-file-circle-plus",title:`Create a new ${r}`,onClick:async()=>{const n=await Zr.Popup.show.input(`Create a new ${r}`,`Please enter a name for the new ${r}:`,"");if(!n||""===n.trim())return;const i=n.trim();if(t.some((e=>e.value===i)))return void await D("warning",`A ${r} with this name already exists.`);let l=i;if(u){const e=await Promise.resolve(u(i));if(!e.confirmed)return;e.value&&(l=e.value)}const s={value:l,label:l};a([...t,s]),o(s.value,e)},"data-i18n":`[title]Create a new ${r}`}),l&&(0,b.jsx)(Ur,{className:"fa-solid fa-pencil",title:`Rename selected ${r}`,onClick:async()=>{if(!d)return void await D("warning",`Please select a ${r} to rename.`);if(p(d.value))return void await D("warning",`This ${r} cannot be renamed as it is read-only.`);const n=await Zr.Popup.show.input(`Rename ${r}`,`Please enter a new name for "${d.label}":`,d.value);if(!n||""===n.trim()||n.trim()===d.value)return;const i=n.trim();if(t.some((e=>e.value===i)))return void await D("warning",`A ${r} with this name already exists.`);let l=i;if(c){const e=await Promise.resolve(c(d.value,i));if(!e.confirmed)return;e.value&&(l=e.value)}const s=t.map((e=>e.value===d.value?{value:l,label:l}:e));a(s),o(l,e)},disabled:!d,"data-i18n":`[title]Rename selected ${r}`}),s&&(0,b.jsx)(Ur,{className:"fa-solid fa-trash-can",title:`Delete selected ${r}`,onClick:async()=>{if(!d)return void await D("warning",`Please select a ${r} to delete.`);if(p(d.value))return void await D("warning",`This ${r} cannot be deleted as it is read-only.`);if(!await Zr.Popup.show.confirm(`Delete ${r}`,`Are you sure you want to delete "${d.label}"?`))return;if(f){if(!await Promise.resolve(f(d.value)))return}const n=t.findIndex((e=>e.value===d.value)),i=t.filter((e=>e.value!==d.value));let l;if(a(i),i.length>0){const e=Math.min(n,i.length-1);l=i[e]?.value}o(l,e)},disabled:!d,"data-i18n":`[title]Delete selected ${r}`})]})},eo=w.memo((({item:e,showToggleButton:t,showDeleteButton:n,showSelectInput:r,onToggle:o,onDelete:a,onSelectChange:i})=>{const{id:l,label:s,enabled:u,canDelete:c=!0,canToggle:f=!0,showSelect:d=!0,canSelect:p=!0,selectOptions:h=[],selectValue:m}=e,g={display:"flex",alignItems:"center",padding:"8px 12px",border:"1px solid var(--SmartThemeBorderColor, #ccc)",color:"var(--SmartThemeBodyColor, #333)",marginBottom:"2px",opacity:t&&!u?.6:1},v={cursor:"pointer",flexShrink:0},y={display:"inline-block",flexShrink:0,marginRight:"10px"};return(0,b.jsxs)("li",{className:"sortable-list-item",style:g,"data-id":l,children:[(0,b.jsx)("span",{className:"drag-handle fas fa-bars",style:{cursor:"grab",marginRight:"10px",color:"var(--SmartThemeBodyColor, #555)",flexShrink:0}}),(0,b.jsx)("span",{className:"item-label",style:{flexGrow:1,marginRight:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s}),r&&d&&p&&(0,b.jsx)(Vr,{value:m,onChange:e=>i(l,e.target.value),disabled:!u,style:{marginRight:"10px",flexShrink:0,width:"unset"},children:0===h.length?(0,b.jsx)("option",{disabled:!0,children:"--"}):h.map((e=>(0,b.jsx)("option",{value:e.value,children:e.label},e.value)))}),r&&(!d||!p)&&(0,b.jsx)("span",{style:y}),t&&f&&(0,b.jsx)(Ur,{overrideDefaults:!0,className:"toggle-button fas "+(u?"fa-toggle-on":"fa-toggle-off"),style:{...v,marginRight:"10px",fontSize:"1.2em",color:u?"var(--success-color, #4CAF50)":"var(--SmartThemeBodyColor, #555)",backgroundColor:"transparent",border:"none"},onClick:()=>o(l)}),t&&!f&&(0,b.jsx)("span",{style:y}),n&&c&&(0,b.jsx)(Ur,{overrideDefaults:!0,className:"delete-button fas fa-trash-can",style:{...v,color:"var(--error-color, #f44336)",backgroundColor:"transparent",border:"none"},onClick:()=>a(l)}),n&&!c&&(0,b.jsx)("span",{style:{...y,marginRight:0}})]})})),to=({items:e,onItemsChange:t,showToggleButton:n=!1,showDeleteButton:r=!1,showSelectInput:o=!1,sortableJsOptions:a={}})=>{const i=(0,w.useRef)(null),l=(0,w.useRef)(null);(0,w.useEffect)((()=>(i.current&&(l.current=Qt.create(i.current,{handle:".drag-handle",animation:150,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",filter:"select, button, .toggle-button, .delete-button",preventOnFilter:!1,...a,onEnd:n=>{const{oldIndex:r,newIndex:o}=n;if(void 0===r||void 0===o||r===o)return;const a=Array.from(e),[i]=a.splice(r,1);a.splice(o,0,i),t(a)}})),()=>{l.current?.destroy(),l.current=null})),[e,t,a]);const s=n=>{t(e.map((e=>e.id===n?{...e,enabled:!e.enabled}:e)))},u=n=>{t(e.filter((e=>e.id!==n)))},c=(n,r)=>{t(e.map((e=>e.id===n?{...e,selectValue:r}:e)))};return(0,b.jsx)("ul",{ref:i,className:"sortable-list",style:{listStyle:"none",padding:0,margin:0},children:e.map((e=>(0,b.jsx)(eo,{item:e,showToggleButton:n,showDeleteButton:r,showSelectInput:o,onToggle:s,onDelete:u,onSelectChange:c},e.id)))})};w.memo((({item:e,isSelected:t,onClick:n})=>{const[r,o]=(0,w.useState)(!1);return(0,b.jsxs)("li",{onClick:()=>n(e.value),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),style:{padding:"8px 12px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t?"var(--accent-color-bg, var(--link-color))":r?"var(--hover-color, var(--white20a))":"transparent"},children:[(0,b.jsx)("span",{children:e.label}),t&&(0,b.jsx)("i",{className:"checkmark fa-solid fa-check",style:{marginLeft:"8px"}})]})}));function no(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ro(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ro(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var oo=function(){var e=no((0,w.useState)(0),2)[1];return(0,w.useCallback)((function(){e((function(e){return e+1}))}),[])};function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function io(e){return function(e){if(Array.isArray(e))return vo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||go(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */lo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new O(r||[]);return o(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==ao(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ao(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),u(k,s,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function so(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function uo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){so(a,r,o,i,l,"next",e)}function l(e){so(a,r,o,i,l,"throw",e)}i(void 0)}))}}function co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?co(Object(n),!0).forEach((function(t){po(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function po(e,t,n){return(t=ho(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ho(e){var t=function(e,t){if("object"!=ao(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ao(t)?t:t+""}function mo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||go(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function go(e,t){if(e){if("string"==typeof e)return vo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vo(e,t):void 0}}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yo=SillyTavern.getContext(),bo=function(){var e,t,n=oo(),r=zr.getSettings(),o=mo((0,w.useState)(Dr[0]),2),a=o[0],i=o[1],l=(0,w.useCallback)((function(e){e(zr.getSettings()),zr.saveSettings(),n()}),[n]),s=(0,w.useMemo)((function(){return Object.keys(r.mainContextTemplatePresets).map((function(e){return{value:e,label:e}}))}),[r.mainContextTemplatePresets]),u=(0,w.useMemo)((function(){return Object.keys(r.prompts).map((function(e){var t=r.prompts[e];return{value:e,label:t?"".concat(t.label," (").concat(e,")"):e}}))}),[r.prompts]),c=(0,w.useMemo)((function(){var e=r.mainContextTemplatePresets[r.mainContextTemplatePreset];return e?e.prompts.map((function(e){var t=r.prompts[e.promptName],n=t?"".concat(t.label," (").concat(e.promptName,")"):e.promptName;return{id:e.promptName,label:n,enabled:e.enabled,selectValue:e.role,selectOptions:[{value:"user",label:"User"},{value:"assistant",label:"Assistant"},{value:"system",label:"System"}]}})):[]}),[r.mainContextTemplatePreset,r.mainContextTemplatePresets,r.prompts]),f=function(){var e=uo(lo().mark((function e(){return lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo.Popup.show.confirm("Restore default","Are you sure?");case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:l((function(e){e.mainContextTemplatePresets=fo(fo({},e.mainContextTemplatePresets),{},{default:structuredClone(Rr.mainContextTemplatePresets.default)}),e.mainContextTemplatePreset="default"}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=uo(lo().mark((function e(){var t;return lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.prompts[a]){e.next=3;break}return e.abrupt("return",D("warning","No prompt selected."));case 3:return e.next=5,yo.Popup.show.confirm("Restore Default",'Restore default for "'.concat(t.label,'"?'));case 5:e.sent&&l((function(e){e.prompts=fo(fo({},e.prompts),{},po({},a,fo(fo({},e.prompts[a]),{},{content:Mr[a]})))}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=uo(lo().mark((function e(){return lo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo.Popup.show.confirm("Reset Everything","Are you sure? This cannot be undone.");case 2:e.sent&&(zr.resetSettings(),n(),D("success","Settings reset. The UI has been updated."));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=null!==(e=null===(t=r.prompts[a])||void 0===t?void 0:t.content)&&void 0!==e?e:"",m=Dr.includes(a);return(0,b.jsxs)("div",{className:"bananagen-settings",children:[(0,b.jsxs)("div",{style:{marginTop:"10px"},children:[(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{children:"Main Context Template"}),(0,b.jsx)(Ur,{className:"fa-solid fa-undo",title:"Restore main context template to default",onClick:f})]}),(0,b.jsx)(Jr,{label:"Template",items:s,value:r.mainContextTemplatePreset,readOnlyValues:["default"],onChange:function(e){l((function(t){t.mainContextTemplatePreset=null!=e?e:"default"}))},onItemsChange:function(e){l((function(t){var n={},r=t.mainContextTemplatePresets;e.forEach((function(e){var o,a;n[e.value]=null!==(o=r[e.value])&&void 0!==o?o:structuredClone(null!==(a=r[t.mainContextTemplatePreset])&&void 0!==a?a:r.default)})),t.mainContextTemplatePresets=n}))},enableCreate:!0,enableRename:!0,enableDelete:!0}),(0,b.jsx)("div",{style:{marginTop:"5px"},children:(0,b.jsx)(to,{items:c,onItemsChange:function(e){l((function(t){var n=e.map((function(e){var t;return{promptName:e.id,enabled:e.enabled,role:null!==(t=e.selectValue)&&void 0!==t?t:"user"}})),r=fo(fo({},t.mainContextTemplatePresets[t.mainContextTemplatePreset]),{},{prompts:n});t.mainContextTemplatePresets=fo(fo({},t.mainContextTemplatePresets),{},po({},t.mainContextTemplatePreset,r))}))},showSelectInput:!0,showToggleButton:!0})})]}),(0,b.jsx)("hr",{style:{margin:"10px 0"}}),(0,b.jsxs)("div",{style:{marginTop:"10px"},children:[(0,b.jsxs)("div",{className:"title_restorable",children:[(0,b.jsx)("span",{children:"Prompt Templates"}),m&&(0,b.jsx)(Ur,{className:"fa-solid fa-undo",title:"Restore selected prompt to default",onClick:d})]}),(0,b.jsx)(Jr,{label:"Prompt",items:u,value:a,readOnlyValues:Dr,onChange:function(e){return i(null!=e?e:"")},onItemsChange:function(e){l((function(t){var n={},r=t.prompts,o=Object.keys(r),a=e.map((function(e){return e.value}));a.forEach((function(e){var t;n[e]=null!==(t=r[e])&&void 0!==t?t:{content:"",isDefault:!1,label:e}})),t.prompts=n;var i=o.filter((function(e){return!a.includes(e)}));if(i.length>0){var l=Object.fromEntries(Object.entries(t.mainContextTemplatePresets).map((function(e){var t=mo(e,2),n=t[0],r=t[1];return[n,fo(fo({},r),{},{prompts:r.prompts.filter((function(e){return!i.includes(e.promptName)}))})]})));t.mainContextTemplatePresets=l}}))},enableCreate:!0,enableRename:!0,enableDelete:!0,onCreate:function(e){var t=Fr(e);return t?r.prompts[t]?(D("error","Prompt name already exists: ".concat(t)),{confirmed:!1}):(l((function(n){var r,o;n.prompts=fo(fo({},n.prompts),{},po({},t,{content:null!==(r=null===(o=n.prompts[a])||void 0===o?void 0:o.content)&&void 0!==r?r:"",isDefault:!1,label:e})),n.mainContextTemplatePresets=Object.fromEntries(Object.entries(n.mainContextTemplatePresets).map((function(e){var n=mo(e,2),r=n[0],o=n[1];return[r,fo(fo({},o),{},{prompts:[].concat(io(o.prompts),[{enabled:!0,promptName:t,role:"user"}])})]})))})),i(t),{confirmed:!0,value:t}):(D("error","Invalid prompt name: ".concat(e)),{confirmed:!1})},onRename:function(e,t){var n=Fr(t);return n?r.prompts[n]?(D("error","Prompt name already exists: ".concat(n)),{confirmed:!1}):(l((function(r){var o=r.prompts,a=o[e],i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(o,[e].map(ho));r.prompts=fo(fo({},i),{},po({},n,fo(fo({},a),{},{label:t}))),r.mainContextTemplatePresets=Object.fromEntries(Object.entries(r.mainContextTemplatePresets).map((function(t){var r=mo(t,2),o=r[0],a=r[1];return[o,fo(fo({},a),{},{prompts:a.prompts.map((function(t){return t.promptName===e?fo(fo({},t),{},{promptName:n}):t}))})]})))})),i(n),{confirmed:!0,value:n}):(D("error","Invalid prompt name: ".concat(t)),{confirmed:!1})}}),(0,b.jsx)($r,{value:h,onChange:function(e){var t=e.target.value;l((function(e){var n=e.prompts[a];n&&(e.prompts=fo(fo({},e.prompts),{},po({},a,fo(fo({},n),{},{content:t,isDefault:!!Dr.includes(a)&&Mr[a]===t}))))}))},placeholder:"Edit the selected system prompt template here...",rows:6,style:{marginTop:"5px",width:"100%"}})]}),(0,b.jsx)("hr",{style:{margin:"15px 0"}}),(0,b.jsx)("div",{style:{textAlign:"center",marginTop:"15px"},children:(0,b.jsxs)(Ur,{className:"danger_button",style:{width:"auto"},onClick:p,children:[(0,b.jsx)("i",{style:{marginRight:"10px"},className:"fa-solid fa-triangle-exclamation"}),"I messed up, reset everything"]})})]})};function wo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var So=function(e){var t=e.entry,n=e.onReviseText,r=e.onDismiss,o=e.onGenerateImage,a=e.onRefineImage,i=e.onPostToChat,l=e.isGenerating,s=wo((0,w.useState)(""),2),u=s[0],c=s[1];return(0,b.jsxs)("div",{className:"entry",children:[(0,b.jsxs)("div",{className:"menu",children:["text"===t.type&&(0,b.jsx)(Ur,{onClick:function(){return o(t)},className:"menu_button interactable generate",title:"Generate an image from this prompt.",disabled:l,children:l?"...":"Generate Image"}),"image"===t.type&&(0,b.jsx)(Ur,{onClick:function(){return i(t)},className:"menu_button interactable publish",title:"Post this image to the chat.",disabled:l,children:l?"...":"Post to Chat"}),(0,b.jsx)(Ur,{onClick:function(){navigator.clipboard.writeText(t.content),SillyTavern.getContext().st_echo("success","Copied to clipboard!")},className:"menu_button interactable",title:"Copy the prompt text to your clipboard.",children:"Copy"}),(0,b.jsx)(Ur,{onClick:function(){return r(t.uid)},className:"menu_button interactable remove",children:"Dismiss"})]}),(0,b.jsx)("h4",{className:"comment",children:t.comment}),"image"===t.type&&t.imageUrl&&(0,b.jsx)("div",{className:"image-container",style:{textAlign:"center",marginBottom:"10px"},children:(0,b.jsx)("img",{src:t.imageUrl,alt:t.comment,style:{maxWidth:"100%",borderRadius:"8px"}})}),(0,b.jsx)("div",{className:"content",children:t.content}),(0,b.jsxs)("div",{className:"continue-prompt-section",style:{marginTop:"10px"},children:[(0,b.jsx)($r,{value:u,onChange:function(e){return c(e.target.value)},placeholder:"text"===t.type?"Optional instructions to revise this text prompt...":"Optional instructions to refine this image...",rows:2,style:{width:"100%"}}),"text"===t.type?(0,b.jsx)(Ur,{onClick:function(){return n(t,u)},disabled:l,className:"menu_button interactable revise",title:"Revise the text prompt.",style:{marginTop:"5px"},children:l?"...":"Revise Text"}):(0,b.jsx)(Ur,{onClick:function(){return a(t,u)},disabled:l,className:"menu_button interactable revise",title:"Refine the generated image.",style:{marginTop:"5px"},children:l?"...":"Refine Image"})]})]})};function ko(e){return ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(e)}function Eo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Eo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new O(r||[]);return o(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==ko(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ko(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),u(k,s,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function _o(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Po(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Po(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Po(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,No(r.key),r)}}function No(e){var t=function(e,t){if("object"!=ko(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ko(t)?t:t+""}var Oo=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getCharacters",value:function(){var e;return(null!==(e=SillyTavern.getContext().characters)&&void 0!==e?e:[]).map((function(e){return{name:e.name,avatarFile:e.avatar}}))}},{key:"getPersonas",value:function(){var e,t=null!==(e=SillyTavern.getContext().powerUserSettings.personas)&&void 0!==e?e:{};return Object.entries(t).map((function(e){var t=Co(e,2),n=t[0];return{name:t[1],avatarFile:n}}))}},{key:"getAvatarBase64",value:(r=Eo().mark((function e(t,n){var r,o,a;return Eo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return","");case 2:return e.prev=2,r=SillyTavern.getContext().getThumbnailUrl(t,n),e.next=6,fetch(r);case 6:if((o=e.sent).ok){e.next=9;break}throw new Error("Failed to fetch avatar: ".concat(o.statusText));case 9:return e.next=11,o.blob();case 11:return a=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.onloadend=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(a)})));case 15:return e.prev=15,e.t0=e.catch(2),console.error("[BananaGen] Failed to get base64 for avatar ".concat(n,":"),e.t0),e.abrupt("return","");case 19:case"end":return e.stop()}}),e,null,[[2,15]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){_o(a,n,o,i,l,"next",e)}function l(e){_o(a,n,o,i,l,"throw",e)}i(void 0)}))},function(e,t){return o.apply(this,arguments)})},{key:"getDefaultCharacterName",value:function(){return SillyTavern.getContext().name2}},{key:"getDefaultPersonaName",value:function(){return SillyTavern.getContext().name1}}],t&&To(e.prototype,t),n&&To(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o}();function Ao(e){return Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ao(e)}function jo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */jo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new O(r||[]);return o(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==Ao(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ao(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),u(k,s,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Io(e){return function(e){if(Array.isArray(e))return Uo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){Mo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mo(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ao(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ao(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Fo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ro(a,r,o,i,l,"next",e)}function l(e){Ro(a,r,o,i,l,"throw",e)}i(void 0)}))}}function zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||Bo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){if(e){if("string"==typeof e)return Uo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Uo(e,t):void 0}}function Uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}hr.Handlebars.helpers.join||hr.Handlebars.registerHelper("join",(function(e,t){return e.join(t)}));var Vo=SillyTavern.getContext(),$o=function(){return E.this_chid?function(e,{manualAvatarKey:t}={}){return(0,j.getCharaFilename)(e,{manualAvatarKey:t})}(E.this_chid):O.selected_group},Ho=function(e){var t,n,r,o,a,i,l,s,u=e.onClose,c=oo(),f=zr.getSettings(),d=zo((0,w.useState)([]),2),p=d[0],h=d[1],m=zo((0,w.useState)(!1),2),g=m[0],v=m[1],y=zo((0,w.useState)([]),2),x=y[0],S=y[1],k=zo((0,w.useState)([]),2),_=k[0],C=k[1],P=zo((0,w.useState)(""),2),T=P[0],N=P[1],A=zo((0,w.useState)(""),2),j=A[0],I=A[1],L=(0,w.useMemo)((function(){return new Oo}),[]);(0,w.useEffect)((function(){var e,t,n,r,o=L.getCharacters(),a=L.getPersonas();S(o),C(a),N(null!==(e=null===(t=o.find((function(e){return e.name===L.getDefaultCharacterName()})))||void 0===t?void 0:t.avatarFile)&&void 0!==e?e:""),I(null!==(n=null===(r=a.find((function(e){return e.name===L.getDefaultPersonaName()})))||void 0===r?void 0:r.avatarFile)&&void 0!==n?n:""),console.log("Default character:",L.getDefaultCharacterName())}),[L]);var M=(0,w.useMemo)((function(){var e;return null!==(e=$o())&&void 0!==e?e:"_global"}),[E.this_chid,O.selected_group]),R=function(e,t){zr.getSettings()[e]=t,zr.saveSettings(),c()},F=function(e,t){zr.getSettings().contextToSend[e]=t,zr.saveSettings(),c()},z=(0,w.useMemo)((function(){return Object.keys(f.promptPresets).map((function(e){return{value:e,label:e}}))}),[f.promptPresets]),B=(0,w.useCallback)(function(){var e=Fo(jo().mark((function e(t){var n,r,o,a,i,l,s,u,c,d,m,g,y,b,w;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.profileId){e.next=2;break}return e.abrupt("return",D("warning","Please select a text generation profile."));case 2:if(o=null!==(n=null==t?void 0:t.prompt)&&void 0!==n?n:f.promptPresets[f.promptPreset].content,t||o){e.next=5;break}return e.abrupt("return",D("warning","Please enter a prompt."));case 5:if(v(!0),e.prev=6,i=null===(a=Vo.extensionSettings.connectionManager)||void 0===a||null===(a=a.profiles)||void 0===a?void 0:a.find((function(e){return e.id===f.profileId}))){e.next=10;break}throw new Error("Text generation profile not found.");case 10:if(l={presetName:i.preset,contextName:i.context,instructName:i.instruct,syspromptName:i.sysprompt,ignoreCharacterFields:!f.contextToSend.charCard,ignoreWorldInfo:!0,ignoreAuthorNote:!f.contextToSend.authorNote,maxContext:"custom"===f.maxContextType?f.maxContextValue:"profile"===f.maxContextType?"preset":"active",includeNames:!!O.selected_group},$o()){e.next=16;break}l.messageIndexesBetween={start:-1,end:-1},e.next=29;break;case 16:e.t0=f.contextToSend.messages.type,e.next="none"===e.t0?19:"first"===e.t0?21:"last"===e.t0?23:"range"===e.t0?27:29;break;case 19:return l.messageIndexesBetween={start:-1,end:-1},e.abrupt("break",29);case 21:return l.messageIndexesBetween={start:0,end:null!==(r=f.contextToSend.messages.first)&&void 0!==r?r:10},e.abrupt("break",29);case 23:return d=null!==(s=f.contextToSend.messages.last)&&void 0!==s?s:10,m=null!==(u=null===(c=Vo.chat)||void 0===c?void 0:c.length)&&void 0!==u?u:0,l.messageIndexesBetween={end:Math.max(0,m-1),start:Math.max(0,m-d)},e.abrupt("break",29);case 27:return f.contextToSend.messages.range&&(l.messageIndexesBetween=f.contextToSend.messages.range),e.abrupt("break",29);case 29:return g=structuredClone(f.prompts),f.contextToSend.stDescription||delete g.stDescription,y=t?{entry:t.entry,mode:t.mode}:void 0,e.next=34,Er({profileId:f.profileId,userPrompt:o,buildPromptOptions:l,entries:p,promptSettings:g,mainContextList:f.mainContextTemplatePresets[f.mainContextTemplatePreset].prompts.filter((function(e){return e.enabled})).map((function(e){return{promptName:e.promptName,role:e.role}})),maxResponseToken:f.maxResponseToken,continueFrom:y});case 34:(b=e.sent).length>0?t?(h((function(e){return e.map((function(e){return e.uid===t.entry.uid?Do(Do({},b[0]),{},{type:"text"}):e}))})),D("success","Revised prompt.")):(w=b.map((function(e){return Do(Do({},e),{},{type:"text"})})),h((function(e){return[].concat(Io(w),Io(e))})),D("success","Added ".concat(w.length," new prompts."))):D("warning","No results from AI"),e.next=42;break;case 38:e.prev=38,e.t1=e.catch(6),console.error(e.t1),D("error",e.t1 instanceof Error?e.t1.message:String(e.t1));case 42:return e.prev=42,v(!1),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[6,38,42,45]])})));return function(t){return e.apply(this,arguments)}}(),[f,p]),U=(0,w.useCallback)(function(){var e=Fo(jo().mark((function e(t){var n,r,o,a,i;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.imageProfileId){e.next=2;break}return e.abrupt("return",D("warning","Please select an image generation profile."));case 2:return v(!0),e.prev=3,n=[{role:"user",content:t.content}],e.next=7,L.getAvatarBase64("avatar",T);case 7:return r=e.sent,e.next=10,L.getAvatarBase64("persona",j);case 10:return o=e.sent,r&&(n[0].content=[{type:"text",text:n[0].content},{type:"image_url",image_url:{url:r}}]),o&&(Array.isArray(n[0].content)?n[0].content.push({type:"image_url",image_url:{url:o}}):n[0].content=[{type:"text",text:n[0].content},{type:"image_url",image_url:{url:o}}]),e.next=15,Cr({profileId:f.imageProfileId,imagePromptTemplate:f.prompts.imagePromptTemplate.content,maxResponseToken:f.maxResponseToken,messages:n});case 15:a=e.sent,i=Do(Do({},t),{},{uid:Date.now(),parentUid:t.uid,type:"image",imageUrl:a}),h((function(e){return[i].concat(Io(e))})),D("success","Image generated successfully!"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(3),console.error(e.t0),D("error",e.t0 instanceof Error?e.t0.message:String(e.t0));case 25:return e.prev=25,v(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,21,25,28]])})));return function(t){return e.apply(this,arguments)}}(),[f,T,j]),V=(0,w.useCallback)(function(){var e=Fo(jo().mark((function e(t,n){var r,o,a,i,l,s,u,c;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.imageProfileId){e.next=2;break}return e.abrupt("return",D("warning","Please select an image generation profile."));case 2:if(n){e.next=4;break}return e.abrupt("return",D("warning","Please enter refinement instructions."));case 4:for(v(!0),e.prev=5,r=[{type:"text",text:n}],o=t,a=Io(p);o;)"image"===o.type&&o.imageUrl&&r.push({type:"image_url",image_url:{url:o.imageUrl}}),o=a.find((function(e){return e.uid===o.parentUid}));return e.next=12,L.getAvatarBase64("avatar",T);case 12:return i=e.sent,e.next=15,L.getAvatarBase64("persona",j);case 15:return l=e.sent,i&&r.push({type:"image_url",image_url:{url:i}}),l&&r.push({type:"image_url",image_url:{url:l}}),s=[{role:"user",content:r.reverse()}],e.next=21,Cr({profileId:f.imageProfileId,imagePromptTemplate:f.prompts.imagePromptTemplate.content,maxResponseToken:f.maxResponseToken,messages:s});case 21:u=e.sent,c=Do(Do({},t),{},{uid:Date.now(),parentUid:t.uid,type:"image",imageUrl:u,comment:"Refined: ".concat(n)}),h((function(e){return[c].concat(Io(e))})),D("success","Image refined successfully!"),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(5),console.error(e.t0),D("error",e.t0 instanceof Error?e.t0.message:String(e.t0));case 31:return e.prev=31,v(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[5,27,31,34]])})));return function(t,n){return e.apply(this,arguments)}}(),[f,p,T,j]),$=(0,w.useCallback)((function(e,t){B({entry:e,prompt:t,mode:"revise"})}),[B]),H=(0,w.useCallback)((function(e){h((function(t){return t.filter((function(t){return t.uid!==e}))}))}),[]),G=(0,w.useCallback)(function(){var e=Fo(jo().mark((function e(t){var n,r,o,a,i,l,s;return jo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"===t.type&&t.imageUrl){e.next=2;break}return e.abrupt("return",D("error","Only generated images can be posted to chat."));case 2:if(n=SillyTavern.getContext(),r=n.chat,o=n.addOneMessage,a=n.saveChat,i=n.eventSource,l=n.event_types,r&&o&&a&&i&&l){e.next=5;break}return e.abrupt("return",console.error("[BananaGen] Missing required context functions for publishing."));case 5:return s={name:"System",is_user:!1,is_system:!0,send_date:Date.now(),mes:t.content.trim(),force_avatar:"img/quill.png",extra:{image:t.imageUrl,inline_image:!0,gen_id:Date.now(),api:"manual",model:"SillyTavern-BananaGen"}},r.push(s),e.next=9,i.emit(l.MESSAGE_SENT,r.length-1);case 9:return o(s),e.next=12,i.emit(l.USER_MESSAGE_RENDERED,r.length-1);case 12:return e.next=14,a();case 14:D("success","Posted to chat!"),u();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u]);return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{id:"bananagenPopup",children:[(0,b.jsx)("h2",{children:"Image Prompt Generator"}),(0,b.jsxs)("div",{className:"container",children:[(0,b.jsxs)("div",{className:"column",children:[(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:"Connection Profiles"}),(0,b.jsx)("label",{children:"Text Generation"}),(0,b.jsx)(Kr,{initialSelectedProfileId:f.profileId,onChange:function(e){return R("profileId",null==e?void 0:e.id)}}),(0,b.jsx)("label",{style:{marginTop:"10px"},children:"Image Generation"}),(0,b.jsx)(Kr,{initialSelectedProfileId:f.imageProfileId,onChange:function(e){return R("imageProfileId",null==e?void 0:e.id)}})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:"Avatars to Include"}),(0,b.jsx)("label",{children:"Character"}),(0,b.jsxs)("select",{className:"text_pole",value:T,onChange:function(e){return N(e.target.value)},children:[(0,b.jsx)("option",{value:"",children:"None"}),x.map((function(e){return(0,b.jsx)("option",{value:e.avatarFile,children:e.name},e.avatarFile)}))]}),(0,b.jsx)("label",{style:{marginTop:"10px"},children:"Persona"}),(0,b.jsxs)("select",{className:"text_pole",value:j,onChange:function(e){return I(e.target.value)},children:[(0,b.jsx)("option",{value:"",children:"None"}),_.map((function(e){return(0,b.jsx)("option",{value:e.avatarFile,children:e.name},e.avatarFile)}))]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:"Context to Send (for Text Gen)"}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[(0,b.jsxs)("label",{className:"checkbox_label",children:[(0,b.jsx)("input",{type:"checkbox",checked:f.contextToSend.stDescription,onChange:function(e){return F("stDescription",e.target.checked)}}),"Description of SillyTavern"]}),"_global"!==M&&(0,b.jsxs)("div",{className:"message-options",children:[(0,b.jsx)("h4",{children:"Messages to Include"}),(0,b.jsxs)("select",{className:"text_pole",value:f.contextToSend.messages.type,onChange:function(e){return F("messages",Do(Do({},f.contextToSend.messages),{},{type:e.target.value}))},children:[(0,b.jsx)("option",{value:"none",children:"None"}),(0,b.jsx)("option",{value:"all",children:"All Messages"}),(0,b.jsx)("option",{value:"first",children:"First X Messages"}),(0,b.jsx)("option",{value:"last",children:"Last X Messages"}),(0,b.jsx)("option",{value:"range",children:"Range"})]}),"first"===f.contextToSend.messages.type&&(0,b.jsx)("div",{style:{marginTop:"10px"},children:(0,b.jsxs)("label",{children:["First"," ",(0,b.jsx)("input",{type:"number",className:"text_pole small message-input",min:"1",value:null!==(t=f.contextToSend.messages.first)&&void 0!==t?t:10,onChange:function(e){return F("messages",Do(Do({},f.contextToSend.messages),{},{first:parseInt(e.target.value)||10}))}})," ","Messages"]})}),"last"===f.contextToSend.messages.type&&(0,b.jsx)("div",{style:{marginTop:"10px"},children:(0,b.jsxs)("label",{children:["Last"," ",(0,b.jsx)("input",{type:"number",className:"text_pole small message-input",min:"1",value:null!==(n=f.contextToSend.messages.last)&&void 0!==n?n:10,onChange:function(e){return F("messages",Do(Do({},f.contextToSend.messages),{},{last:parseInt(e.target.value)||10}))}})," ","Messages"]})}),"range"===f.contextToSend.messages.type&&(0,b.jsx)("div",{style:{marginTop:"10px"},children:(0,b.jsxs)("label",{children:["Range:"," ",(0,b.jsx)("input",{type:"number",className:"text_pole small message-input",min:"0",placeholder:"Start",value:null!==(r=null===(o=f.contextToSend.messages.range)||void 0===o?void 0:o.start)&&void 0!==r?r:0,onChange:function(e){return F("messages",Do(Do({},f.contextToSend.messages),{},{range:Do(Do({},f.contextToSend.messages.range),{},{start:parseInt(e.target.value)||0})}))}})," ","to"," ",(0,b.jsx)("input",{type:"number",className:"text_pole small message-input",min:"1",placeholder:"End",value:null!==(a=null===(i=f.contextToSend.messages.range)||void 0===i?void 0:i.end)&&void 0!==a?a:10,onChange:function(e){return F("messages",Do(Do({},f.contextToSend.messages),{},{range:Do(Do({},f.contextToSend.messages.range),{},{end:parseInt(e.target.value)||10})}))}})]})})]}),(0,b.jsxs)("label",{className:"checkbox_label",children:[(0,b.jsx)("input",{type:"checkbox",checked:f.contextToSend.charCard,onChange:function(e){return F("charCard",e.target.checked)}}),"Char Card"]}),(0,b.jsxs)("label",{className:"checkbox_label",children:[(0,b.jsx)("input",{type:"checkbox",checked:f.contextToSend.authorNote,onChange:function(e){return F("authorNote",e.target.checked)}})," ","Author Note"]})]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsxs)("label",{children:["Max Context",(0,b.jsxs)("select",{className:"text_pole",title:"Select Max Context Type",value:f.maxContextType,onChange:function(e){return R("maxContextType",e.target.value)},children:[(0,b.jsx)("option",{value:"profile",children:"Use profile preset"}),(0,b.jsx)("option",{value:"sampler",children:"Use active preset in sampler settings"}),(0,b.jsx)("option",{value:"custom",children:"Custom"})]})]}),"custom"===f.maxContextType&&(0,b.jsx)("label",{style:{marginTop:"10px"},children:(0,b.jsx)("input",{type:"number",className:"text_pole",min:"1",step:"1",placeholder:"Enter max tokens",value:f.maxContextValue,onChange:function(e){return R("maxContextValue",parseInt(e.target.value)||2048)}})}),(0,b.jsxs)("label",{style:{display:"block",marginTop:"10px"},children:["Max Response Tokens",(0,b.jsx)("input",{type:"number",className:"text_pole",min:"1",step:"1",placeholder:"Enter max response tokens",value:f.maxResponseToken,onChange:function(e){return R("maxResponseToken",parseInt(e.target.value)||256)}})]})]}),(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:"Your Prompt (for Text Gen)"}),(0,b.jsx)(Jr,{label:"Prompt Preset",items:z,value:f.promptPreset,readOnlyValues:["default"],onChange:function(e){return R("promptPreset",null!=e?e:"default")},onItemsChange:function(e){var t=e.reduce((function(e,t){var n;return e[t.value]=null!==(n=f.promptPresets[t.value])&&void 0!==n?n:{content:""},e}),{});R("promptPresets",t)},enableCreate:!0,enableRename:!0,enableDelete:!0}),(0,b.jsx)($r,{value:null!==(l=null===(s=f.promptPresets[f.promptPreset])||void 0===s?void 0:s.content)&&void 0!==l?l:"",onChange:function(e){var t=Do({},f.promptPresets);t[f.promptPreset]&&(t[f.promptPreset].content=e.target.value,R("promptPresets",t))},placeholder:"e.g., 'A cinematic shot of {{char}} in a futuristic city.'",rows:4,style:{marginTop:"5px",width:"100%"}}),(0,b.jsx)(Ur,{onClick:function(){return B()},disabled:g,className:"menu_button interactable",style:{marginTop:"5px"},children:g?"Generating...":"Generate Prompts"}),(0,b.jsx)(Ur,{onClick:u,className:"menu_button interactable",style:{marginTop:"5px"},children:"Close"})]})]}),(0,b.jsx)("div",{className:"wide-column",children:(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:"Generated Prompts & Images"}),(0,b.jsx)("div",{className:"actions",children:(0,b.jsx)(Ur,{onClick:function(){h([])},disabled:g,className:"menu_button interactable",children:"Clear All"})}),(0,b.jsxs)("div",{children:[0===p.length&&(0,b.jsx)("p",{children:"No prompts yet. Send a prompt to get started!"}),p.map((function(e){return(0,b.jsx)(So,{entry:e,onReviseText:$,onDismiss:H,onGenerateImage:U,onRefineImage:V,onPostToChat:G,isGenerating:g},e.uid)}))]})]})})]})]})})};function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],s=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Yo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Wo=function(){var e=Go((0,w.useState)(!1),2),t=e[0],n=e[1],r=Go((0,w.useState)(0),2),o=r[0],a=r[1],i=function(){n(!1),console.log("BananaGen popup closed")};return window.openBananaGenPopup=function(){a((function(e){return e+1})),n(!0),console.log("BananaGen popup opened")},t?(0,b.jsx)(qr,{content:(0,b.jsx)(Ho,{onClose:i}),type:Hr.DISPLAY,onComplete:i,options:{large:!0,wide:!0}},o):null};function qo(e){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qo(e)}function Xo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Xo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),l=new O(r||[]);return o(i,"_invoke",{value:C(e,n,l)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var d="suspendedStart",p="suspendedYield",h="executing",m="completed",g={};function v(){}function y(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var k=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,l){var s=f(e[o],e,a);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==qo(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function C(t,n,r){var o=d;return function(a,i){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var s=P(l,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(qo(t)+" is not iterable")}return y.prototype=b,o(k,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,s,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},E(_.prototype),u(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(c(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(k),u(k,s,"Generator"),u(k,i,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Qo(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}var Ko=SillyTavern.getContext();function Zo(){return Jo.apply(this,arguments)}function Jo(){var e;return e=Xo().mark((function e(){var t,n,r,o;return Xo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ko.renderExtensionTemplateAsync("third-party/".concat(Lr),"templates/settings");case 2:t=e.sent,document.querySelector("#extensions_settings").insertAdjacentHTML("beforeend",t),n=document.createElement("div"),(r=document.querySelector(".bananagen_settings .inline-drawer-content"))&&(r.prepend(n),x.createRoot(n).render((0,b.jsx)(w.StrictMode,{children:(0,b.jsx)(bo,{})}))),o=document.createElement("div"),document.body.appendChild(o),x.createRoot(o).render((0,b.jsx)(w.StrictMode,{children:(0,b.jsx)(Wo,{})})),jQuery((function(){var e="bananagen-menu-button",t='\n        <div id="'.concat(e,'" class="list-group-item flex-container flexGap5" title="Open BananaGen to generate image prompts.">\n            <div class="fa-solid fa-image extensionsMenuExtensionButton"></div>\n            <span>BananaGen</span>\n        </div>');$("#extensionsMenu").append(t),$("#".concat(e)).on("click",(function(){window.openBananaGenPopup&&window.openBananaGenPopup()}))}));case 12:case"end":return e.stop()}}),e)})),Jo=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Qo(a,r,o,i,l,"next",e)}function l(e){Qo(a,r,o,i,l,"throw",e)}i(void 0)}))},Jo.apply(this,arguments)}Ko.ConnectionManagerRequestService&&Ko.getCharacterCardFields&&Ko.getWorldInfoPrompt&&Ko.reloadWorldInfoEditor?function(){return Br.apply(this,arguments)}().then((function(){Zo()})):D("error","[".concat(Lr,"] Make sure ST is updated."));var ea=y.T;export{ea as init};